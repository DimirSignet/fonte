{"sha": "8f7f90712dc565ca29bbd21c1cfacdd9eb4d44ff", "log": "Test unmodifiability of returned collections  ", "commit": "\n--- a/src/test/org/apache/commons/lang/LocaleUtilsTest.java\n+++ b/src/test/org/apache/commons/lang/LocaleUtilsTest.java\n import java.lang.reflect.Constructor;\n import java.lang.reflect.Modifier;\n import java.util.Arrays;\n+import java.util.Collection;\n import java.util.HashSet;\n import java.util.Iterator;\n import java.util.List;\n         \n         assertEquals(expected.length, localeList.size());\n         assertEquals(Arrays.asList(expected), localeList);\n-        try {\n-            localeList.add(\"Unmodifiable\");\n-            fail();\n-        } catch (UnsupportedOperationException ex) {}\n+        assertUnmodifiableCollection(localeList);\n     }\n \n     //-----------------------------------------------------------------------\n         List list2 = LocaleUtils.availableLocaleList();\n         assertNotNull(list);\n         assertSame(list, list2);\n+        assertUnmodifiableCollection(list);\n+        \n         Locale[] jdkLocaleArray = Locale.getAvailableLocales();\n         List jdkLocaleList = Arrays.asList(jdkLocaleArray);\n         assertEquals(jdkLocaleList, list);\n         Set set2 = LocaleUtils.availableLocaleSet();\n         assertNotNull(set);\n         assertSame(set, set2);\n+        assertUnmodifiableCollection(set);\n+        \n         Locale[] jdkLocaleArray = Locale.getAvailableLocales();\n         List jdkLocaleList = Arrays.asList(jdkLocaleArray);\n         Set jdkLocaleSet = new HashSet(jdkLocaleList);\n                         + \" for country: \" + country);\n             }\n         }\n-        try {\n-            list.add(\"Unmodifiable\");\n-            fail();\n-        } catch (UnsupportedOperationException ex) {}\n+        assertUnmodifiableCollection(list);\n     }\n \n     /**\n                         + \" for country: \" + language);\n             }\n         }\n-        try {\n-            list.add(\"Unmodifiable\");\n-            fail();\n-        } catch (UnsupportedOperationException ex) {}\n+        assertUnmodifiableCollection(list);\n     }\n \n     /**\n         assertCountriesByLanguage(\"it\", new String[]{\"IT\", \"CH\"});\n     }\n \n+    /**\n+     * @param coll  the collection to check\n+     */\n+    private static void assertUnmodifiableCollection(Collection coll) {\n+        try {\n+            coll.add(\"Unmodifiable\");\n+            fail();\n+        } catch (UnsupportedOperationException ex) {}\n+    }\n+\n }", "timestamp": 1128765860, "metainfo": ""}