{"sha": "f75380d87ff836cf3ccc4e07e440b46217a224b2", "log": "Add asReader method  ", "commit": "\n--- a/src/java/org/apache/commons/lang/text/StrBuilder.java\n+++ b/src/java/org/apache/commons/lang/text/StrBuilder.java\n  */\n package org.apache.commons.lang.text;\n \n+import java.io.CharArrayReader;\n+import java.io.Reader;\n import java.util.Collection;\n import java.util.Iterator;\n \n         return this;\n     }\n \n+    //-----------------------------------------------------------------------\n+    /**\n+     * Gets the contents of this builder as a Reader.\n+     * <p>\n+     * This method allows the contents of the builder to be read\n+     * using any standard method that expects a Reader.\n+     * The current implementation returns a CharArrayReader, but\n+     * you should not rely on this.\n+     *\n+     * @return a reader\n+     */\n+    public Reader asReader() {\n+        return new CharArrayReader(buffer, 0, size);\n+    }\n+\n+    //-----------------------------------------------------------------------\n //    /**\n //     * Gets a String version of the string builder by calling the internal\n //     * constructor of String by reflection.\n--- a/src/test/org/apache/commons/lang/text/StrBuilderTest.java\n+++ b/src/test/org/apache/commons/lang/text/StrBuilderTest.java\n \n package org.apache.commons.lang.text;\n \n+import java.io.Reader;\n import java.util.Arrays;\n import java.util.Collection;\n import java.util.Collections;\n             fail();\n         } catch (StringIndexOutOfBoundsException e) {}\n     }\n+\n+    //-----------------------------------------------------------------------\n+    public void testAsReader() throws Exception {\n+        StrBuilder sb = new StrBuilder (\"some text\");\n+        Reader reader = sb.asReader();\n+        char[] buf = new char[40];\n+        assertEquals(9, reader.read(buf));\n+        assertEquals(\"some text\", new String(buf, 0, 9));\n+        \n+        buf = new char[40];\n+        assertEquals(-1, reader.read(buf));\n+    }\n+\n }", "timestamp": 1123142026, "metainfo": ""}