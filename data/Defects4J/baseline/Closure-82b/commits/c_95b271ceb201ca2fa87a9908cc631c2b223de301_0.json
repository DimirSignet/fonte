{"sha": "95b271ceb201ca2fa87a9908cc631c2b223de301", "log": "Update strict mode check for get and set object properties.  R=nicksantos DELTA=8  (7 added, 0 deleted, 1 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=137   ", "commit": "\n--- a/src/com/google/javascript/jscomp/StrictModeCheck.java\n+++ b/src/com/google/javascript/jscomp/StrictModeCheck.java\n       for (Node key = n.getFirstChild();\n            key != null;\n            key = key.getNext()) {\n-        if (key.getString().endsWith(\"__\")) {\n+        if (key.getType() != Token.NUMBER && key.getString().endsWith(\"__\")) {\n           t.report(key, ILLEGAL_NAME);\n         }\n       }\n--- a/test/com/google/javascript/jscomp/StrictModeCheckTest.java\n+++ b/test/com/google/javascript/jscomp/StrictModeCheckTest.java\n   public void testIllegalName8() {\n     test(\"var o = {a__: 3};\", null, StrictModeCheck.ILLEGAL_NAME);\n     test(\"var o = {b: 3, a__: 4};\", null, StrictModeCheck.ILLEGAL_NAME);\n+    test(\"var o = {b: 3, get a__() {}};\", null, StrictModeCheck.ILLEGAL_NAME);\n+    test(\"var o = {b: 3, set a__(c) {}};\", null, StrictModeCheck.ILLEGAL_NAME);\n   }\n \n   public void testIllegalName9() {\n     test(\"a__: while (true) { var b = 3; }\", null,\n          StrictModeCheck.ILLEGAL_NAME);\n   }\n+\n+  public void testIllegalName10() {\n+    // Validate that number as objlit key\n+    testSame(\"var o = {1: 3, 2: 4};\");\n+  }\n }", "timestamp": 1292372908, "metainfo": ""}