{"sha": "bf52b91c39788a851a6b9fbcbc6e627e09322db7", "log": "Fix getJSDocInfo to only return the jsdoc info for itself. Change CheckAccessControls to use the default externs, which exposes this problem  R=johnlenz DELTA=25 (6 added, 11 deleted, 8 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=6050   ", "commit": "\n--- a/src/com/google/javascript/rhino/jstype/ObjectType.java\n+++ b/src/com/google/javascript/rhino/jstype/ObjectType.java\n    */\n   @Override\n   public JSDocInfo getJSDocInfo() {\n-    if (docInfo != null) {\n-      return docInfo;\n-    } else if (getImplicitPrototype() != null) {\n-      return getImplicitPrototype().getJSDocInfo();\n-    } else {\n-      return super.getJSDocInfo();\n-    }\n+    return docInfo;\n   }\n \n   /**\n--- a/test/com/google/javascript/jscomp/CheckAccessControlsTest.java\n+++ b/test/com/google/javascript/jscomp/CheckAccessControlsTest.java\n import static com.google.javascript.jscomp.CheckAccessControls.BAD_PRIVATE_GLOBAL_ACCESS;\n import static com.google.javascript.jscomp.CheckAccessControls.BAD_PRIVATE_PROPERTY_ACCESS;\n import static com.google.javascript.jscomp.CheckAccessControls.BAD_PROTECTED_PROPERTY_ACCESS;\n+import static com.google.javascript.jscomp.CheckAccessControls.CONST_PROPERTY_DELETED;\n+import static com.google.javascript.jscomp.CheckAccessControls.CONST_PROPERTY_REASSIGNED_VALUE;\n import static com.google.javascript.jscomp.CheckAccessControls.DEPRECATED_CLASS;\n import static com.google.javascript.jscomp.CheckAccessControls.DEPRECATED_CLASS_REASON;\n import static com.google.javascript.jscomp.CheckAccessControls.DEPRECATED_NAME;\n import static com.google.javascript.jscomp.CheckAccessControls.DEPRECATED_PROP_REASON;\n import static com.google.javascript.jscomp.CheckAccessControls.PRIVATE_OVERRIDE;\n import static com.google.javascript.jscomp.CheckAccessControls.VISIBILITY_MISMATCH;\n-import static com.google.javascript.jscomp.CheckAccessControls.CONST_PROPERTY_DELETED;\n-import static com.google.javascript.jscomp.CheckAccessControls.CONST_PROPERTY_REASSIGNED_VALUE;\n-\n-import com.google.javascript.jscomp.CheckLevel;\n-import com.google.javascript.jscomp.CompilerOptions;\n \n /**\n  * Tests for {@link CheckAccessControls}.\n public class CheckAccessControlsTest extends CompilerTestCase {\n \n   public CheckAccessControlsTest() {\n+    super(CompilerTypeTestCase.DEFAULT_EXTERNS);\n     parseTypeInfo = true;\n     enableTypeCheck(CheckLevel.WARNING);\n   }\n   }\n \n   public void testAutoboxedDeprecatedProperty() {\n-    testDep(\n+    test(\n+        \"\", // no externs\n         \"/** @constructor */ function String() {}\" +\n         \"/** @deprecated %s */ String.prototype.length;\" +\n         \"function f() { return 'x'.length; }\",\n         \"GRR\",\n-        DEPRECATED_PROP,\n-        DEPRECATED_PROP_REASON);\n+        DEPRECATED_PROP_REASON,\n+        null);\n   }\n \n   public void testAutoboxedPrivateProperty() {\n-    test(new String[] {\n+    test(\n         \"/** @constructor */ function String() {}\" +\n-        \"/** @private */ String.prototype.length;\",\n-        \"function f() { return 'x'.length; }\"\n-    }, null, BAD_PRIVATE_PROPERTY_ACCESS);\n+        \"/** @private */ String.prototype.length;\", // externs\n+        \"function f() { return 'x'.length; }\",\n+        \"\", // output\n+        BAD_PRIVATE_PROPERTY_ACCESS,\n+        null);\n   }\n \n   public void testNullableDeprecatedProperty() {", "timestamp": 1357144945, "metainfo": ""}