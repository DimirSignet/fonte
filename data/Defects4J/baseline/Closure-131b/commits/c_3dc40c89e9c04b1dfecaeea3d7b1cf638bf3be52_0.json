{"sha": "3dc40c89e9c04b1dfecaeea3d7b1cf638bf3be52", "log": "Output the input name and escape it when requested for input seperators.  R=acleung DELTA=5  (3 added, 0 deleted, 2 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=2917   ", "commit": "\n--- a/src/com/google/javascript/jscomp/Compiler.java\n+++ b/src/com/google/javascript/jscomp/Compiler.java\n import java.util.concurrent.Callable;\n import java.util.logging.Level;\n import java.util.logging.Logger;\n+import java.util.regex.Matcher;\n \n /**\n  * Compiler (and the other classes in this package) does the following:\n \n           String delimiter = options.inputDelimiter;\n \n+          String inputName = root.getInputId().getIdName();\n           String sourceName = root.getSourceFileName();\n           Preconditions.checkState(sourceName != null);\n           Preconditions.checkState(!sourceName.isEmpty());\n \n-          delimiter = delimiter.replaceAll(\"%name%\", sourceName)\n-            .replaceAll(\"%num%\", String.valueOf(inputSeqNum));\n+          delimiter = delimiter\n+              .replaceAll(\"%name%\", Matcher.quoteReplacement(inputName))\n+              .replaceAll(\"%num%\", String.valueOf(inputSeqNum));\n \n           cb.append(delimiter)\n             .append(\"\\n\");", "timestamp": 1312569661, "metainfo": ""}