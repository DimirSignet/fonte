{"sha": "ca13ac9a6a0ec6703115d909774379456c5a23a9", "log": "Fix source map generation bug.  R=jschorr DELTA=107  (107 added, 0 deleted, 0 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=54012   ", "commit": "\n--- a/src/com/google/javascript/jscomp/SourceMap.java\n+++ b/src/com/google/javascript/jscomp/SourceMap.java\n \n         closeLine();\n         openLine();\n+\n+        // Set the starting location for the next line.\n+        col = 0;\n       }\n     }\n \n--- a/test/com/google/javascript/jscomp/SourceMapTest.java\n+++ b/test/com/google/javascript/jscomp/SourceMapTest.java\n                    \"[\\\"c:\\\\\\\\myfile.js\\\",1,14,\\\"goo\\\"]\\n\");\n   }\n \n+  public void testGoldenOutput5() throws Exception {\n+    checkSourceMap(\"c:\\\\myfile.js\",\n+                   \"/** @preserve\\n\" +\n+                   \" * this is a test.\\n\" +\n+                   \" */\\n\" +\n+                   \"var foo=a + 'this is a really long line that will force the\"\n+                   + \" mapping to span multiple lines 123456789 123456789\"\n+                   + \" 123456789 123456789 123456789 123456789 123456789\"\n+                   + \" 123456789 123456789 123456789 123456789 123456789\"\n+                   + \" 123456789 123456789 123456789 123456789 123456789\"\n+                   + \" 123456789 123456789 123456789 123456789 123456789\"\n+                   + \" 123456789 123456789 123456789 123456789 123456789\"\n+                   + \" 123456789 123456789 123456789 123456789 123456789\"\n+                   + \" 123456789 123456789 123456789 123456789 123456789\"\n+                   + \" 123456789 123456789 123456789 123456789 123456789\"\n+                   + \" 123456789 123456789 123456789 123456789 123456789\"\n+                   + \" 123456789 123456789 123456789 123456789 123456789\"\n+                   + \" 123456789 123456789 123456789 123456789 123456789\"\n+                   + \" 123456789 123456789 123456789 123456789 123456789\"\n+                   + \" 123456789 123456789 123456789 123456789 123456789\"\n+                   + \" 123456789 123456789 123456789 123456789 123456789\"\n+                   + \" 123456789 123456789 123456789 123456789 123456789\"\n+                   + \" 123456789 123456789 123456789 123456789 123456789\"\n+                   + \" 123456789 123456789 123456789 123456789 123456789\"\n+                   + \" 123456789 123456789 123456789 123456789 123456789\"\n+                   + \" 123456789 123456789 123456789 123456789 123456789\"\n+                   + \" 123456789 123456789 123456789 123456789 123456789\"\n+                   + \" 123456789 123456789 123456789 123456789 123456789\"\n+                   + \" 123456789 123456789 123456789 123456789 123456789\"\n+                   + \" 123456789 123456789 123456789 123456789 123456789\"\n+                   + \" 123456789 123456789 123456789 123456789 123456789\"\n+                   + \"' + c + d + e;\",\n+\n+                   \"/** Begin line maps. **/\" +\n+                   \"{ \\\"file\\\" : \\\"testcode\\\", \\\"count\\\": 6 }\\n\" +\n+                   \"[]\\n\" +\n+                   \"[]\\n\" +\n+                   \"[]\\n\" +\n+                   \"[]\\n\" +\n+                   \"[0,0,0,0,1,1,1,1,2,1,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,\" +\n+                   \"3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3,3]\\n\" +\n+                   \"[4,1,5,1,6]\\n\" +\n+                   \"/** Begin file information. **/\\n\" +\n+                   \"[]\\n\" +\n+                   \"[]\\n\" +\n+                   \"[]\\n\" +\n+                   \"[]\\n\" +\n+                   \"[]\\n\" +\n+                   \"[]\\n\" +\n+                   \"/** Begin mapping definitions. **/\\n\" +\n+                   \"[\\\"c:\\\\\\\\myfile.js\\\",4,0]\\n\" +\n+                   \"[\\\"c:\\\\\\\\myfile.js\\\",4,4,\\\"foo\\\"]\\n\" +\n+                   \"[\\\"c:\\\\\\\\myfile.js\\\",4,8,\\\"a\\\"]\\n\" +\n+                   \"[\\\"c:\\\\\\\\myfile.js\\\",4,12]\\n\" +\n+                   \"[\\\"c:\\\\\\\\myfile.js\\\",4,1314,\\\"c\\\"]\\n\" +\n+                   \"[\\\"c:\\\\\\\\myfile.js\\\",4,1318,\\\"d\\\"]\\n\" +\n+                   \"[\\\"c:\\\\\\\\myfile.js\\\",4,1322,\\\"e\\\"]\\n\");\n+  }\n+\n   public void testBasicDeterminism() throws Exception {\n     RunResult result1 = compile(\"file1\", \"foo;\", \"file2\", \"bar;\");\n     RunResult result2 = compile(\"file2\", \"foo;\", \"file1\", \"bar;\");", "timestamp": 1279644927, "metainfo": ""}