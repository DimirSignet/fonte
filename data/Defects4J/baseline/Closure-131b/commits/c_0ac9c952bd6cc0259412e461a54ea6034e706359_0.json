{"sha": "0ac9c952bd6cc0259412e461a54ea6034e706359", "log": "Fixes Issue 178  Incorrect line number reporting  When there are more than one comments for a statement, the comment node does not return the correct line number if using getLineno(). Now use getAbsolutePosition() to figure out the correct line number  R=acleung DELTA=52  (47 added, 1 deleted, 4 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=2099   ", "commit": "\n--- a/test/com/google/javascript/jscomp/parsing/IRFactoryTest.java\n+++ b/test/com/google/javascript/jscomp/parsing/IRFactoryTest.java\n     parse(\"debugger;\");\n   }\n \n-  public void testCommentPositions() {\n+  public void testCommentPositions1() {\n     Node root = newParse(\"/** @param {string} x */function a(x) {};\" +\n         \"/** @param {string} x */function b(x) {}\");\n     Node a = root.getFirstChild();\n     Node b = root.getLastChild();\n     assertMarkerPosition(a, 0, 4);\n     assertMarkerPosition(b, 0, 45);\n+  }\n+\n+  public void testCommentPositions2() {\n+    Node root = newParse(\n+        \"/* foo \\n\" +\n+        \"   bar \\n\" +\n+        \"*/\\n\" +\n+        \"/** @param {string} x */\\n\" +\n+        \"function a(x) {};\\n\" +\n+        \"\\n\" +\n+        \"/* bar \\n\" +\n+        \"   foo \\n\" +\n+        \"   foo */\\n\" +\n+        \"\\n\" +\n+        \"/**   @param {string} x */\\n\" +\n+        \"function b(x) {};\");\n+    assertMarkerPosition(root.getFirstChild(), 3, 4);\n+    assertMarkerPosition(root.getFirstChild().getNext().getNext(), 10, 6);\n   }\n \n    public void testLiteralLocation() {", "timestamp": 1306871867, "metainfo": ""}