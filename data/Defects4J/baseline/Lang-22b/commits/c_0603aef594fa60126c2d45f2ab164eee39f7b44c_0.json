{"sha": "0603aef594fa60126c2d45f2ab164eee39f7b44c", "log": "[LANG-587] avoid NPE in ClassUtils.toClass(Object[])  ", "commit": "\n--- a/src/main/java/org/apache/commons/lang3/ClassUtils.java\n+++ b/src/main/java/org/apache/commons/lang3/ClassUtils.java\n     }\n \n     /**\n-     * <p>Converts an array of <code>Object</code> in to an array of <code>Class</code> objects.</p>\n+     * <p>Converts an array of <code>Object</code> in to an array of <code>Class</code> objects.\n+     * If any of these objects is null, a null element will be inserted into the array.</p>\n      *\n      * <p>This method returns <code>null</code> for a <code>null</code> input array.</p>\n      *\n         }\n         Class<?>[] classes = new Class[array.length];\n         for (int i = 0; i < array.length; i++) {\n-            classes[i] = array[i].getClass();\n+            classes[i] = array[i] == null ? null : array[i].getClass();\n         }\n         return classes;\n     }\n--- a/src/test/java/org/apache/commons/lang3/ClassUtilsTest.java\n+++ b/src/test/java/org/apache/commons/lang3/ClassUtilsTest.java\n \n         assertTrue(Arrays.equals(new Class[] { String.class, Integer.class, Double.class },\n                 ClassUtils.toClass(new Object[] { \"Test\", 1, 99d })));\n+\n+        assertTrue(Arrays.equals(new Class[] { String.class, null, Double.class },\n+                ClassUtils.toClass(new Object[] { \"Test\", null, 99d })));\n     }\n \n     public void test_getShortCanonicalName_Object() {", "timestamp": 1265405498, "metainfo": ""}