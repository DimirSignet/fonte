{"sha": "f8560117a7955d701cac509f784eb396e4343b7f", "log": "Handle JDK1.2/JDK1.3 bug in String.indexOf   ", "commit": "\n--- a/src/java/org/apache/commons/lang/StringUtils.java\n+++ b/src/java/org/apache/commons/lang/StringUtils.java\n  * @author <a href=\"mailto:ggregory@seagullsw.com\">Gary Gregory</a>\n  * @author Phil Steitz\n  * @since 1.0\n- * @version $Id: StringUtils.java,v 1.79 2003/07/25 22:22:30 scolebourne Exp $\n+ * @version $Id: StringUtils.java,v 1.80 2003/07/26 14:34:49 scolebourne Exp $\n  */\n public class StringUtils {\n     // Performance testing notes (JDK 1.4, Jul03, scolebourne)\n      * StringUtils.indexOf(\"aabaabaa\", \"b\", 9)  = -1\n      * StringUtils.indexOf(\"aabaabaa\", \"b\", -1) = 2\n      * StringUtils.indexOf(\"aabaabaa\", \"\", 2)   = 2\n+     * StringUtils.indexOf(\"abc\", \"\", 9)        = 3\n      * </pre>\n      * \n      * @param str  the String to check, may be null\n     public static int indexOf(String str, String searchStr, int startPos) {\n         if (str == null || searchStr == null) {\n             return -1;\n+        }\n+        // JDK1.2/JDK1.3 have a bug, when startPos > str.length for \"\", hence\n+        if (searchStr.length() == 0 && startPos >= str.length()) {\n+            return str.length();\n         }\n         return str.indexOf(searchStr, startPos);\n     }", "timestamp": 1059230089, "metainfo": ""}