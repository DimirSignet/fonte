{"sha": "afabee81ee812ff71d8db5e429b0116f9f85d2fa", "log": "Deprecation warnings should never be errors. ------------- Created by MOE: http://code.google.com/p/moe-java MOE_MIGRATED_REVID=42860731", "commit": "\n--- a/src/com/google/javascript/jscomp/Compiler.java\n+++ b/src/com/google/javascript/jscomp/Compiler.java\n       }\n     }\n \n+    reconcileOptionsWithGuards();\n+\n+    // Initialize the warnings guard.\n+    List<WarningsGuard> guards = Lists.newArrayList();\n+    guards.add(\n+        new SuppressDocWarningsGuard(\n+            getDiagnosticGroups().getRegisteredGroups()));\n+    guards.add(options.getWarningsGuard());\n+\n+    this.warningsGuard = new ComposeWarningsGuard(guards);\n+  }\n+\n+  /**\n+   * When the CompilerOptions and its WarningsGuard overlap, reconcile\n+   * any discrepencies.\n+   */\n+  protected void reconcileOptionsWithGuards() {\n     // DiagnosticGroups override the plain checkTypes option.\n     if (options.enables(DiagnosticGroups.CHECK_TYPES)) {\n       options.checkTypes = true;\n           CheckLevel.ERROR);\n     }\n \n-    // Initialize the warnings guard.\n-    List<WarningsGuard> guards = Lists.newArrayList();\n-    guards.add(\n-        new SuppressDocWarningsGuard(\n-            getDiagnosticGroups().getRegisteredGroups()));\n-    guards.add(options.getWarningsGuard());\n-\n-    ComposeWarningsGuard composedGuards = new ComposeWarningsGuard(guards);\n-\n     // All passes must run the variable check. This synthesizes\n     // variables later so that the compiler doesn't crash. It also\n     // checks the externs file for validity. If you don't want to warn\n     // about missing variable declarations, we shut that specific\n     // error off.\n     if (!options.checkSymbols &&\n-        !composedGuards.enables(DiagnosticGroups.CHECK_VARIABLES)) {\n-      composedGuards.addGuard(new DiagnosticGroupWarningsGuard(\n-          DiagnosticGroups.CHECK_VARIABLES, CheckLevel.OFF));\n-    }\n-\n-    this.warningsGuard = composedGuards;\n+        !options.enables(DiagnosticGroups.CHECK_VARIABLES)) {\n+      options.setWarningLevel(\n+          DiagnosticGroups.CHECK_VARIABLES, CheckLevel.OFF);\n+    }\n   }\n \n   /**", "timestamp": 1361486409, "metainfo": ""}