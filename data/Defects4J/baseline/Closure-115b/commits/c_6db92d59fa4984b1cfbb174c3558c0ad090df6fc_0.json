{"sha": "6db92d59fa4984b1cfbb174c3558c0ad090df6fc", "log": "Clean old FunctionAnalysisResult nodes during hot swap.  R=nicksantos DELTA=10  (8 added, 2 deleted, 0 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=3367   ", "commit": "\n--- a/src/com/google/javascript/jscomp/TypedScopeCreator.java\n+++ b/src/com/google/javascript/jscomp/TypedScopeCreator.java\n     Preconditions.checkNotNull(globalScope);\n     Preconditions.checkState(globalScope.isGlobal());\n \n+    String scriptName = NodeUtil.getSourceName(scriptRoot);\n+    Preconditions.checkNotNull(scriptName);\n+    for (Node node : ImmutableList.copyOf(functionAnalysisResults.keySet())) {\n+      if (scriptName.equals(NodeUtil.getSourceName(node))) {\n+        functionAnalysisResults.remove(node);\n+      }\n+    }\n+\n     (new FirstOrderFunctionAnalyzer(\n         compiler, functionAnalysisResults)).process(null, scriptRoot);\n \n     // global scope generation but here we only wipe that part off!\n \n     // Remove all variables that were previously declared in this scripts.\n-    String scriptName = NodeUtil.getSourceName(scriptRoot);\n-    Preconditions.checkNotNull(scriptName);\n     // First find all vars to remove then remove them because of iterator!\n     Iterator<Var> varIter = globalScope.getVars();\n     List<Var> varsToRemove = Lists.newArrayList();", "timestamp": 1317317718, "metainfo": ""}