{"sha": "afc8fd66475d6ac122a5ab0891ba763c43a44cf3", "log": "handle fileoverviews in the symbol table  R=jschorr DELTA=91  (53 added, 19 deleted, 19 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=3329   ", "commit": "\n--- a/src/com/google/javascript/jscomp/parsing/IRFactory.java\n+++ b/src/com/google/javascript/jscomp/parsing/IRFactory.java\n     // Only after we've seen all @fileoverview entries, attach the\n     // last one to the root node, and copy the found license strings\n     // to that node.\n-    irNode.setJSDocInfo(rootNodeJsDocHolder.getJSDocInfo());\n+    JSDocInfo rootNodeJsDoc = rootNodeJsDocHolder.getJSDocInfo();\n+    if (rootNodeJsDoc != null) {\n+      irNode.setJSDocInfo(rootNodeJsDoc);\n+      rootNodeJsDoc.setAssociatedNode(irNode);\n+    }\n+\n     if (fileOverviewInfo != null) {\n       if ((irNode.getJSDocInfo() != null) &&\n           (irNode.getJSDocInfo().getLicense() != null)) {\n         fileOverviewInfo.setLicense(irNode.getJSDocInfo().getLicense());\n       }\n       irNode.setJSDocInfo(fileOverviewInfo);\n+      fileOverviewInfo.setAssociatedNode(irNode);\n     }\n   }\n \n--- a/src/com/google/javascript/rhino/JSDocInfo.java\n+++ b/src/com/google/javascript/rhino/JSDocInfo.java\n     return this.associatedNode;\n   }\n \n-  void setAssociatedNode(Node node) {\n+  /**\n+   * Sets the node associated with this JSDoc.\n+   * Notice that many nodes may have pointer to the same JSDocInfo\n+   * object (because we propagate it across the type graph). But there\n+   * is only one canonical \"owner\" node of the JSDocInfo, which corresponds\n+   * to its original place in the syntax tree.\n+   */\n+  public void setAssociatedNode(Node node) {\n     this.associatedNode = node;\n   }\n ", "timestamp": 1317053762, "metainfo": ""}