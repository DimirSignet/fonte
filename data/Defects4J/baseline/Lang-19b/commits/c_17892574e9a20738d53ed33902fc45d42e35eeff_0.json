{"sha": "17892574e9a20738d53ed33902fc45d42e35eeff", "log": "Added a CharSetUtils.keep method which is the reverse of the delete method. In part, it fulfills the StringUtils.getNumerics(String) method that Bug #13771 requests.   ", "commit": "\n--- a/src/java/org/apache/commons/lang/CharSetUtils.java\n+++ b/src/java/org/apache/commons/lang/CharSetUtils.java\n  * @author <a href=\"bayard@generationjava.com\">Henri Yandell</a>\n  * @author Stephen Colebourne\n  * @since 1.0\n- * @version $Id: CharSetUtils.java,v 1.8 2002/12/23 00:32:24 scolebourne Exp $\n+ * @version $Id: CharSetUtils.java,v 1.9 2003/03/23 05:50:51 bayard Exp $\n  */\n public class CharSetUtils {\n \n \n     /**\n      * <p>Takes an argument in set-syntax, see evaluateSet,\n+     * and keeps any of characters present in the specified string.</p>\n+     *\n+     * <p>An example would be:</p>\n+     * <ul>\n+     *   <li>keep(\"hello\", {\"c-fo\"}) returns \"hll\"\n+     * </ul>\n+     *\n+     * @param str  String target to keep characters from\n+     * @param set  String set of characters to keep\n+     */\n+    public static String keep(String str, String set) {\n+        String[] strs = new String[1];\n+        strs[0] = set;\n+        return keep(str, strs);\n+    }\n+    \n+    /**\n+     * <p>Takes an argument in set-syntax, see evaluateSet,\n+     * and keeps any of characters present in the specified string.</p>\n+     *\n+     * <p>An example would be:</p>\n+     * <ul>\n+     *  <li>keep(\"hello\", {\"c-f\",\"o\"}) returns \"hll\"\n+     * </ul>\n+     *\n+     * @param str  String target to keep characters from\n+     * @param set  String[] set of characters to keep\n+     * @throws NullPointerException of <code>str</code> is\n+     *  <code>null</code>\n+     */\n+    public static String keep(String str, String[] set) {\n+        return modify(str, set, true);\n+    }\n+\n+    /**\n+     * <p>Takes an argument in set-syntax, see evaluateSet,\n      * and deletes any of characters present in the specified string.</p>\n      *\n      * <p>An example would be:</p>\n      * <ul>\n-     *   <li>delete(\"hello\", {\"c-f\",\"o\"}) returns \"hll\"\n+     *   <li>delete(\"hello\", {\"c-fo\"}) returns \"hll\"\n      * </ul>\n      *\n      * @param str  String target to delete characters from\n      *  <code>null</code>\n      */\n     public static String delete(String str, String[] set) {\n+        return modify(str, set, false);\n+    }\n+\n+    // Implementation of delete and keep\n+    private static String modify(String str, String[] set, boolean expect) {\n         CharSet chars = evaluateSet(set);\n         StringBuffer buffer = new StringBuffer(str.length());\n         char[] chrs = str.toCharArray();\n         int sz = chrs.length;\n         for(int i=0; i<sz; i++) {\n-            if(!chars.contains(chrs[i])) {\n+            if(chars.contains(chrs[i]) == expect) {\n                 buffer.append(chrs[i]);\n             }\n         }\n--- a/src/test/org/apache/commons/lang/CharSetUtilsTest.java\n+++ b/src/test/org/apache/commons/lang/CharSetUtilsTest.java\n  *\n  * @author <a href=\"mailto:bayard@generationjava.com\">Henri Yandell</a>\n  * @author <a href=\"mailto:ridesmet@users.sourceforge.net\">Ringo De Smet</a>\n- * @version $Id: CharSetUtilsTest.java,v 1.5 2003/03/20 02:50:42 ggregory Exp $\n+ * @version $Id: CharSetUtilsTest.java,v 1.6 2003/03/23 05:50:51 bayard Exp $\n  */\n public class CharSetUtilsTest extends TestCase\n {\n                      0, CharSetUtils.count(\"hello\", new String[] {\"\"}));\n     }\n \n+    public void testKeep()\n+    {\n+        assertEquals(\"keep(String,String[]) failed\",\n+                     \"ell\", CharSetUtils.keep(\"hello\", new String[] {\"el\"}));\n+        assertEquals(\"keep(String,String[]) failed\",\n+                     \"hello\", CharSetUtils.keep(\"hello\", new String[] {\"elho\"}));\n+        assertEquals(\"keep(String,String[]) failed\",\n+                     \"\", CharSetUtils.keep(\"hello\", new String[] {\"\"}));\n+        assertEquals(\"keep(String,String[]) failed\",\n+                     \"hello\", CharSetUtils.keep(\"hello\", new String[] {\"a-z\"}));\n+        assertEquals(\"keep(String,String[]) failed\",\n+                     \"----\", CharSetUtils.keep(\"----\", new String[] {\"-\"}));\n+        assertEquals(\"keep(String,String[]) failed\",\n+                     \"ll\", CharSetUtils.keep(\"hello\", new String[] {\"l\"}));\n+    }\n+\n     public void testDelete()\n     {\n         assertEquals(\"delete(String,String[]) failed\",", "timestamp": 1048398651, "metainfo": ""}