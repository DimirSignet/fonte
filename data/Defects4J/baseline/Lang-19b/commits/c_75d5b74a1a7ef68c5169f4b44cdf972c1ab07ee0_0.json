{"sha": "75d5b74a1a7ef68c5169f4b44cdf972c1ab07ee0", "log": "Applying my fix to LANG-645, and Mikael's test case; fixing the FastDateFormat to properly include the locale when formatting a Date  ", "commit": "\n--- a/src/main/java/org/apache/commons/lang3/time/FastDateFormat.java\n+++ b/src/main/java/org/apache/commons/lang3/time/FastDateFormat.java\n      * @return the formatted string\n      */\n     public String format(Date date) {\n-        Calendar c = new GregorianCalendar(mTimeZone);\n+        Calendar c = new GregorianCalendar(mTimeZone, mLocale);\n         c.setTime(date);\n         return applyRules(c, new StringBuffer(mMaxLengthEstimate)).toString();\n     }\n--- a/src/test/java/org/apache/commons/lang3/time/FastDateFormatTest.java\n+++ b/src/test/java/org/apache/commons/lang3/time/FastDateFormatTest.java\n         FastDateFormat format = FastDateFormat.getInstance(\"yyyy-MM-dd'T'HH:mm:ss.SSS'Z'\", TimeZone.getTimeZone(\"GMT\"));\n         assertEquals(\"dateTime\", dateTime, format.format(cal));\n     }\n+\n+    public void testLang645() {\n+        Locale locale = new Locale(\"sv\", \"SE\");\n+\n+        Calendar cal = Calendar.getInstance();\n+        cal.set(2010, 0, 1, 12, 0, 0);\n+        Date d = cal.getTime();\n+\n+        FastDateFormat fdf = FastDateFormat.getInstance(\"EEEE', week 'ww\", locale);\n+\n+        assertEquals(\"fredag, week 53\", fdf.format(d));\n+    }\n }", "timestamp": 1283926197, "metainfo": ""}