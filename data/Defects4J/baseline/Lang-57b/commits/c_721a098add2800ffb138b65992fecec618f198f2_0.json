{"sha": "721a098add2800ffb138b65992fecec618f198f2", "log": "ToStringStyle setArrayEnd handled null incorrectly bug 31933, fix from Masato Tezuka   ", "commit": "\n--- a/src/java/org/apache/commons/lang/builder/ToStringStyle.java\n+++ b/src/java/org/apache/commons/lang/builder/ToStringStyle.java\n  * @author Stephen Colebourne\n  * @author Gary Gregory\n  * @author Pete Gieser\n+ * @author Masato Tezuka\n  * @since 1.0\n- * @version $Id: ToStringStyle.java,v 1.35 2004/10/16 18:20:46 scolebourne Exp $\n+ * @version $Id: ToStringStyle.java,v 1.36 2004/12/28 23:13:03 scolebourne Exp $\n  */\n public abstract class ToStringStyle implements Serializable {\n \n      * @param arrayEnd  the new array end text\n      */\n     protected void setArrayEnd(String arrayEnd) {\n-        if (arrayStart == null) {\n-            arrayStart = \"\";\n+        if (arrayEnd == null) {\n+            arrayEnd = \"\";\n         }\n         this.arrayEnd = arrayEnd;\n     }\n--- a/src/test/org/apache/commons/lang/builder/BuilderTestSuite.java\n+++ b/src/test/org/apache/commons/lang/builder/BuilderTestSuite.java\n /**\n  * Test suite for the Lang Builder package.\n  *\n- * @author <a href=\"mailto:scolebourne@joda.org\">Stephen Colebourne</a>\n- * @version $Id: BuilderTestSuite.java,v 1.7 2004/02/18 23:00:51 ggregory Exp $\n+ * @author Stephen Colebourne\n+ * @version $Id: BuilderTestSuite.java,v 1.8 2004/12/28 23:13:03 scolebourne Exp $\n  */\n public class BuilderTestSuite extends TestCase {\n     \n         suite.addTest(MultiLineToStringStyleTest.suite());\n         suite.addTest(SimpleToStringStyleTest.suite());\n         suite.addTest(StandardToStringStyleTest.suite());\n+        suite.addTest(ToStringStyleTest.suite());\n         return suite;\n     }\n }\n--- /dev/null\n+++ b/src/test/org/apache/commons/lang/builder/ToStringStyleTest.java\n+/*\n+ * Copyright 2004 The Apache Software Foundation.\n+ * \n+ * Licensed under the Apache License, Version 2.0 (the \"License\");\n+ * you may not use this file except in compliance with the License.\n+ * You may obtain a copy of the License at\n+ * \n+ *      http://www.apache.org/licenses/LICENSE-2.0\n+ * \n+ * Unless required by applicable law or agreed to in writing, software\n+ * distributed under the License is distributed on an \"AS IS\" BASIS,\n+ * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.\n+ * See the License for the specific language governing permissions and\n+ * limitations under the License.\n+ */\n+package org.apache.commons.lang.builder;\n+\n+import junit.framework.Test;\n+import junit.framework.TestCase;\n+import junit.framework.TestSuite;\n+import junit.textui.TestRunner;\n+\n+/**\n+ * Test case for ToStringStyle.\n+ * \n+ * @author Masato Tezuka\n+ * @version $Id: ToStringStyleTest.java,v 1.1 2004/12/28 23:13:03 scolebourne Exp $\n+ */\n+public class ToStringStyleTest extends TestCase {\n+\n+    public ToStringStyleTest(String name) {\n+        super(name);\n+    }\n+\n+    public static void main(String[] args) {\n+        TestRunner.run(suite());\n+    }\n+\n+    public static Test suite() {\n+        TestSuite suite = new TestSuite(ToStringStyleTest.class);\n+        suite.setName(\"ToStringStyle Tests\");\n+        return suite;\n+    }\n+\n+    protected void setUp() throws Exception {\n+        super.setUp();\n+    }\n+\n+    private static class ToStringStyleImpl extends ToStringStyle {\n+    }\n+\n+    //-----------------------------------------------------------------------\n+    public void testSetArrayStart() {\n+        ToStringStyle style = new ToStringStyleImpl();\n+        style.setArrayStart(null);\n+        assertEquals(\"\", style.getArrayStart());\n+    }\n+\n+    public void testSetArrayEnd() {\n+        ToStringStyle style = new ToStringStyleImpl();\n+        style.setArrayEnd(null);\n+        assertEquals(\"\", style.getArrayEnd());\n+    }\n+\n+    public void testSetArraySeparator() {\n+        ToStringStyle style = new ToStringStyleImpl();\n+        style.setArraySeparator(null);\n+        assertEquals(\"\", style.getArraySeparator());\n+    }\n+\n+    public void testSetContentStart() {\n+        ToStringStyle style = new ToStringStyleImpl();\n+        style.setContentStart(null);\n+        assertEquals(\"\", style.getContentStart());\n+    }\n+\n+    public void testSetContentEnd() {\n+        ToStringStyle style = new ToStringStyleImpl();\n+        style.setContentEnd(null);\n+        assertEquals(\"\", style.getContentEnd());\n+    }\n+\n+    public void testSetFieldNameValueSeparator() {\n+        ToStringStyle style = new ToStringStyleImpl();\n+        style.setFieldNameValueSeparator(null);\n+        assertEquals(\"\", style.getFieldNameValueSeparator());\n+    }\n+\n+    public void testSetFieldSeparator() {\n+        ToStringStyle style = new ToStringStyleImpl();\n+        style.setFieldSeparator(null);\n+        assertEquals(\"\", style.getFieldSeparator());\n+    }\n+\n+    public void testSetNullText() {\n+        ToStringStyle style = new ToStringStyleImpl();\n+        style.setNullText(null);\n+        assertEquals(\"\", style.getNullText());\n+    }\n+\n+    public void testSetSizeStartText() {\n+        ToStringStyle style = new ToStringStyleImpl();\n+        style.setSizeStartText(null);\n+        assertEquals(\"\", style.getSizeStartText());\n+    }\n+\n+    public void testSetSizeEndText() {\n+        ToStringStyle style = new ToStringStyleImpl();\n+        style.setSizeEndText(null);\n+        assertEquals(\"\", style.getSizeEndText());\n+    }\n+\n+    public void testSetSummaryObjectStartText() {\n+        ToStringStyle style = new ToStringStyleImpl();\n+        style.setSummaryObjectStartText(null);\n+        assertEquals(\"\", style.getSummaryObjectStartText());\n+    }\n+\n+    public void testSetSummaryObjectEndText() {\n+        ToStringStyle style = new ToStringStyleImpl();\n+        style.setSummaryObjectEndText(null);\n+        assertEquals(\"\", style.getSummaryObjectEndText());\n+    }\n+\n+}", "timestamp": 1104275583, "metainfo": ""}