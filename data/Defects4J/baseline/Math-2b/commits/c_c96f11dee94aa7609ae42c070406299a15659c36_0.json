{"sha": "c96f11dee94aa7609ae42c070406299a15659c36", "log": "MATH-1020. Fixed \"nextPermutation\" in \"RandomDataGenerator\". Bug showed up when using a fixed version of \"shuffle\" (MATH-1019) added in \"MathArrays\" (MATH-1010). Added overloaded \"shuffle\" method (used in the above fix).   ", "commit": "\n--- a/src/main/java/org/apache/commons/math3/random/RandomDataGenerator.java\n+++ b/src/main/java/org/apache/commons/math3/random/RandomDataGenerator.java\n import org.apache.commons.math3.exception.NumberIsTooLargeException;\n import org.apache.commons.math3.exception.OutOfRangeException;\n import org.apache.commons.math3.exception.util.LocalizedFormats;\n+import org.apache.commons.math3.util.MathArrays;\n \n /**\n  * Implements the {@link RandomData} interface using a {@link RandomGenerator}\n         }\n \n         int[] index = getNatural(n);\n-        shuffle(index, n - k);\n-        int[] result = new int[k];\n-        for (int i = 0; i < k; i++) {\n-            result[i] = index[n - i - 1];\n-        }\n-\n-        return result;\n+        MathArrays.shuffle(index, getRandomGenerator());\n+\n+        // Return a new array containing the first \"k\" entries of \"index\".\n+        return MathArrays.copyOf(index, k);\n     }\n \n     /**\n--- a/src/main/java/org/apache/commons/math3/util/MathArrays.java\n+++ b/src/main/java/org/apache/commons/math3/util/MathArrays.java\n             throw new MathInternalError(); // Should never happen.\n         }\n     }\n+\n+    /**\n+     * Shuffle the entries of the given array.\n+     *\n+     * @param list Array whose entries will be shuffled (in-place).\n+     * @param rng Random number generator.\n+     */\n+    public static void shuffle(int[] list,\n+                               RandomGenerator rng) {\n+        shuffle(list, 0, Position.TAIL, rng);\n+    }\n+\n+    /**\n+     * Shuffle the entries of the given array.\n+     *\n+     * @param list Array whose entries will be shuffled (in-place).\n+     */\n+    public static void shuffle(int[] list) {\n+        shuffle(list, new Well19937c());\n+    }\n }", "timestamp": 1376056549, "metainfo": ""}