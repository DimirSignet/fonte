{"sha": "3c77775a0fdc5385a48eea5e5b07187f7681f834", "log": "Skip native function static properties.  getInstance in goog.addSingletonGetter was getting disambiguated when it shouldn't.  R=johnlenz DELTA=20  (20 added, 0 deleted, 0 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=55   ", "commit": "\n--- a/src/com/google/javascript/jscomp/DisambiguateProperties.java\n+++ b/src/com/google/javascript/jscomp/DisambiguateProperties.java\n           registry.getNativeType(JSTypeNative.NO_OBJECT_TYPE),\n           registry.getNativeType(JSTypeNative.NO_TYPE),\n           registry.getNativeType(JSTypeNative.FUNCTION_PROTOTYPE),\n+          registry.getNativeType(JSTypeNative.FUNCTION_INSTANCE_TYPE),\n           registry.getNativeType(JSTypeNative.OBJECT_PROTOTYPE),\n           registry.getNativeType(JSTypeNative.TOP_LEVEL_PROTOTYPE),\n           registry.getNativeType(JSTypeNative.UNKNOWN_TYPE));\n--- a/test/com/google/javascript/jscomp/DisambiguatePropertiesTest.java\n+++ b/test/com/google/javascript/jscomp/DisambiguatePropertiesTest.java\n     testSets(false, externs, js, js, \"{}\");\n   }\n \n+  public void testSkipNativeFunctionStaticProperty() {\n+    String js = \"\"\n+      + \"/** @param {!Function} ctor */\\n\"\n+      + \"function addSingletonGetter(ctor) { ctor.a; }\\n\"\n+      + \"/** @constructor */ function Foo() {}\\n\"\n+      + \"Foo.a = 0;\"\n+      + \"/** @constructor */ function Bar() {}\\n\"\n+      + \"Bar.a = 0;\";\n+\n+    String output = \"\"\n+        + \"function addSingletonGetter(ctor){ctor.a}\"\n+        + \"function Foo(){}\"\n+        + \"Foo.a=0;\"\n+        + \"function Bar(){}\"\n+        + \"Bar.a=0\";\n+\n+    testSets(false, js, output, \"{}\");\n+  }\n+\n   public void runFindHighestTypeInChain() {\n     // Check that this doesn't go into an infinite loop.\n     DisambiguateProperties.forJSTypeSystem(new Compiler())", "timestamp": 1291407767, "metainfo": ""}