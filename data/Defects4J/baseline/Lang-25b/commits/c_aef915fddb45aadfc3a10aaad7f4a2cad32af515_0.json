{"sha": "aef915fddb45aadfc3a10aaad7f4a2cad32af515", "log": "reread ThreadLocal value in synchronized block to avoid any timing issues  ", "commit": "\n--- a/src/main/java/org/apache/commons/lang3/builder/HashCodeBuilder.java\n+++ b/src/main/java/org/apache/commons/lang3/builder/HashCodeBuilder.java\n      * @since 2.3\n      */\n     static void unregister(Object value) {\n-        Set<IDKey> s = getRegistry();\n-        if (s != null) {\n-            s.remove(new IDKey(value));\n+        Set<IDKey> registry = getRegistry();\n+        if (registry != null) {\n+            registry.remove(new IDKey(value));\n             synchronized (HashCodeBuilder.class) {\n-                if (s.isEmpty()) {\n+                //read again\n+                registry = getRegistry();\n+                if (registry != null && registry.isEmpty()) {\n                     REGISTRY.remove();\n                 }\n             }", "timestamp": 1265514128, "metainfo": ""}