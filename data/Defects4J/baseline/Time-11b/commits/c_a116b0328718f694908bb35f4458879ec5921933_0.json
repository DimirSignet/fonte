{"sha": "a116b0328718f694908bb35f4458879ec5921933", "log": "More tests   ", "commit": "\n--- /dev/null\n+++ b/JodaTime/src/test/org/joda/time/MockNullZoneChronology.java\n+/*\n+ * Joda Software License, Version 1.0\n+ *\n+ *\n+ * Copyright (c) 2001-2004 Stephen Colebourne.  \n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions\n+ * are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright\n+ *    notice, this list of conditions and the following disclaimer. \n+ *\n+ * 2. Redistributions in binary form must reproduce the above copyright\n+ *    notice, this list of conditions and the following disclaimer in\n+ *    the documentation and/or other materials provided with the\n+ *    distribution.\n+ *\n+ * 3. The end-user documentation included with the redistribution,\n+ *    if any, must include the following acknowledgment:  \n+ *       \"This product includes software developed by the\n+ *        Joda project (http://www.joda.org/).\"\n+ *    Alternately, this acknowledgment may appear in the software itself,\n+ *    if and wherever such third-party acknowledgments normally appear.\n+ *\n+ * 4. The name \"Joda\" must not be used to endorse or promote products\n+ *    derived from this software without prior written permission. For\n+ *    written permission, please contact licence@joda.org.\n+ *\n+ * 5. Products derived from this software may not be called \"Joda\",\n+ *    nor may \"Joda\" appear in their name, without prior written\n+ *    permission of the Joda project.\n+ *\n+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED\n+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES\n+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED.  IN NO EVENT SHALL THE JODA AUTHORS OR THE PROJECT\n+ * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF\n+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT\n+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF\n+ * SUCH DAMAGE.\n+ * ====================================================================\n+ *\n+ * This software consists of voluntary contributions made by many\n+ * individuals on behalf of the Joda project and was originally \n+ * created by Stephen Colebourne <scolebourne@joda.org>. For more\n+ * information on the Joda project, please see <http://www.joda.org/>.\n+ */\n+package org.joda.time;\n+\n+import org.joda.time.chrono.AbstractChronology;\n+import org.joda.time.chrono.ISOChronology;\n+\n+/**\n+ * Mock class for unit testing.\n+ * \n+ * @author Stephen Colebourne\n+ */\n+class MockNullZoneChronology extends AbstractChronology {\n+\n+    public DateTimeZone getZone() {\n+        return null;\n+    }\n+    public Chronology withUTC() {\n+        return this;\n+    }\n+    public Chronology withZone(DateTimeZone zone) {\n+        return this;\n+    }\n+    public DateTimeField dayOfMonth() {  // for DateMidnight test\n+        return ISOChronology.getInstance().dayOfMonth();\n+    }\n+    public String toString() {\n+        return \"\";\n+    }\n+\n+}\n--- a/JodaTime/src/test/org/joda/time/TestAll.java\n+++ b/JodaTime/src/test/org/joda/time/TestAll.java\n         \n         suite.addTest(TestDateMidnight_Constructors.suite());\n         suite.addTest(TestDateMidnight_Basics.suite());\n+        suite.addTest(TestDateMidnight_Properties.suite());\n         \n         suite.addTest(TestDateTimeComparator.suite());\n         suite.addTest(TestDateTimeConstants.suite());\n--- a/JodaTime/src/test/org/joda/time/TestDateMidnight_Basics.java\n+++ b/JodaTime/src/test/org/joda/time/TestDateMidnight_Basics.java\n         assertEquals(TEST_TIME1_PARIS, test.getMillis());\n         assertEquals(TEST_TIME1_LONDON, result.getMillis());\n         assertEquals(GregorianChronology.getInstance(), result.getChronology());\n+        \n+        test = new DateMidnight(TEST_TIME1_UTC);\n+        result = test.withZoneRetainFields(LONDON);\n+        assertSame(test, result);\n+        \n+        test = new DateMidnight(TEST_TIME1_UTC);\n+        result = test.withZoneRetainFields(null);\n+        assertSame(test, result);\n+        \n+        test = new DateMidnight(TEST_TIME1_UTC, new MockNullZoneChronology());\n+        result = test.withZoneRetainFields(LONDON);\n+        assertSame(test, result);\n     }\n     \n     public void testImmutable() {\n--- /dev/null\n+++ b/JodaTime/src/test/org/joda/time/TestDateMidnight_Properties.java\n+/*\n+ * Joda Software License, Version 1.0\n+ *\n+ *\n+ * Copyright (c) 2001-2004 Stephen Colebourne.  \n+ * All rights reserved.\n+ *\n+ * Redistribution and use in source and binary forms, with or without\n+ * modification, are permitted provided that the following conditions\n+ * are met:\n+ *\n+ * 1. Redistributions of source code must retain the above copyright\n+ *    notice, this list of conditions and the following disclaimer. \n+ *\n+ * 2. Redistributions in binary form must reproduce the above copyright\n+ *    notice, this list of conditions and the following disclaimer in\n+ *    the documentation and/or other materials provided with the\n+ *    distribution.\n+ *\n+ * 3. The end-user documentation included with the redistribution,\n+ *    if any, must include the following acknowledgment:  \n+ *       \"This product includes software developed by the\n+ *        Joda project (http://www.joda.org/).\"\n+ *    Alternately, this acknowledgment may appear in the software itself,\n+ *    if and wherever such third-party acknowledgments normally appear.\n+ *\n+ * 4. The name \"Joda\" must not be used to endorse or promote products\n+ *    derived from this software without prior written permission. For\n+ *    written permission, please contact licence@joda.org.\n+ *\n+ * 5. Products derived from this software may not be called \"Joda\",\n+ *    nor may \"Joda\" appear in their name, without prior written\n+ *    permission of the Joda project.\n+ *\n+ * THIS SOFTWARE IS PROVIDED ``AS IS'' AND ANY EXPRESSED OR IMPLIED\n+ * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES\n+ * OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE\n+ * DISCLAIMED.  IN NO EVENT SHALL THE JODA AUTHORS OR THE PROJECT\n+ * CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n+ * SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n+ * LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF\n+ * USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND\n+ * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY,\n+ * OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT\n+ * OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF\n+ * SUCH DAMAGE.\n+ * ====================================================================\n+ *\n+ * This software consists of voluntary contributions made by many\n+ * individuals on behalf of the Joda project and was originally \n+ * created by Stephen Colebourne <scolebourne@joda.org>. For more\n+ * information on the Joda project, please see <http://www.joda.org/>.\n+ */\n+package org.joda.time;\n+\n+import java.util.Locale;\n+\n+import junit.framework.TestCase;\n+import junit.framework.TestSuite;\n+\n+/**\n+ * This class is a Junit unit test for DateTime.\n+ *\n+ * @author Stephen Colebourne\n+ */\n+public class TestDateMidnight_Properties extends TestCase {\n+    // Test in 2002/03 as time zones are more well known\n+    // (before the late 90's they were all over the place)\n+\n+    private static final DateTimeZone PARIS = DateTimeZone.getInstance(\"Europe/Paris\");\n+    private static final DateTimeZone LONDON = DateTimeZone.getInstance(\"Europe/London\");\n+    \n+    long y2002days = 365 + 365 + 366 + 365 + 365 + 365 + 366 + 365 + 365 + 365 + \n+                     366 + 365 + 365 + 365 + 366 + 365 + 365 + 365 + 366 + 365 + \n+                     365 + 365 + 366 + 365 + 365 + 365 + 366 + 365 + 365 + 365 +\n+                     366 + 365;\n+    long y2003days = 365 + 365 + 366 + 365 + 365 + 365 + 366 + 365 + 365 + 365 + \n+                     366 + 365 + 365 + 365 + 366 + 365 + 365 + 365 + 366 + 365 + \n+                     365 + 365 + 366 + 365 + 365 + 365 + 366 + 365 + 365 + 365 +\n+                     366 + 365 + 365;\n+    \n+    // 2002-06-09\n+    private long TEST_TIME_NOW =\n+            (y2002days + 31L + 28L + 31L + 30L + 31L + 9L -1L) * DateTimeConstants.MILLIS_PER_DAY;\n+            \n+    // 2002-04-05 Fri\n+    private long TEST_TIME1 =\n+            (y2002days + 31L + 28L + 31L + 5L -1L) * DateTimeConstants.MILLIS_PER_DAY\n+            + 12L * DateTimeConstants.MILLIS_PER_HOUR\n+            + 24L * DateTimeConstants.MILLIS_PER_MINUTE;\n+        \n+    // 2003-05-06 Tue\n+    private long TEST_TIME2 =\n+            (y2003days + 31L + 28L + 31L + 30L + 6L -1L) * DateTimeConstants.MILLIS_PER_DAY\n+            + 14L * DateTimeConstants.MILLIS_PER_HOUR\n+            + 28L * DateTimeConstants.MILLIS_PER_MINUTE;\n+        \n+    private DateTimeZone zone = null;\n+    private Locale locale = null;\n+\n+    public static void main(String[] args) {\n+        junit.textui.TestRunner.run(suite());\n+    }\n+\n+    public static TestSuite suite() {\n+        return new TestSuite(TestDateMidnight_Properties.class);\n+    }\n+\n+    public TestDateMidnight_Properties(String name) {\n+        super(name);\n+    }\n+\n+    protected void setUp() throws Exception {\n+        DateTimeUtils.setCurrentMillisFixed(TEST_TIME_NOW);\n+        zone = DateTimeZone.getDefault();\n+        locale = Locale.getDefault();\n+        DateTimeZone.setDefault(LONDON);\n+        Locale.setDefault(Locale.UK);\n+    }\n+\n+    protected void tearDown() throws Exception {\n+        DateTimeUtils.setCurrentMillisSystem();\n+        DateTimeZone.setDefault(zone);\n+        Locale.setDefault(locale);\n+        zone = null;\n+    }\n+\n+    //-----------------------------------------------------------------------\n+    public void testTest() {\n+        assertEquals(\"2002-06-09T00:00:00.000Z\", new Instant(TEST_TIME_NOW).toString());\n+        assertEquals(\"2002-04-05T12:24:00.000Z\", new Instant(TEST_TIME1).toString());\n+        assertEquals(\"2003-05-06T14:28:00.000Z\", new Instant(TEST_TIME2).toString());\n+    }\n+\n+    //-----------------------------------------------------------------------\n+    public void testPropertyGetEra() {\n+        DateMidnight test = new DateMidnight(2004, 6, 9);\n+        assertSame(test.getChronology().era(), test.era().getField());\n+        assertEquals(\"era\", test.era().getName());\n+        assertEquals(\"Property[era]\", test.era().toString());\n+        assertSame(test, test.era().getReadableInstant());\n+        assertSame(test, test.era().getDateMidnight());\n+        assertEquals(1, test.era().get());\n+        assertEquals(\"AD\", test.era().getAsText());\n+        assertEquals(\"ap. J.-C.\", test.era().getAsText(Locale.FRENCH));\n+        assertEquals(\"AD\", test.era().getAsShortText());\n+        assertEquals(\"ap. J.-C.\", test.era().getAsShortText(Locale.FRENCH));\n+        assertEquals(test.getChronology().eras(), test.era().getDurationField());\n+        assertEquals(null, test.era().getRangeDurationField());\n+        assertEquals(2, test.era().getMaximumTextLength(null));\n+        assertEquals(9, test.era().getMaximumTextLength(Locale.FRENCH));\n+        assertEquals(2, test.era().getMaximumShortTextLength(null));\n+        assertEquals(9, test.era().getMaximumShortTextLength(Locale.FRENCH));\n+    }\n+\n+    //-----------------------------------------------------------------------\n+    public void testPropertyGetYearOfEra() {\n+        DateMidnight test = new DateMidnight(2004, 6, 9);\n+        assertSame(test.getChronology().yearOfEra(), test.yearOfEra().getField());\n+        assertEquals(\"yearOfEra\", test.yearOfEra().getName());\n+        assertEquals(\"Property[yearOfEra]\", test.yearOfEra().toString());\n+        assertSame(test, test.yearOfEra().getReadableInstant());\n+        assertSame(test, test.yearOfEra().getDateMidnight());\n+        assertEquals(2004, test.yearOfEra().get());\n+        assertEquals(\"2004\", test.yearOfEra().getAsText());\n+        assertEquals(\"2004\", test.yearOfEra().getAsText(Locale.FRENCH));\n+        assertEquals(\"2004\", test.yearOfEra().getAsShortText());\n+        assertEquals(\"2004\", test.yearOfEra().getAsShortText(Locale.FRENCH));\n+        assertEquals(test.getChronology().years(), test.yearOfEra().getDurationField());\n+        assertEquals(null, test.yearOfEra().getRangeDurationField());\n+        assertEquals(9, test.yearOfEra().getMaximumTextLength(null));\n+        assertEquals(9, test.yearOfEra().getMaximumShortTextLength(null));\n+    }\n+\n+    //-----------------------------------------------------------------------\n+    public void testPropertyGetCenturyOfEra() {\n+        DateMidnight test = new DateMidnight(2004, 6, 9);\n+        assertSame(test.getChronology().centuryOfEra(), test.centuryOfEra().getField());\n+        assertEquals(\"centuryOfEra\", test.centuryOfEra().getName());\n+        assertEquals(\"Property[centuryOfEra]\", test.centuryOfEra().toString());\n+        assertSame(test, test.centuryOfEra().getReadableInstant());\n+        assertSame(test, test.centuryOfEra().getDateMidnight());\n+        assertEquals(20, test.centuryOfEra().get());\n+        assertEquals(\"20\", test.centuryOfEra().getAsText());\n+        assertEquals(\"20\", test.centuryOfEra().getAsText(Locale.FRENCH));\n+        assertEquals(\"20\", test.centuryOfEra().getAsShortText());\n+        assertEquals(\"20\", test.centuryOfEra().getAsShortText(Locale.FRENCH));\n+        assertEquals(test.getChronology().centuries(), test.centuryOfEra().getDurationField());\n+        assertEquals(null, test.centuryOfEra().getRangeDurationField());\n+        assertEquals(7, test.centuryOfEra().getMaximumTextLength(null));\n+        assertEquals(7, test.centuryOfEra().getMaximumShortTextLength(null));\n+    }\n+\n+    //-----------------------------------------------------------------------\n+    public void testPropertyGetYearOfCentury() {\n+        DateMidnight test = new DateMidnight(2004, 6, 9);\n+        assertSame(test.getChronology().yearOfCentury(), test.yearOfCentury().getField());\n+        assertEquals(\"yearOfCentury\", test.yearOfCentury().getName());\n+        assertEquals(\"Property[yearOfCentury]\", test.yearOfCentury().toString());\n+        assertSame(test, test.yearOfCentury().getReadableInstant());\n+        assertSame(test, test.yearOfCentury().getDateMidnight());\n+        assertEquals(4, test.yearOfCentury().get());\n+        assertEquals(\"4\", test.yearOfCentury().getAsText());\n+        assertEquals(\"4\", test.yearOfCentury().getAsText(Locale.FRENCH));\n+        assertEquals(\"4\", test.yearOfCentury().getAsShortText());\n+        assertEquals(\"4\", test.yearOfCentury().getAsShortText(Locale.FRENCH));\n+        assertEquals(test.getChronology().years(), test.yearOfCentury().getDurationField());\n+        assertEquals(test.getChronology().centuries(), test.yearOfCentury().getRangeDurationField());\n+        assertEquals(2, test.yearOfCentury().getMaximumTextLength(null));\n+        assertEquals(2, test.yearOfCentury().getMaximumShortTextLength(null));\n+    }\n+\n+    //-----------------------------------------------------------------------\n+    public void testPropertyGetWeekyear() {\n+        DateMidnight test = new DateMidnight(2004, 6, 9);\n+        assertSame(test.getChronology().weekyear(), test.weekyear().getField());\n+        assertEquals(\"weekyear\", test.weekyear().getName());\n+        assertEquals(\"Property[weekyear]\", test.weekyear().toString());\n+        assertSame(test, test.weekyear().getReadableInstant());\n+        assertSame(test, test.weekyear().getDateMidnight());\n+        assertEquals(2004, test.weekyear().get());\n+        assertEquals(\"2004\", test.weekyear().getAsText());\n+        assertEquals(\"2004\", test.weekyear().getAsText(Locale.FRENCH));\n+        assertEquals(\"2004\", test.weekyear().getAsShortText());\n+        assertEquals(\"2004\", test.weekyear().getAsShortText(Locale.FRENCH));\n+        assertEquals(test.getChronology().weekyears(), test.weekyear().getDurationField());\n+        assertEquals(null, test.weekyear().getRangeDurationField());\n+        assertEquals(9, test.weekyear().getMaximumTextLength(null));\n+        assertEquals(9, test.weekyear().getMaximumShortTextLength(null));\n+    }\n+\n+    //-----------------------------------------------------------------------\n+    public void testPropertyGetYear() {\n+        DateMidnight test = new DateMidnight(2004, 6, 9);\n+        assertSame(test.getChronology().year(), test.year().getField());\n+        assertEquals(\"year\", test.year().getName());\n+        assertEquals(\"Property[year]\", test.year().toString());\n+        assertSame(test, test.year().getReadableInstant());\n+        assertSame(test, test.year().getDateMidnight());\n+        assertEquals(2004, test.year().get());\n+        assertEquals(\"2004\", test.year().getAsText());\n+        assertEquals(\"2004\", test.year().getAsText(Locale.FRENCH));\n+        assertEquals(\"2004\", test.year().getAsShortText());\n+        assertEquals(\"2004\", test.year().getAsShortText(Locale.FRENCH));\n+        assertEquals(test.getChronology().years(), test.year().getDurationField());\n+        assertEquals(null, test.year().getRangeDurationField());\n+        assertEquals(9, test.year().getMaximumTextLength(null));\n+        assertEquals(9, test.year().getMaximumShortTextLength(null));\n+        assertEquals(-292275054, test.year().getMinimumValue());\n+        assertEquals(-292275054, test.year().getMinimumValueOverall());\n+        assertEquals(292277023, test.year().getMaximumValue());\n+        assertEquals(292277023, test.year().getMaximumValueOverall());\n+    }\n+\n+    //-----------------------------------------------------------------------\n+    public void testPropertyGetMonthOfYear() {\n+        DateMidnight test = new DateMidnight(2004, 6, 9);\n+        assertSame(test.getChronology().monthOfYear(), test.monthOfYear().getField());\n+        assertEquals(\"monthOfYear\", test.monthOfYear().getName());\n+        assertEquals(\"Property[monthOfYear]\", test.monthOfYear().toString());\n+        assertSame(test, test.monthOfYear().getReadableInstant());\n+        assertSame(test, test.monthOfYear().getDateMidnight());\n+        assertEquals(6, test.monthOfYear().get());\n+        assertEquals(\"June\", test.monthOfYear().getAsText());\n+        assertEquals(\"juin\", test.monthOfYear().getAsText(Locale.FRENCH));\n+        assertEquals(\"Jun\", test.monthOfYear().getAsShortText());\n+        assertEquals(\"juin\", test.monthOfYear().getAsShortText(Locale.FRENCH));\n+        assertEquals(test.getChronology().months(), test.monthOfYear().getDurationField());\n+        assertEquals(test.getChronology().years(), test.monthOfYear().getRangeDurationField());\n+        assertEquals(9, test.monthOfYear().getMaximumTextLength(null));\n+        assertEquals(3, test.monthOfYear().getMaximumShortTextLength(null));\n+        test = new DateMidnight(2004, 7, 9);\n+        assertEquals(\"juillet\", test.monthOfYear().getAsText(Locale.FRENCH));\n+        assertEquals(\"juil.\", test.monthOfYear().getAsShortText(Locale.FRENCH));\n+        assertEquals(1, test.monthOfYear().getMinimumValue());\n+        assertEquals(1, test.monthOfYear().getMinimumValueOverall());\n+        assertEquals(12, test.monthOfYear().getMaximumValue());\n+        assertEquals(12, test.monthOfYear().getMaximumValueOverall());\n+        assertEquals(1, test.monthOfYear().getMinimumValue());\n+        assertEquals(1, test.monthOfYear().getMinimumValueOverall());\n+        assertEquals(12, test.monthOfYear().getMaximumValue());\n+        assertEquals(12, test.monthOfYear().getMaximumValueOverall());\n+    }\n+\n+    //-----------------------------------------------------------------------\n+    public void testPropertyGetDayOfMonth() {\n+        DateMidnight test = new DateMidnight(2004, 6, 9);\n+        assertSame(test.getChronology().dayOfMonth(), test.dayOfMonth().getField());\n+        assertEquals(\"dayOfMonth\", test.dayOfMonth().getName());\n+        assertEquals(\"Property[dayOfMonth]\", test.dayOfMonth().toString());\n+        assertSame(test, test.dayOfMonth().getReadableInstant());\n+        assertSame(test, test.dayOfMonth().getDateMidnight());\n+        assertEquals(9, test.dayOfMonth().get());\n+        assertEquals(\"9\", test.dayOfMonth().getAsText());\n+        assertEquals(\"9\", test.dayOfMonth().getAsText(Locale.FRENCH));\n+        assertEquals(\"9\", test.dayOfMonth().getAsShortText());\n+        assertEquals(\"9\", test.dayOfMonth().getAsShortText(Locale.FRENCH));\n+        assertEquals(test.getChronology().days(), test.dayOfMonth().getDurationField());\n+        assertEquals(test.getChronology().months(), test.dayOfMonth().getRangeDurationField());\n+        assertEquals(2, test.dayOfMonth().getMaximumTextLength(null));\n+        assertEquals(2, test.dayOfMonth().getMaximumShortTextLength(null));\n+        assertEquals(1, test.dayOfMonth().getMinimumValue());\n+        assertEquals(1, test.dayOfMonth().getMinimumValueOverall());\n+        assertEquals(30, test.dayOfMonth().getMaximumValue());\n+        assertEquals(31, test.dayOfMonth().getMaximumValueOverall());\n+        assertEquals(false, test.dayOfMonth().isLeap());\n+        assertEquals(0, test.dayOfMonth().getLeapAmount());\n+        assertEquals(null, test.dayOfMonth().getLeapDurationField());\n+    }\n+\n+    //-----------------------------------------------------------------------\n+    public void testPropertyGetDayOfYear() {\n+        // 31+29+31+30+31+9 = 161\n+        DateMidnight test = new DateMidnight(2004, 6, 9);\n+        assertSame(test.getChronology().dayOfYear(), test.dayOfYear().getField());\n+        assertEquals(\"dayOfYear\", test.dayOfYear().getName());\n+        assertEquals(\"Property[dayOfYear]\", test.dayOfYear().toString());\n+        assertSame(test, test.dayOfYear().getReadableInstant());\n+        assertSame(test, test.dayOfYear().getDateMidnight());\n+        assertEquals(161, test.dayOfYear().get());\n+        assertEquals(\"161\", test.dayOfYear().getAsText());\n+        assertEquals(\"161\", test.dayOfYear().getAsText(Locale.FRENCH));\n+        assertEquals(\"161\", test.dayOfYear().getAsShortText());\n+        assertEquals(\"161\", test.dayOfYear().getAsShortText(Locale.FRENCH));\n+        assertEquals(test.getChronology().days(), test.dayOfYear().getDurationField());\n+        assertEquals(test.getChronology().years(), test.dayOfYear().getRangeDurationField());\n+        assertEquals(3, test.dayOfYear().getMaximumTextLength(null));\n+        assertEquals(3, test.dayOfYear().getMaximumShortTextLength(null));\n+        assertEquals(false, test.dayOfYear().isLeap());\n+        assertEquals(0, test.dayOfYear().getLeapAmount());\n+        assertEquals(null, test.dayOfYear().getLeapDurationField());\n+    }\n+\n+    //-----------------------------------------------------------------------\n+    public void testPropertyGetWeekOfWeekyear() {\n+        DateMidnight test = new DateMidnight(2004, 6, 9);\n+        assertSame(test.getChronology().weekOfWeekyear(), test.weekOfWeekyear().getField());\n+        assertEquals(\"weekOfWeekyear\", test.weekOfWeekyear().getName());\n+        assertEquals(\"Property[weekOfWeekyear]\", test.weekOfWeekyear().toString());\n+        assertSame(test, test.weekOfWeekyear().getReadableInstant());\n+        assertSame(test, test.weekOfWeekyear().getDateMidnight());\n+        assertEquals(24, test.weekOfWeekyear().get());\n+        assertEquals(\"24\", test.weekOfWeekyear().getAsText());\n+        assertEquals(\"24\", test.weekOfWeekyear().getAsText(Locale.FRENCH));\n+        assertEquals(\"24\", test.weekOfWeekyear().getAsShortText());\n+        assertEquals(\"24\", test.weekOfWeekyear().getAsShortText(Locale.FRENCH));\n+        assertEquals(test.getChronology().weeks(), test.weekOfWeekyear().getDurationField());\n+        assertEquals(test.getChronology().weekyears(), test.weekOfWeekyear().getRangeDurationField());\n+        assertEquals(2, test.weekOfWeekyear().getMaximumTextLength(null));\n+        assertEquals(2, test.weekOfWeekyear().getMaximumShortTextLength(null));\n+        assertEquals(false, test.weekOfWeekyear().isLeap());\n+        assertEquals(0, test.weekOfWeekyear().getLeapAmount());\n+        assertEquals(null, test.weekOfWeekyear().getLeapDurationField());\n+    }\n+\n+    //-----------------------------------------------------------------------\n+    public void testPropertyGetDayOfWeek() {\n+        DateMidnight test = new DateMidnight(2004, 6, 9);\n+        assertSame(test.getChronology().dayOfWeek(), test.dayOfWeek().getField());\n+        assertEquals(\"dayOfWeek\", test.dayOfWeek().getName());\n+        assertEquals(\"Property[dayOfWeek]\", test.dayOfWeek().toString());\n+        assertSame(test, test.dayOfWeek().getReadableInstant());\n+        assertSame(test, test.dayOfWeek().getDateMidnight());\n+        assertEquals(3, test.dayOfWeek().get());\n+        assertEquals(\"Wednesday\", test.dayOfWeek().getAsText());\n+        assertEquals(\"mercredi\", test.dayOfWeek().getAsText(Locale.FRENCH));\n+        assertEquals(\"Wed\", test.dayOfWeek().getAsShortText());\n+        assertEquals(\"mer.\", test.dayOfWeek().getAsShortText(Locale.FRENCH));\n+        assertEquals(test.getChronology().days(), test.dayOfWeek().getDurationField());\n+        assertEquals(test.getChronology().weeks(), test.dayOfWeek().getRangeDurationField());\n+        assertEquals(9, test.dayOfWeek().getMaximumTextLength(null));\n+        assertEquals(8, test.dayOfWeek().getMaximumTextLength(Locale.FRENCH));\n+        assertEquals(3, test.dayOfWeek().getMaximumShortTextLength(null));\n+        assertEquals(4, test.dayOfWeek().getMaximumShortTextLength(Locale.FRENCH));\n+        assertEquals(1, test.dayOfWeek().getMinimumValue());\n+        assertEquals(1, test.dayOfWeek().getMinimumValueOverall());\n+        assertEquals(7, test.dayOfWeek().getMaximumValue());\n+        assertEquals(7, test.dayOfWeek().getMaximumValueOverall());\n+        assertEquals(false, test.dayOfWeek().isLeap());\n+        assertEquals(0, test.dayOfWeek().getLeapAmount());\n+        assertEquals(null, test.dayOfWeek().getLeapDurationField());\n+    }\n+\n+}\n--- a/JodaTime/src/test/org/joda/time/TestDateTime_Basics.java\n+++ b/JodaTime/src/test/org/joda/time/TestDateTime_Basics.java\n import junit.framework.TestCase;\n import junit.framework.TestSuite;\n \n+import org.joda.time.chrono.AbstractChronology;\n import org.joda.time.chrono.GregorianChronology;\n import org.joda.time.chrono.ISOChronology;\n \n         assertEquals(false, test1.equals(\"Hello\"));\n         assertEquals(true, test1.equals(new MockInstant()));\n         assertEquals(false, test1.equals(new DateTime(TEST_TIME1, GregorianChronology.getInstance())));\n+        assertEquals(true, new DateTime(TEST_TIME1, new MockEqualsChronology()).equals(new DateTime(TEST_TIME1, new MockEqualsChronology())));\n+        assertEquals(false, new DateTime(TEST_TIME1, new MockEqualsChronology()).equals(new DateTime(TEST_TIME1, ISOChronology.getInstance())));\n     }\n     \n     class MockInstant extends AbstractInstant {\n         }\n         public Chronology getChronology() {\n             return ISOChronology.getInstance();\n+        }\n+    }\n+\n+    class MockEqualsChronology extends AbstractChronology {\n+        public boolean equals(Object obj) {\n+            return obj instanceof MockEqualsChronology;\n+        }\n+        public DateTimeZone getZone() {\n+            return null;\n+        }\n+        public Chronology withUTC() {\n+            return this;\n+        }\n+        public Chronology withZone(DateTimeZone zone) {\n+            return this;\n+        }\n+        public String toString() {\n+            return \"\";\n         }\n     }\n \n         assertEquals(test.getMillis() - DateTimeConstants.MILLIS_PER_HOUR, result.getMillis());\n         assertEquals(ISOChronology.getInstance(PARIS), result.getChronology());\n         \n+        test = new DateTime(TEST_TIME1);\n+        result = test.withZoneRetainFields(LONDON);\n+        assertSame(test, result);\n+        \n+        test = new DateTime(TEST_TIME1);\n+        result = test.withZoneRetainFields(null);\n+        assertSame(test, result);\n+        \n         test = new DateTime(TEST_TIME1, GregorianChronology.getInstance(PARIS));\n         result = test.withZoneRetainFields(null);\n         assertEquals(test.getMillis() + DateTimeConstants.MILLIS_PER_HOUR, result.getMillis());\n         assertEquals(GregorianChronology.getInstance(), result.getChronology());\n+        \n+        test = new DateTime(TEST_TIME1, new MockNullZoneChronology());\n+        result = test.withZoneRetainFields(LONDON);\n+        assertSame(test, result);\n     }\n     \n     public void testImmutable() {\n--- a/JodaTime/src/test/org/joda/time/TestDateTime_Properties.java\n+++ b/JodaTime/src/test/org/joda/time/TestDateTime_Properties.java\n  * @author Stephen Colebourne\n  */\n public class TestDateTime_Properties extends TestCase {\n-//    // Summer time:\n-//    // 1968-02-18 to 1971-10-31 - +01:00 all year round!\n-//    // 1972  UK  Mar 19 - Oct 29\n-//    // 1973  UK  Mar 18 - Oct 28\n     // Test in 2002/03 as time zones are more well known\n     // (before the late 90's they were all over the place)\n \n         assertEquals(test.getChronology().centuries(), test.yearOfCentury().getRangeDurationField());\n         assertEquals(2, test.yearOfCentury().getMaximumTextLength(null));\n         assertEquals(2, test.yearOfCentury().getMaximumShortTextLength(null));\n+    }\n+\n+    //-----------------------------------------------------------------------\n+    public void testPropertyGetWeekyear() {\n+        DateTime test = new DateTime(2004, 6, 9, 0, 0, 0, 0);\n+        assertSame(test.getChronology().weekyear(), test.weekyear().getField());\n+        assertEquals(\"weekyear\", test.weekyear().getName());\n+        assertEquals(\"Property[weekyear]\", test.weekyear().toString());\n+        assertSame(test, test.weekyear().getReadableInstant());\n+        assertSame(test, test.weekyear().getDateTime());\n+        assertEquals(2004, test.weekyear().get());\n+        assertEquals(\"2004\", test.weekyear().getAsText());\n+        assertEquals(\"2004\", test.weekyear().getAsText(Locale.FRENCH));\n+        assertEquals(\"2004\", test.weekyear().getAsShortText());\n+        assertEquals(\"2004\", test.weekyear().getAsShortText(Locale.FRENCH));\n+        assertEquals(test.getChronology().weekyears(), test.weekyear().getDurationField());\n+        assertEquals(null, test.weekyear().getRangeDurationField());\n+        assertEquals(9, test.weekyear().getMaximumTextLength(null));\n+        assertEquals(9, test.weekyear().getMaximumShortTextLength(null));\n     }\n \n     //-----------------------------------------------------------------------\n         } catch (IllegalArgumentException ex) {}\n     }\n \n+    //-----------------------------------------------------------------------\n+    public void testPropertyGetHourOfDay() {\n+        DateTime test = new DateTime(2004, 6, 9, 13, 23, 43, 53);\n+        assertSame(test.getChronology().hourOfDay(), test.hourOfDay().getField());\n+        assertEquals(\"hourOfDay\", test.hourOfDay().getName());\n+        assertEquals(\"Property[hourOfDay]\", test.hourOfDay().toString());\n+        assertSame(test, test.hourOfDay().getReadableInstant());\n+        assertSame(test, test.hourOfDay().getDateTime());\n+        assertEquals(13, test.hourOfDay().get());\n+        assertEquals(\"13\", test.hourOfDay().getAsText());\n+        assertEquals(\"13\", test.hourOfDay().getAsText(Locale.FRENCH));\n+        assertEquals(\"13\", test.hourOfDay().getAsShortText());\n+        assertEquals(\"13\", test.hourOfDay().getAsShortText(Locale.FRENCH));\n+        assertEquals(test.getChronology().hours(), test.hourOfDay().getDurationField());\n+        assertEquals(test.getChronology().days(), test.hourOfDay().getRangeDurationField());\n+        assertEquals(2, test.hourOfDay().getMaximumTextLength(null));\n+        assertEquals(2, test.hourOfDay().getMaximumShortTextLength(null));\n+    }\n+\n+    //-----------------------------------------------------------------------\n+    public void testPropertyGetMinuteOfHour() {\n+        DateTime test = new DateTime(2004, 6, 9, 13, 23, 43, 53);\n+        assertSame(test.getChronology().minuteOfHour(), test.minuteOfHour().getField());\n+        assertEquals(\"minuteOfHour\", test.minuteOfHour().getName());\n+        assertEquals(\"Property[minuteOfHour]\", test.minuteOfHour().toString());\n+        assertSame(test, test.minuteOfHour().getReadableInstant());\n+        assertSame(test, test.minuteOfHour().getDateTime());\n+        assertEquals(23, test.minuteOfHour().get());\n+        assertEquals(\"23\", test.minuteOfHour().getAsText());\n+        assertEquals(\"23\", test.minuteOfHour().getAsText(Locale.FRENCH));\n+        assertEquals(\"23\", test.minuteOfHour().getAsShortText());\n+        assertEquals(\"23\", test.minuteOfHour().getAsShortText(Locale.FRENCH));\n+        assertEquals(test.getChronology().minutes(), test.minuteOfHour().getDurationField());\n+        assertEquals(test.getChronology().hours(), test.minuteOfHour().getRangeDurationField());\n+        assertEquals(2, test.minuteOfHour().getMaximumTextLength(null));\n+        assertEquals(2, test.minuteOfHour().getMaximumShortTextLength(null));\n+    }\n+\n+    //-----------------------------------------------------------------------\n+    public void testPropertyGetMinuteOfDay() {\n+        DateTime test = new DateTime(2004, 6, 9, 13, 23, 43, 53);\n+        assertSame(test.getChronology().minuteOfDay(), test.minuteOfDay().getField());\n+        assertEquals(\"minuteOfDay\", test.minuteOfDay().getName());\n+        assertEquals(\"Property[minuteOfDay]\", test.minuteOfDay().toString());\n+        assertSame(test, test.minuteOfDay().getReadableInstant());\n+        assertSame(test, test.minuteOfDay().getDateTime());\n+        assertEquals(803, test.minuteOfDay().get());\n+        assertEquals(\"803\", test.minuteOfDay().getAsText());\n+        assertEquals(\"803\", test.minuteOfDay().getAsText(Locale.FRENCH));\n+        assertEquals(\"803\", test.minuteOfDay().getAsShortText());\n+        assertEquals(\"803\", test.minuteOfDay().getAsShortText(Locale.FRENCH));\n+        assertEquals(test.getChronology().minutes(), test.minuteOfDay().getDurationField());\n+        assertEquals(test.getChronology().days(), test.minuteOfDay().getRangeDurationField());\n+        assertEquals(4, test.minuteOfDay().getMaximumTextLength(null));\n+        assertEquals(4, test.minuteOfDay().getMaximumShortTextLength(null));\n+    }\n+\n+    //-----------------------------------------------------------------------\n+    public void testPropertyGetSecondOfMinute() {\n+        DateTime test = new DateTime(2004, 6, 9, 13, 23, 43, 53);\n+        assertSame(test.getChronology().secondOfMinute(), test.secondOfMinute().getField());\n+        assertEquals(\"secondOfMinute\", test.secondOfMinute().getName());\n+        assertEquals(\"Property[secondOfMinute]\", test.secondOfMinute().toString());\n+        assertSame(test, test.secondOfMinute().getReadableInstant());\n+        assertSame(test, test.secondOfMinute().getDateTime());\n+        assertEquals(43, test.secondOfMinute().get());\n+        assertEquals(\"43\", test.secondOfMinute().getAsText());\n+        assertEquals(\"43\", test.secondOfMinute().getAsText(Locale.FRENCH));\n+        assertEquals(\"43\", test.secondOfMinute().getAsShortText());\n+        assertEquals(\"43\", test.secondOfMinute().getAsShortText(Locale.FRENCH));\n+        assertEquals(test.getChronology().seconds(), test.secondOfMinute().getDurationField());\n+        assertEquals(test.getChronology().minutes(), test.secondOfMinute().getRangeDurationField());\n+        assertEquals(2, test.secondOfMinute().getMaximumTextLength(null));\n+        assertEquals(2, test.secondOfMinute().getMaximumShortTextLength(null));\n+    }\n+\n+    //-----------------------------------------------------------------------\n+    public void testPropertyGetSecondOfDay() {\n+        DateTime test = new DateTime(2004, 6, 9, 13, 23, 43, 53);\n+        assertSame(test.getChronology().secondOfDay(), test.secondOfDay().getField());\n+        assertEquals(\"secondOfDay\", test.secondOfDay().getName());\n+        assertEquals(\"Property[secondOfDay]\", test.secondOfDay().toString());\n+        assertSame(test, test.secondOfDay().getReadableInstant());\n+        assertSame(test, test.secondOfDay().getDateTime());\n+        assertEquals(48223, test.secondOfDay().get());\n+        assertEquals(\"48223\", test.secondOfDay().getAsText());\n+        assertEquals(\"48223\", test.secondOfDay().getAsText(Locale.FRENCH));\n+        assertEquals(\"48223\", test.secondOfDay().getAsShortText());\n+        assertEquals(\"48223\", test.secondOfDay().getAsShortText(Locale.FRENCH));\n+        assertEquals(test.getChronology().seconds(), test.secondOfDay().getDurationField());\n+        assertEquals(test.getChronology().days(), test.secondOfDay().getRangeDurationField());\n+        assertEquals(5, test.secondOfDay().getMaximumTextLength(null));\n+        assertEquals(5, test.secondOfDay().getMaximumShortTextLength(null));\n+    }\n+\n+    //-----------------------------------------------------------------------\n+    public void testPropertyGetMillisOfSecond() {\n+        DateTime test = new DateTime(2004, 6, 9, 13, 23, 43, 53);\n+        assertSame(test.getChronology().millisOfSecond(), test.millisOfSecond().getField());\n+        assertEquals(\"millisOfSecond\", test.millisOfSecond().getName());\n+        assertEquals(\"Property[millisOfSecond]\", test.millisOfSecond().toString());\n+        assertSame(test, test.millisOfSecond().getReadableInstant());\n+        assertSame(test, test.millisOfSecond().getDateTime());\n+        assertEquals(53, test.millisOfSecond().get());\n+        assertEquals(\"53\", test.millisOfSecond().getAsText());\n+        assertEquals(\"53\", test.millisOfSecond().getAsText(Locale.FRENCH));\n+        assertEquals(\"53\", test.millisOfSecond().getAsShortText());\n+        assertEquals(\"53\", test.millisOfSecond().getAsShortText(Locale.FRENCH));\n+        assertEquals(test.getChronology().millis(), test.millisOfSecond().getDurationField());\n+        assertEquals(test.getChronology().seconds(), test.millisOfSecond().getRangeDurationField());\n+        assertEquals(3, test.millisOfSecond().getMaximumTextLength(null));\n+        assertEquals(3, test.millisOfSecond().getMaximumShortTextLength(null));\n+    }\n+\n+    //-----------------------------------------------------------------------\n+    public void testPropertyGetMillisOfDay() {\n+        DateTime test = new DateTime(2004, 6, 9, 13, 23, 43, 53);\n+        assertSame(test.getChronology().millisOfDay(), test.millisOfDay().getField());\n+        assertEquals(\"millisOfDay\", test.millisOfDay().getName());\n+        assertEquals(\"Property[millisOfDay]\", test.millisOfDay().toString());\n+        assertSame(test, test.millisOfDay().getReadableInstant());\n+        assertSame(test, test.millisOfDay().getDateTime());\n+        assertEquals(48223053, test.millisOfDay().get());\n+        assertEquals(\"48223053\", test.millisOfDay().getAsText());\n+        assertEquals(\"48223053\", test.millisOfDay().getAsText(Locale.FRENCH));\n+        assertEquals(\"48223053\", test.millisOfDay().getAsShortText());\n+        assertEquals(\"48223053\", test.millisOfDay().getAsShortText(Locale.FRENCH));\n+        assertEquals(test.getChronology().millis(), test.millisOfDay().getDurationField());\n+        assertEquals(test.getChronology().days(), test.millisOfDay().getRangeDurationField());\n+        assertEquals(8, test.millisOfDay().getMaximumTextLength(null));\n+        assertEquals(8, test.millisOfDay().getMaximumShortTextLength(null));\n+    }\n+\n }", "timestamp": 1089671829, "metainfo": ""}