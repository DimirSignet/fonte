{"sha": "d6791cb5f9d476738da9247d5a7849ee972474ae", "log": "Fix PeriodType caching  Spotted by Greg and Laura Inozemtseva", "commit": "\n--- a/src/main/java/org/joda/time/PeriodType.java\n+++ b/src/main/java/org/joda/time/PeriodType.java\n         PeriodType checkPartType = new PeriodType(null, type.iTypes, null);\n         PeriodType checkedType = (PeriodType) cache.get(checkPartType);\n         if (checkedType != null) {\n-            cache.put(inPartType, checkedType);\n+            cache.put(checkPartType, checkedType);\n             return checkedType;\n         }\n-        cache.put(inPartType, type);\n+        cache.put(checkPartType, type);\n         return type;\n     }\n \n--- a/src/test/java/org/joda/time/TestPeriodType.java\n+++ b/src/test/java/org/joda/time/TestPeriodType.java\n     public void testForFields4() throws Exception {\n         DurationFieldType[] types = new DurationFieldType[] {\n             DurationFieldType.weeks(),\n+            DurationFieldType.days(),  // adding this makes this test unique, so cache is not pre-populated\n             DurationFieldType.months(),\n         };\n         DurationFieldType[] types2 = new DurationFieldType[] {\n             DurationFieldType.months(),\n+            DurationFieldType.days(),\n             DurationFieldType.weeks(),\n         };\n         PeriodType type = PeriodType.forFields(types);", "timestamp": 1323177010, "metainfo": ""}