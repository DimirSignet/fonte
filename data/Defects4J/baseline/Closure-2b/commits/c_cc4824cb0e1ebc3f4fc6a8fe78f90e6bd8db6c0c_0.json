{"sha": "cc4824cb0e1ebc3f4fc6a8fe78f90e6bd8db6c0c", "log": "break lines in top-level non-preserved blocks with the same frequency as top-level scripts. i don't particularly like this change, but it makes the compiler more deterministic. open to other suggestions.  R=johnlenz DELTA=8  (7 added, 0 deleted, 1 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=324212   ", "commit": "\n--- a/src/com/google/javascript/jscomp/CodeGenerator.java\n+++ b/src/com/google/javascript/jscomp/CodeGenerator.java\n         if (preserveBlock) {\n           cc.beginBlock();\n         }\n+\n+        boolean preferLineBreaks =\n+            type == Token.SCRIPT ||\n+            (type == Token.BLOCK &&\n+                !preserveBlock &&\n+                n.getParent() != null &&\n+                n.getParent().getType() == Token.SCRIPT);\n         for (Node c = first; c != null; c = c.getNext()) {\n           add(c, Context.STATEMENT);\n \n \n           // Prefer to break lines in between top-level statements\n           // because top level statements are more homogeneous.\n-          if (type == Token.SCRIPT) {\n+          if (preferLineBreaks) {\n             cc.notePreferredLineBreak();\n           }\n         }", "timestamp": 1286914382, "metainfo": ""}