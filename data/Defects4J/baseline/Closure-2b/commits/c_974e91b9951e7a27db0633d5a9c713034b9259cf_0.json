{"sha": "974e91b9951e7a27db0633d5a9c713034b9259cf", "log": "Allow \"ReplaceIdGenerators\" to be turned off.  R=nicksantos DELTA=16  (14 added, 0 deleted, 2 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=3413   ", "commit": "\n--- a/src/com/google/javascript/jscomp/CompilerOptions.java\n+++ b/src/com/google/javascript/jscomp/CompilerOptions.java\n \n   /** Process instances of goog.testing.ObjectPropertyString. */\n   boolean processObjectPropertyString;\n+\n+  /** Replace id generators */\n+  boolean replaceIdGenerators = true;  // true by default for legacy reasons.\n \n   /** Id generators to replace. */\n   Set<String> idGenerators;\n   }\n \n   /**\n+   * @param replaceIdGenerators the replaceIdGenerators to set\n+   */\n+  public void setReplaceIdGenerators(boolean replaceIdGenerators) {\n+    this.replaceIdGenerators = replaceIdGenerators;\n+  }\n+\n+  /**\n    * Sets the id generators to replace.\n    */\n   public void setIdGenerators(Set<String> idGenerators) {\n--- a/src/com/google/javascript/jscomp/DefaultPassConfig.java\n+++ b/src/com/google/javascript/jscomp/DefaultPassConfig.java\n \n     passes.add(createEmptyPass(\"beforeStandardOptimizations\"));\n \n-    passes.add(replaceIdGenerators);\n+    if (options.replaceIdGenerators) {\n+      passes.add(replaceIdGenerators);\n+    }\n \n     // Optimizes references to the arguments variable.\n     if (options.optimizeArgumentsArray) {\n--- a/src/com/google/javascript/jscomp/ReplaceIdGenerators.java\n+++ b/src/com/google/javascript/jscomp/ReplaceIdGenerators.java\n   @Override\n   public void process(Node externs, Node root) {\n     NodeTraversal.traverse(compiler, root, new GatherGenerators());\n-    NodeTraversal.traverse(compiler, root, new ReplaceGenerators());\n+    if (!nameGenerators.isEmpty() || !this.consistNameGenerators.isEmpty()) {\n+      NodeTraversal.traverse(compiler, root, new ReplaceGenerators());\n+    }\n   }\n \n   private class ReplaceGenerators extends AbstractPostOrderCallback {", "timestamp": 1317835997, "metainfo": ""}