{"sha": "45e90a3d390335fe246b8d3f1868a74e1663b607", "log": "Automated g4 rollback.  *** Reason for rollback ***  breaks builds  *** Original change description ***  Fix TypeInference#updateTypeOfParametersOnClosure.  Use call site for warning source instead of function definition.  R=johnlenz DELTA=31  (1 added, 28 deleted, 2 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=869001   ", "commit": "\n--- a/src/com/google/javascript/jscomp/TypeInference.java\n+++ b/src/com/google/javascript/jscomp/TypeInference.java\n         JSType iArgumentType = getJSType(iArgument);\n         if (iArgument.getType() == Token.FUNCTION &&\n             iArgumentType instanceof FunctionType &&\n-            iArgument.getJSDocInfo() == null) {\n+            iArgumentType.getJSDocInfo() == null) {\n           iArgument.setJSType(iParameterFnType);\n         }\n       }\n         }\n \n         if (!foundTemplateTypeOfThisParameter) {\n-          compiler.report(JSError.make(NodeUtil.getSourceName(n), n,\n+          Node source = fnType.getSource();\n+          compiler.report(JSError.make(NodeUtil.getSourceName(source), source,\n               TEMPLATE_TYPE_OF_THIS_EXPECTED));\n           return;\n         }\n--- a/test/com/google/javascript/jscomp/TypeCheckTest.java\n+++ b/test/com/google/javascript/jscomp/TypeCheckTest.java\n         compiler.getWarnings()[0].description);\n   }\n \n-  public void testUpdateParameterTypeOnClosure() throws Exception {\n-    testTypes(\n-        \"/**\\n\" +\n-        \"* @constructor\\n\" +\n-        \"* @param {*=} opt_value\\n\" +\n-        \"* @return {?}\\n\" +\n-        \"*/\\n\" +\n-        \"function Object(opt_value) {}\\n\" +\n-        \"/**\\n\" +\n-        \"* @constructor\\n\" +\n-        \"* @param {...*} var_args\\n\" +\n-        \"*/\\n\" +\n-        \"function Function(var_args) {}\\n\" +\n-        \"/**\\n\" +\n-        \"* @type {Function}\\n\" +\n-        \"*/\\n\" +\n-        // The line below sets JSDocInfo on Object so that the type of the\n-        // argument to function f has JSDoc through its prototype chain.\n-        \"Object.prototype.constructor = function() {};\\n\",\n-        \"/**\\n\" +\n-        \"* @param {function(): boolean} fn\\n\" +\n-        \"*/\\n\" +\n-        \"function f(fn) {}\\n\" +\n-        \"f(function(g) { });\\n\",\n-        null,\n-        false);\n-  }\n-\n   public void testBadTemplateType1() throws Exception {\n     testTypes(\n         \"/**\\n\" +", "timestamp": 1288381574, "metainfo": ""}