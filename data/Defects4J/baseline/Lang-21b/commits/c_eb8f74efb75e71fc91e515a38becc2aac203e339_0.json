{"sha": "eb8f74efb75e71fc91e515a38becc2aac203e339", "log": "Applying my patch from LANG-393; EqualsBuilder uses compareTo for BigDecimal and not equals  ", "commit": "\n--- a/src/java/org/apache/commons/lang/builder/EqualsBuilder.java\n+++ b/src/java/org/apache/commons/lang/builder/EqualsBuilder.java\n         }\n         Class lhsClass = lhs.getClass();\n         if (!lhsClass.isArray()) {\n-            // The simple case, not an array, just test the element\n-            isEquals = lhs.equals(rhs);\n+            if (lhs instanceof java.math.BigDecimal) {\n+                isEquals = (((java.math.BigDecimal)lhs).compareTo(rhs) == 0);\n+            } else {\n+                // The simple case, not an array, just test the element\n+                isEquals = lhs.equals(rhs);\n+            }\n         } else if (lhs.getClass() != rhs.getClass()) {\n             // Here when we compare different dimensions, for example: a boolean[][] to a boolean[] \n             this.setEquals(false);\n--- a/src/test/org/apache/commons/lang/builder/EqualsBuilderTest.java\n+++ b/src/test/org/apache/commons/lang/builder/EqualsBuilderTest.java\n  */\n package org.apache.commons.lang.builder;\n \n+import java.math.BigDecimal;\n import java.util.Arrays;\n \n import junit.framework.Test;\n         assertTrue(new EqualsBuilder().append(Float.POSITIVE_INFINITY, Float.POSITIVE_INFINITY).isEquals());\n     }\n \n+    // https://issues.apache.org/jira/browse/LANG-393\n+    public void testBigDecimal() {\n+        BigDecimal o1 = new BigDecimal(\"2.0\");\n+        BigDecimal o2 = new BigDecimal(\"2.00\");\n+        assertTrue(new EqualsBuilder().append(o1, o1).isEquals());\n+        assertTrue(new EqualsBuilder().append(o1, o2).isEquals());\n+    }\n+\n     public void testAccessors() {\n         EqualsBuilder equalsBuilder = new EqualsBuilder();\n         assertTrue(equalsBuilder.isEquals());", "timestamp": 1200207622, "metainfo": ""}