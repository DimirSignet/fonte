{"sha": "8fd24901c6e28b30b0edbcebe3f6573a0b35e930", "log": "Improved binary comparator by adding some logging", "commit": "\n--- a/buildSrc/src/main/groovy/org/mockito/release/comparison/BinaryComparator.java\n+++ b/buildSrc/src/main/groovy/org/mockito/release/comparison/BinaryComparator.java\n \n class BinaryComparator {\n \n-    private Closure<File> left;\n-    private Closure<File> right;\n+    private Closure<File> file1;\n+    private Closure<File> file2;\n \n-    BinaryComparator setPair(Closure<File> left, Closure<File> right) {\n-        notNull(left, \"source jar file to compare\", right, \"source jar file to compare\");\n-        this.left = left;\n-        this.right = right;\n+    BinaryComparator setPair(Closure<File> file1, Closure<File> file2) {\n+        notNull(file1, \"source jar file to compare\", file2, \"source jar file to compare\");\n+        this.file1 = file1;\n+        this.file2 = file2;\n         return this;\n     }\n \n-    boolean areEqual() {\n-        File left = this.left.call();\n-        File right = this.right.call();\n-        notNull(left, \"source jar file to compare\", right, \"source jar file to compare\");\n+    Result compareFiles() {\n+        final File file1 = this.file1.call();\n+        final File file2 = this.file2.call();\n+        notNull(file1, \"source jar file to compare\", file2, \"source jar file to compare\");\n \n         FileHasher hasher = new FileHasher();\n-        byte[] leftHash = hasher.hash(left);\n-        byte[] rightHash = hasher.hash(right);\n-        return Arrays.equals(leftHash, rightHash);\n+        final byte[] hash1 = hasher.hash(file1);\n+        final byte[] hash2 = hasher.hash(file2);\n+\n+        final boolean equals = Arrays.equals(hash1, hash2);\n+\n+        return new Result() {\n+            public boolean areEqual() { return equals; }\n+            public File getFile1() { return file1; }\n+            public File getFile2() { return file2; }\n+        };\n+    }\n+\n+    static interface Result {\n+        boolean areEqual();\n+        File getFile1();\n+        File getFile2();\n     }\n }\n--- a/buildSrc/src/main/groovy/org/mockito/release/comparison/PublicationsComparatorTask.java\n+++ b/buildSrc/src/main/groovy/org/mockito/release/comparison/PublicationsComparatorTask.java\n         boolean poms = pomComparator.areEqual();\n         getLogger().lifecycle(\"{} - pom files equal: {}\", getPath(), poms);\n \n-        boolean jars = binaryComparator.areEqual();\n+        BinaryComparator.Result result = binaryComparator.compareFiles();\n+        getLogger().info(\"{} - compared binaries: '{}' and '{}'\", getPath(), result.getFile1(), result.getFile2());\n+        boolean jars = result.areEqual();\n         getLogger().lifecycle(\"{} - source jars equal: {}\", getPath(), jars);\n+\n \n         this.publicationsEqual = jars && poms;\n     }", "timestamp": 1416077894, "metainfo": ""}