{"sha": "5de4f2dae5b489a176d377e328856dfb6db3f4a7", "log": "Growing the release plugin  More tidy up", "commit": "\n--- a/buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseStep.java\n+++ b/buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseStep.java\n     }\n   }\n \n+  public void performCleanup() {\n+    if (cleanup != null) {\n+      System.out.println(\"Cleaning up after step '\" + getDescription() + \"'\");\n+      cleanup.perform();\n+    } else {\n+      System.out.println(\"No cleanup found for step '\" + getDescription() + \"'\");\n+    }\n+  }\n+\n   public void rollback(Closure closure) {\n     rollback = Operations.toOperation(closure);\n   }\n   public void perform() {\n     operation.perform();\n   }\n-\n-  public Operation getCleanup() {\n-    return cleanup;\n-  }\n }\n--- a/buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java\n+++ b/buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java\n         //TODO SF needs tidy up. I should model better the cleanup VS rollback operation\n         while(!attempted.isEmpty()) {\n           ReleaseStep step = attempted.removeLast();\n-          Operation cleanup = step.getCleanup();\n-          if (cleanup != null) {\n-            System.out.println(\"Found cleanup operation for step \" + (attempted.size() + 1) + \" (\" + step.getDescription() + \")\");\n-            cleanup.perform();\n-          }\n+          step.performCleanup();\n         }\n     }\n \n--- a/buildSrc/src/main/groovy/org/mockito/release/steps/ReleaseStep.java\n+++ b/buildSrc/src/main/groovy/org/mockito/release/steps/ReleaseStep.java\n \n   void performRollback();\n \n-  /**\n-   * may return null. TODO: I don't like this\n-   */\n-  Operation getCleanup();\n+  void performCleanup();\n }", "timestamp": 1419889151, "metainfo": ""}