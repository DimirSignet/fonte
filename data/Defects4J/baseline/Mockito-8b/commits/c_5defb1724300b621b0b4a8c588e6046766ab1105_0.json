{"sha": "5defb1724300b621b0b4a8c588e6046766ab1105", "log": "Removed some static code  --HG-- extra : convert_revision : svn%3Aaa2aecf3-ea3e-0410-9d70-716747e7c967/trunk%401337", "commit": "\n--- a/test/org/mockito/StateMaster.java\n+++ b/test/org/mockito/StateMaster.java\n \n public class StateMaster {\n     \n-    private static final ThreadSafeMockingProgress MOCKING_PROGRESS= new ThreadSafeMockingProgress();\n+    private final ThreadSafeMockingProgress mockingProgress = new ThreadSafeMockingProgress();\n \n-    public static void reset() {\n-        MOCKING_PROGRESS.reset();\n+    public void reset() {\n+        mockingProgress.reset();\n     }\n     \n-    public static void validate() {\n-        MOCKING_PROGRESS.validateState();\n+    public void validate() {\n+        mockingProgress.validateState();\n     }\n }\n--- a/test/org/mockitousage/matchers/InvalidUseOfMatchersTest.java\n+++ b/test/org/mockitousage/matchers/InvalidUseOfMatchersTest.java\n import org.mockito.AdditionalMatchers;\n import org.mockito.Mock;\n import org.mockito.Mockito;\n-import org.mockito.StateMaster;\n import org.mockito.exceptions.misusing.InvalidUseOfMatchersException;\n import org.mockitousage.IMethods;\n import org.mockitoutil.TestBase;\n \n     @After\n     public void resetState() {\n-        StateMaster.reset();\n+        super.resetState();\n     }\n \n     @Test\n--- a/test/org/mockitousage/misuse/DetectingMisusedMatchersTest.java\n+++ b/test/org/mockitousage/misuse/DetectingMisusedMatchersTest.java\n import org.junit.After;\n import org.junit.Test;\n import org.mockito.Mock;\n-import org.mockito.StateMaster;\n import org.mockito.exceptions.misusing.InvalidUseOfMatchersException;\n import org.mockito.exceptions.misusing.UnfinishedVerificationException;\n import org.mockitousage.IMethods;\n     \n     @After\n     public void resetState() {\n-        StateMaster.reset();\n+        super.resetState();\n     }\n \n     private void misplacedArgumentMatcher() {\n--- a/test/org/mockitousage/misuse/InvalidStateDetectionTest.java\n+++ b/test/org/mockitousage/misuse/InvalidStateDetectionTest.java\n \n     @After\n     public void resetState() {\n-        StateMaster.reset();\n+        super.resetState();\n     }\n     \n     @Test\n             assertEquals(expected, e.getClass());\n         }\n         //Make sure state is cleaned up\n-        StateMaster.validate();\n+        new StateMaster().validate();\n     }\n }\n--- a/test/org/mockitousage/misuse/InvalidUsageTest.java\n+++ b/test/org/mockitousage/misuse/InvalidUsageTest.java\n import org.junit.Test;\n import org.mockito.InOrder;\n import org.mockito.Mock;\n-import org.mockito.StateMaster;\n import org.mockito.exceptions.base.MockitoException;\n import org.mockito.exceptions.misusing.MissingMethodInvocationException;\n import org.mockitousage.IMethods;\n \n     @After\n     public void resetState() {\n-        StateMaster.reset();\n+        super.resetState();\n     }\n     \n     @Test(expected=MockitoException.class)\n--- a/test/org/mockitousage/stacktrace/ClickableStackTracesWhenFrameworkMisusedTest.java\n+++ b/test/org/mockitousage/stacktrace/ClickableStackTracesWhenFrameworkMisusedTest.java\n import org.junit.Before;\n import org.junit.Test;\n import org.mockito.Mock;\n-import org.mockito.StateMaster;\n import org.mockito.exceptions.misusing.InvalidUseOfMatchersException;\n import org.mockito.exceptions.misusing.UnfinishedStubbingException;\n import org.mockito.exceptions.misusing.UnfinishedVerificationException;\n     \n     @After\n     public void resetState() {\n-        StateMaster.reset();\n+        super.resetState();\n     }\n     \n     private void misplacedArgumentMatcherHere() {\n--- a/test/org/mockitousage/stacktrace/StackTraceFilteringTest.java\n+++ b/test/org/mockitousage/stacktrace/StackTraceFilteringTest.java\n import org.junit.Test;\n import org.mockito.InOrder;\n import org.mockito.Mock;\n-import org.mockito.StateMaster;\n import org.mockito.exceptions.base.MockitoException;\n import org.mockito.exceptions.verification.NoInteractionsWanted;\n import org.mockito.exceptions.verification.VerificationInOrderFailure;\n \n     @After\n     public void resetState() {\n-        StateMaster.reset();\n+        super.resetState();\n     }\n     \n     @Before\n--- a/test/org/mockitousage/stubbing/StubbingUsingDoReturnTest.java\n+++ b/test/org/mockitousage/stubbing/StubbingUsingDoReturnTest.java\n import org.junit.After;\n import org.junit.Test;\n import org.mockito.Mock;\n-import org.mockito.StateMaster;\n import org.mockito.exceptions.base.MockitoException;\n import org.mockito.exceptions.verification.NoInteractionsWanted;\n import org.mockito.invocation.InvocationOnMock;\n     @Mock private IMethods mock;\n     \n     @After public void resetState() {\n-        StateMaster.reset();\n+        super.resetState();\n     }\n \n     @Test\n--- a/test/org/mockitoutil/TestBase.java\n+++ b/test/org/mockitoutil/TestBase.java\n         ConfigurationAccess.getConfig().overrideReturnValues(null);\n     }\n \n+    //TODO find out why performance dropped from 4.2 -> 4.3\n+    @Before\n+    public void init() {\n+        new StateMaster().validate();\n+        MockitoAnnotations.initMocks(this);\n+    }\n+    \n     public void makeStackTracesClean() {\n         ConfigurationAccess.getConfig().overrideCleansStackTrace(true);\n     }\n     \n-    @Before\n-    public void init() {\n-        StateMaster.validate();\n-        MockitoAnnotations.initMocks(this);\n+    public void resetState() {\n+        new StateMaster().reset();\n     }\n     \n     //I'm really tired of matchers, enter the assertor!", "timestamp": 1239974597, "metainfo": ""}