{"sha": "895dc2b14273124ca7602460986694e670b92d35", "log": "Document the code", "commit": "\n--- /dev/null\n+++ b/test/org/mockitousage/performance/StubOnlyAvoidMemoryConsumptionTest.java\n+package org.mockitousage.performance;\n+\n+import org.junit.Ignore;\n+import org.junit.Test;\n+\n+import static org.mockito.Mockito.mock;\n+import static org.mockito.Mockito.when;\n+import static org.mockito.Mockito.withSettings;\n+\n+public class StubOnlyAvoidMemoryConsumptionTest {\n+\n+    @Test\n+    public void using_stub_only_wont_thrown_an_OutOfMemoryError() {\n+        Object obj = mock(Object.class, withSettings().stubOnly());\n+        when(obj.toString()).thenReturn(\"asdf\");\n+\n+        for (int i = 0; i < 1000000; i++) {\n+            obj.toString();\n+        }\n+    }\n+\n+    @Test\n+    @Ignore(\"ignored because it will detonate our test suite with an OOM for real\")\n+    public void without_stub_only_mocks_will_store_invocations_leading_to_an_OutOfMemoryError() {\n+        Object obj = mock(Object.class, withSettings());\n+        when(obj.toString()).thenReturn(\"asdf\");\n+\n+        for (int i = 0; i < 1000000; i++) {\n+            obj.toString();\n+        }\n+    }\n+}", "timestamp": 1355620997, "metainfo": ""}