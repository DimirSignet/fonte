{"sha": "5af24fee1cb0dbcaaff3d3eebbde1e56597d8658", "log": "Added some synchronization code to make Mockito  behave slightly better when stubbing occurs in multiple threads on shared mock. This is still not supported! I only made the exceptions slightly less confusing (at the cost of speed :( )  --HG-- extra : convert_revision : svn%3Aaa2aecf3-ea3e-0410-9d70-716747e7c967/trunk%402057", "commit": "\n--- a/src/org/mockito/internal/verification/RegisteredInvocations.java\n+++ b/src/org/mockito/internal/verification/RegisteredInvocations.java\n     }\n \n     public void removeLast() {\n-        int last = invocations.size() - 1;\n-        invocations.remove(last);\n+        //TODO: add specific test for synchronization of this block (it is tested by InvocationContainerImplTest at the moment)\n+        synchronized (invocations) {\n+            int last = invocations.size() - 1;\n+            invocations.remove(last);\n+        }\n     }\n \n     public List<Invocation> getAll() {", "timestamp": 1282078280, "metainfo": ""}