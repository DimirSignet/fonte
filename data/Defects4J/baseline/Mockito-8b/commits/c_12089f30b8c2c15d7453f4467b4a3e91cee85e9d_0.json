{"sha": "12089f30b8c2c15d7453f4467b4a3e91cee85e9d", "log": "Fixed issue 252. Made the exception & javadocs clearer.", "commit": "\n--- a/src/org/mockito/Mockito.java\n+++ b/src/org/mockito/Mockito.java\n  * \n  * <h4>Important gotcha on spying real objects!</h4>\n  * \n- * 1. Sometimes it's impossible to use {@link Mockito#when(Object)} for stubbing spies. Example:\n+ * 1. Sometimes it's impossible or impractical to use {@link Mockito#when(Object)} for stubbing spies.\n+ * Therefore when using spies please consider doReturn|Answer|Throw() family of methods for stubbing. Example:\n  * \n  * <pre>\n  *   List list = new LinkedList();\n      * \n      * <h4>Important gotcha on spying real objects!</h4>\n      * \n-     * 1. Sometimes it's impossible to use {@link Mockito#when(Object)} for stubbing spies. Example:\n+     * 1. Sometimes it's impossible or impractical to use {@link Mockito#when(Object)} for stubbing spies.\n+     * Therefore when using spies please consider doReturn|Answer|Throw() family of methods for stubbing. Example:\n      * \n      * <pre>\n      *   List list = new LinkedList();\n--- a/src/org/mockito/exceptions/Reporter.java\n+++ b/src/org/mockito/exceptions/Reporter.java\n                 \"'\" + methodName + \"' is a *void method* and it *cannot* be stubbed with a *return value*!\",\n                 \"Voids are usually stubbed with Throwables:\",\n                 \"    doThrow(exception).when(mock).someVoidMethod();\",\n-                \"If the method you are trying to stub is *overloaded* then make sure you are calling the right overloaded version.\",\n-                \"This exception might also occur when somewhere in your test you are stubbing *final methods*.\"\n+                \"***\",\n+                \"If you're unsure why you're getting above error read on.\",\n+                \"Due to the nature of the syntax above problem might occur because:\",\n+                \"1. The method you are trying to stub is *overloaded*. Make sure you are calling the right overloaded version.\",\n+                \"2. Somewhere in your test you are stubbing *final methods*. Sorry, Mockito does not verify/stub final methods.\",\n+                \"3. A spy is stubbed using when(spy.foo()).then() syntax. It is safer to stub spies - \",\n+                \"   - with doReturn|Throw() family of methods. More in javadocs for Mockito.spy() method.\",\n+                \"\"\n              ));\n     }\n \n--- a/test/org/mockitousage/stacktrace/ModellingDescriptiveMessagesTest.java\n+++ b/test/org/mockitousage/stacktrace/ModellingDescriptiveMessagesTest.java\n     public void shouldScreamWhenExtraInterfacesIsANullArray() {\n         mock(IMethods.class, withSettings().extraInterfaces((Class[]) null));\n     }\n+\n+    @Test\n+    public void shouldMentionSpiesWhenVoidMethodIsToldToReturnValue() {\n+        List list = mock(List.class);\n+        doReturn(\"foo\").when(list).clear();\n+    }\n }", "timestamp": 1301819588, "metainfo": ""}