{"sha": "1572c39f394056a59d6fc30a06a7593b0772fc7c", "log": "moved some logic to VM  --HG-- extra : convert_revision : svn%3Aaa2aecf3-ea3e-0410-9d70-716747e7c967/trunk%40199", "commit": "\n--- a/src/org/mockito/internal/progress/VerificationMode.java\n+++ b/src/org/mockito/internal/progress/VerificationMode.java\n     public boolean missingMethodMode() {\n         return isExplicit() && (atLeastOnceMode() || wantedInvocationCount == 1);\n     }\n+\n+    public boolean exactNumberOfInvocationsMode() {\n+        return !atLeastOnceMode() && isExplicit();\n+    }\n     \n     @Override\n     public String toString() {\n--- a/src/org/mockito/internal/verification/NumberOfInvocationsVerifier.java\n+++ b/src/org/mockito/internal/verification/NumberOfInvocationsVerifier.java\n     }\n     \n     public void verify(List<Invocation> invocations, InvocationMatcher wanted, VerificationMode mode) {\n-        if (mode.numberOfInvocationsMode()) {\n+        if (!mode.exactNumberOfInvocationsMode()) {\n             return;\n         }\n         \n--- a/test/org/mockito/internal/progress/VerificationModeTest.java\n+++ b/test/org/mockito/internal/progress/VerificationModeTest.java\n  */\n package org.mockito.internal.progress;\n \n-import static org.junit.Assert.*;\n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertFalse;\n+import static org.junit.Assert.assertTrue;\n+import static org.junit.Assert.fail;\n+import static org.mockito.internal.progress.VerificationMode.atLeastOnce;\n+import static org.mockito.internal.progress.VerificationMode.noMoreInteractions;\n+import static org.mockito.internal.progress.VerificationMode.times;\n \n import org.junit.Test;\n import org.mockito.RequiresValidState;\n import org.mockito.exceptions.parents.MockitoException;\n-import org.mockito.internal.progress.VerificationMode;\n-import static org.mockito.internal.progress.VerificationMode.*;\n \n public class VerificationModeTest extends RequiresValidState {\n \n         assertFalse(times(0).missingMethodMode());\n         assertFalse(times(2).missingMethodMode());\n     }\n+    \n+    @Test\n+    public void shouldKnowIfIsExactNumberOfInvocationsMode() throws Exception {\n+        assertTrue(times(0).exactNumberOfInvocationsMode());\n+        assertTrue(times(1).exactNumberOfInvocationsMode());\n+        assertTrue(times(2).exactNumberOfInvocationsMode());\n+        \n+        assertFalse(noMoreInteractions().exactNumberOfInvocationsMode());\n+        assertFalse(atLeastOnce().exactNumberOfInvocationsMode());\n+    }\n }\n--- a/test/org/mockito/internal/verification/NumberOfInvocationsVerifierTest.java\n+++ b/test/org/mockito/internal/verification/NumberOfInvocationsVerifierTest.java\n     }\n \n     @Test\n-    public void shouldNeverVerifyWhenAtLeastOnceVerification() throws Exception {\n+    public void shouldNeverVerifyWhenNotModeIsNotExactNumberOfInvocationsMode() throws Exception {\n         verifier.verify(null, null, atLeastOnce());\n     }\n     \n-    @Test\n-    public void shouldVerifyOnlyWhenModeIsExplicit() {\n-        //TODO refactor to VM\n-        verifier.verify(null, null, VerificationMode.noMoreInteractions());\n-    }\n-\n     @Test\n     public void shouldCountActualInvocations() throws Exception {\n         verifier.verify(invocations, wanted, times(4));", "timestamp": 1197670938, "metainfo": ""}