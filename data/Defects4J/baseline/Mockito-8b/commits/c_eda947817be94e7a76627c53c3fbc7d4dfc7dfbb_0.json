{"sha": "eda947817be94e7a76627c53c3fbc7d4dfc7dfbb", "log": "Got rid of some duplication  --HG-- extra : convert_revision : svn%3Aaa2aecf3-ea3e-0410-9d70-716747e7c967/trunk%401835", "commit": "\n--- a/src/org/mockito/internal/invocation/InvocationMatcher.java\n+++ b/src/org/mockito/internal/invocation/InvocationMatcher.java\n import java.io.Serializable;\n import java.lang.reflect.Method;\n import java.util.Collections;\n+import java.util.LinkedList;\n import java.util.List;\n \n import org.hamcrest.Matcher;\n             k++;\n         }\n     }\n+\n+    public static List<InvocationMatcher> createFrom(List<Invocation> invocations) {\n+        LinkedList<InvocationMatcher> out = new LinkedList<InvocationMatcher>();\n+\n+        for (Invocation i : invocations) {\n+            out.add(new InvocationMatcher(i));\n+        }\n+\n+        return out;\n+    }\n }\n--- a/src/org/mockito/runners/ConsoleSpammingMockitoJUnitRunner.java\n+++ b/src/org/mockito/runners/ConsoleSpammingMockitoJUnitRunner.java\n                 //Print warnings here!\n                 List<Invocation> unused = new UnusedStubsFinder().find(createdMocks);\n                 List<Invocation> all = new AllInvocationsFinder().find(createdMocks);\n-                List<InvocationMatcher> allMatchers = new LinkedList<InvocationMatcher>();\n-                //TODO: this is dodgy, I shouldn't be forced to change the type into InvocationMatcher just to enable using has similar method!!!\n-                for (Invocation i : all) {\n-                    allMatchers.add(new InvocationMatcher(i));\n-                }\n+                List<InvocationMatcher> allMatchers = InvocationMatcher.createFrom(all);\n                 //TODO: warnings printer is not consistent with debug().printInvocations()\n                 new WarningsPrinterImpl(unused, allMatchers, false).print(logger);\n             }\n--- a/src/org/mockito/runners/VerboseMockitoJUnitRunner.java\n+++ b/src/org/mockito/runners/VerboseMockitoJUnitRunner.java\n \n                 List< Invocation > unused = new UnusedStubsFinder().find(createdMocks);\n                 List<Invocation> all = new AllInvocationsFinder().find(createdMocks);\n-                List<InvocationMatcher> allMatchers = new LinkedList<InvocationMatcher>();\n-                //TODO: this is dodgy, I shouldn't be forced to change the type into InvocationMatcher just to enable using has similar method!!!\n-                for (Invocation i : all) {\n-                    allMatchers.add(new InvocationMatcher(i));\n-                }\n+                List<InvocationMatcher> allMatchers = InvocationMatcher.createFrom(all);\n+\n                 //TODO: warnings printer is not consistent with debug().printInvocations()\n                 String warnings = new WarningsPrinterImpl(unused, allMatchers, false).print();\n \n--- a/test/org/mockito/internal/invocation/InvocationMatcherTest.java\n+++ b/test/org/mockito/internal/invocation/InvocationMatcherTest.java\n  */\n package org.mockito.internal.invocation;\n \n+import org.fest.assertions.Assertions;\n import org.hamcrest.Matcher;\n import org.junit.Before;\n import org.junit.Test;\n         //then\n         invocationMatcher.captureArgumentsFrom(invocation);\n     }\n+\n+    @Test\n+    public void shouldCreateFromInvocations() throws Exception {\n+        //given\n+        Invocation i = new InvocationBuilder().toInvocation();\n+        //when\n+        List<InvocationMatcher> out = InvocationMatcher.createFrom(asList(i));\n+        //then\n+        assertEquals(1, out.size());\n+        assertEquals(i, out.get(0).getInvocation());\n+    }\n }", "timestamp": 1266178848, "metainfo": ""}