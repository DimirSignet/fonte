{"sha": "abc41d7fe154b0bf95eac5cf75eb8d037acc6d0d", "log": "Fixed issue 128 In order to communicate decent message when MockitoRunner does not find any test methods  --HG-- extra : convert_revision : svn%3Aaa2aecf3-ea3e-0410-9d70-716747e7c967/trunk%401619", "commit": "\n--- a/src/org/mockito/internal/runners/RunnerFactory.java\n+++ b/src/org/mockito/internal/runners/RunnerFactory.java\n \n import org.mockito.exceptions.base.MockitoException;\n import org.mockito.internal.runners.util.RunnerProvider;\n+import org.mockito.internal.runners.util.TestMethodsFinder;\n \n public class RunnerFactory {\n \n                 return runnerProvider.newInstance(\"org.mockito.internal.runners.JUnit44RunnerImpl\", klass);\n             }\n         } catch (Throwable t) {\n+            if (!new TestMethodsFinder().hasTestMethods(klass)) {\n+                throw new MockitoException(\n+                    \"\\n\" +\n+                    \"\\n\" +\n+                    \"No tests found in \" + klass.getSimpleName() + \"\\n\" +\n+                    \"Haven't you forgot @Test annotation?\\n\"\n+                    , t);\n+            }\n             throw new MockitoException(\n                     \"\\n\" +\n                     \"\\n\" +\n--- a/test/org/mockito/internal/runners/RunnerFactoryTest.java\n+++ b/test/org/mockito/internal/runners/RunnerFactoryTest.java\n             assertContains(\"upgrade your JUnit version\", e.getMessage());\n         }\n     }\n-}\n+\n+    static class NoTestMethods {}\n+\n+    @Test\n+    public void shouldSaySomethingMeaningfulWhenNoTestMethods() {\n+        //given\n+        RunnerFactory factory = new RunnerFactory(new RunnerProvider());\n+\n+        //when\n+        try {\n+            factory.create(NoTestMethods.class);\n+            fail();\n+        }\n+        //then\n+        catch (MockitoException e) {\n+            assertContains(\"No tests\", e.getMessage());\n+        }\n+    }\n+}\n--- a/test/org/mockitousage/bugs/MockitoRunnerBreaksWhenNoTestMethodsTest.java\n+++ b/test/org/mockitousage/bugs/MockitoRunnerBreaksWhenNoTestMethodsTest.java\n import org.mockito.runners.MockitoJUnitRunner;\n import org.mockitoutil.TestBase;\n \n-//TODO before final 1.8\n-@Ignore\n @RunWith(MockitoJUnitRunner.class)\n-public class MockitoRunnerBreaksWhenNoTestMethodsTest extends TestBase {}\n+@Ignore(\"for demo only. this test cannot be enabled as it fails :)\")\n+public class MockitoRunnerBreaksWhenNoTestMethodsTest extends TestBase {\n+    public void notATestMethod() {}\n+}", "timestamp": 1255876779, "metainfo": ""}