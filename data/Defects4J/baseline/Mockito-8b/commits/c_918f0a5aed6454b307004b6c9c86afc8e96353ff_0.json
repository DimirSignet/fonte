{"sha": "918f0a5aed6454b307004b6c9c86afc8e96353ff", "log": "Fix for issue 229 in the describeTo phase of the Same matcher, when match is failing", "commit": "\n--- a/src/org/mockito/internal/matchers/Same.java\n+++ b/src/org/mockito/internal/matchers/Same.java\n  */\n package org.mockito.internal.matchers;\n \n-import java.io.Serializable;\n-\n import org.hamcrest.Description;\n import org.mockito.ArgumentMatcher;\n+\n+import java.io.Serializable;\n \n \n public class Same extends ArgumentMatcher<Object> implements Serializable {\n     public void describeTo(Description description) {\n         description.appendText(\"same(\");\n         appendQuoting(description);\n-        description.appendText(wanted.toString());\n+        description.appendText(wanted == null ? \"null\" : wanted.toString());\n         appendQuoting(description);\n         description.appendText(\")\");\n     }\n--- a/test/org/mockitousage/bugs/NPEWithCertainMatchersTest.java\n+++ b/test/org/mockitousage/bugs/NPEWithCertainMatchersTest.java\n  */\n package org.mockitousage.bugs;\n \n-import static org.mockito.Matchers.*;\n-import static org.mockito.Mockito.never;\n-import static org.mockito.Mockito.verify;\n-\n import org.junit.After;\n import org.junit.Test;\n import org.mockito.Mock;\n import org.mockitousage.IMethods;\n import org.mockitoutil.TestBase;\n+\n+import static org.mockito.Matchers.*;\n+import static org.mockito.Mockito.never;\n+import static org.mockito.Mockito.verify;\n \n public class NPEWithCertainMatchersTest extends TestBase {\n \n \n         verify(mock, never()).intArgumentMethod(same(new Integer(100)));\n     }\n+\n+    @Test(expected = AssertionError.class)\n+    public void shouldNotThrowNPEWhenNullPassedToEq() {\n+        mock.objectArgMethod(\"not null\");\n+\n+        verify(mock).objectArgMethod(eq(null));\n+    }\n+\n+    @Test(expected = AssertionError.class)\n+    public void shouldNotThrowNPEWhenNullPassedToSame() {\n+        mock.objectArgMethod(\"not null\");\n+\n+        verify(mock).objectArgMethod(same(null));\n+    }\n }", "timestamp": 1290099254, "metainfo": ""}