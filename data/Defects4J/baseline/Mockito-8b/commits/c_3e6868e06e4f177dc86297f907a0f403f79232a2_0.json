{"sha": "3e6868e06e4f177dc86297f907a0f403f79232a2", "log": "Fixing a potential problem where fields annotated by MockitoAnnotations.Mock couldn't be injected", "commit": "\n--- a/src/org/mockito/internal/configuration/InjectingAnnotationEngine.java\n+++ b/src/org/mockito/internal/configuration/InjectingAnnotationEngine.java\n         new DefaultInjectionEngine().injectMocksOnFields(mockDependents, mocks, testClass);\n     }\n \n+    /**\n+     * Scan fields annotated by &#064;InjectMocks\n+     *\n+     * @param testClass\n+     * @param clazz\n+     * @return\n+     */\n     private static Set<Field> scanForInjection(Object testClass, Class<?> clazz) {\n         Set<Field> testedFields = new HashSet<Field>();\n         Field[] fields = clazz.getDeclaredFields();\n         for (Field field : clazz.getDeclaredFields()) {\n             // mock or spies only\n             if (null != field.getAnnotation(Spy.class) || null != field.getAnnotation(org.mockito.Mock.class)\n-                    || null != field.getAnnotation(Mock.class)) {\n+                    || null != field.getAnnotation(org.mockito.MockitoAnnotations.Mock.class)) {\n                 Object fieldInstance = null;\n                 boolean wasAccessible = field.isAccessible();\n                 field.setAccessible(true);\n--- /dev/null\n+++ b/test/org/mockitousage/annotation/DeprecatedMockAnnotationTest.java\n+package org.mockitousage.annotation;\n+\n+\n+import org.junit.Before;\n+import org.junit.Test;\n+import org.mockito.InjectMocks;\n+import org.mockito.MockitoAnnotations;\n+\n+import java.awt.*;\n+\n+import static org.junit.Assert.assertNotNull;\n+\n+public class DeprecatedMockAnnotationTest {\n+\n+    @MockitoAnnotations.Mock private List deprecatedMock;\n+\n+    @InjectMocks private AnInjectedObject anInjectedObject;\n+\n+    @Before\n+    public void initMocks() throws Exception {\n+        MockitoAnnotations.initMocks(this);\n+    }\n+\n+    @Test\n+    public void shouldCreateMockForDeprecatedMockAnnotation() throws Exception {\n+        assertNotNull(deprecatedMock);\n+    }\n+\n+    @Test\n+    public void shouldInjectDeprecatedMockAnnotation() throws Exception {\n+        assertNotNull(anInjectedObject.aFieldAwaitingInjection);\n+    }\n+\n+    private static class AnInjectedObject {\n+        List aFieldAwaitingInjection;\n+    }\n+}", "timestamp": 1289314181, "metainfo": ""}