{"sha": "39dbb0f10abda381e03711846d6e61099613d44f", "log": "Fixed a problem that reset(null) and reset(nonMock) gave NPE instead of a decent exception message.", "commit": "\n--- a/src/org/mockito/internal/util/MockUtil.java\n+++ b/src/org/mockito/internal/util/MockUtil.java\n     }\n \n     public <T> void resetMock(T mock) {\n-        InvocationNotifierHandler oldHandler\n-                = (InvocationNotifierHandler) mockMaker.getHandler(mock);\n+        InvocationNotifierHandler oldHandler = (InvocationNotifierHandler) getMockHandler(mock);\n         MockSettingsImpl settings = oldHandler.getMockSettings();\n         InvocationNotifierHandler<T> newHandler = new InvocationNotifierHandler<T>(\n                 new MockHandler<T>(settings), settings);\n--- a/test/org/mockitousage/basicapi/ResetTest.java\n+++ b/test/org/mockitousage/basicapi/ResetTest.java\n-/*\n- * Copyright (c) 2007 Mockito contributors\n- * This program is made available under the terms of the MIT License.\n- */\n+/*\n+ * Copyright (c) 2007 Mockito contributors\n+ * This program is made available under the terms of the MIT License.\n+ */\n package org.mockitousage.basicapi;\n \n import static org.mockito.Matchers.*;\n import org.junit.Test;\n import org.mockito.Mock;\n import org.mockito.exceptions.misusing.MissingMethodInvocationException;\n+import org.mockito.exceptions.misusing.NotAMockException;\n import org.mockito.exceptions.misusing.UnfinishedVerificationException;\n import org.mockitousage.IMethods;\n import org.mockitoutil.TestBase;\n             fail();\n         } catch (MissingMethodInvocationException e) {\n         }\n+    }\n+\n+    @Test(expected = NotAMockException.class)\n+    public void resettingNonMockIsSafe() {\n+        reset(\"\");\n+    }\n+\n+    @Test(expected = NotAMockException.class)\n+    public void resettingNullIsSafe() {\n+        reset(new Object[] {null});\n     }\n \n     @Test", "timestamp": 1333913223, "metainfo": ""}