{"sha": "eb34c4f1dbdde6feabeb0d0b7162665ca42e5a12", "log": "In order to avoid AssertionError I removed the assertion from code as it didn't do any difference Fixed reopened issue 30  --HG-- extra : convert_revision : svn%3Aaa2aecf3-ea3e-0410-9d70-716747e7c967/trunk%401633", "commit": "\n--- a/src/org/mockito/internal/invocation/AllInvocationsFinder.java\n+++ b/src/org/mockito/internal/invocation/AllInvocationsFinder.java\n     /**\n      * gets all invocations from mocks. Invocations are ordered earlier first. \n      * \n-     * @param mocks\n+     * @param mocks mocks\n      * @return invocations\n      */\n-    public List<Invocation> getAllInvocations(List<? extends Object> mocks) {\n+    public List<Invocation> getAllInvocations(List<?> mocks) {\n         Set<Invocation> invocationsInOrder = new TreeSet<Invocation>(new SequenceNumberComparator());\n         for (Object mock : mocks) {\n             List<Invocation> fromSingleMock = new MockUtil().getMockHandler(mock).getRegisteredInvocations();\n \n     private final class SequenceNumberComparator implements Comparator<Invocation> {\n         public int compare(Invocation o1, Invocation o2) {\n-            int comparison = o1.getSequenceNumber().compareTo(o2.getSequenceNumber());\n-            assert comparison != 0 : \"sequence number has to be globally unique\";\n-            return comparison;\n+            return o1.getSequenceNumber().compareTo(o2.getSequenceNumber());\n         }\n     }\n }\n--- a/test/org/mockito/internal/AllInvocationsFinderTest.java\n+++ b/test/org/mockito/internal/AllInvocationsFinderTest.java\n         assertArgumentEquals(300, invocations.get(2));\n     }\n \n+    @Test\n+    public void shouldNotCountDuplicatedInteractions() throws Exception {\n+        mockOne.simpleMethod(100);\n+\n+        List<Invocation> invocations = finder.getAllInvocations(asList(mockOne, mockOne, mockOne));\n+\n+        assertEquals(1, invocations.size());\n+    }\n+\n     private void assertArgumentEquals(Object argumentValue, Invocation invocation) {\n         assertEquals(argumentValue, invocation.getArguments()[0]);\n     }", "timestamp": 1256758610, "metainfo": ""}