{"sha": "f4606e4b4afbfad3aa907a47d1a0b9c21f8dbb31", "log": "some renaming and clean up around configuration  --HG-- extra : convert_revision : svn%3Aaa2aecf3-ea3e-0410-9d70-716747e7c967/trunk%40506", "commit": "\n--- a/src/org/mockito/configuration/MockitoConfiguration.java\n+++ b/src/org/mockito/configuration/MockitoConfiguration.java\n \n public class MockitoConfiguration {\n     \n-    private static final ReturnValues DEFAULT_RETURN_VALUES = new DefaultReturnValues();\n-    private static final ThreadLocal<ReturnValues> CUSTOM_RETURN_VALUES = new ThreadLocal<ReturnValues>();\n+    private static final ThreadLocal<MockitoConfiguration> CONFIG = new ThreadLocal<MockitoConfiguration>();\n+\n+    private ReturnValues returnValues;\n     \n-    public static ReturnValues defaultReturnValues() {\n-        return getCustomReturnValues() != null ? getCustomReturnValues() : DEFAULT_RETURN_VALUES;\n+    private MockitoConfiguration() {\n+        resetReturnValues();\n+    }\n+    \n+    public static MockitoConfiguration instance() {\n+        if (CONFIG.get() == null) {\n+            CONFIG.set(new MockitoConfiguration());\n+        }\n+        return CONFIG.get();\n+    }\n+    \n+    public ReturnValues getReturnValues() {\n+        return returnValues;\n     }\n \n-    public static void setCustomReturnValues(ReturnValues returnValues) {\n-        CUSTOM_RETURN_VALUES.set(returnValues);\n-    }\n-    \n-    public static ReturnValues getCustomReturnValues() {\n-        return CUSTOM_RETURN_VALUES.get();\n+    public void setReturnValues(ReturnValues returnValues) {\n+        this.returnValues = returnValues;\n     }\n \n-    public static void resetCustomReturnValues() {\n-        CUSTOM_RETURN_VALUES.remove();\n+    public void resetReturnValues() {\n+        returnValues = new DefaultReturnValues();\n     }\n }\n--- a/src/org/mockito/internal/MockHandler.java\n+++ b/src/org/mockito/internal/MockHandler.java\n         \n         if (verificationMode != null) {\n             verifyingRecorder.verify(invocationMatcher, verificationMode);\n-            return MockitoConfiguration.defaultReturnValues().valueFor(invocationMatcher.getInvocation());\n+            return MockitoConfiguration.instance().getReturnValues().valueFor(invocationMatcher.getInvocation());\n         }\n         \n         stubber.setInvocationForPotentialStubbing(invocationMatcher);\n--- a/src/org/mockito/internal/stubbing/Stubber.java\n+++ b/src/org/mockito/internal/stubbing/Stubber.java\n                 return s.answer();\n             }\n         }\n-        return MockitoConfiguration.defaultReturnValues().valueFor(invocation);\n+        return MockitoConfiguration.instance().getReturnValues().valueFor(invocation);\n     }\n \n     public void addThrowableForVoidMethod(Throwable throwable) {\n--- a/test/org/mockitousage/examples/configure/ConfiguringDefaultReturnValuesForSelectedMocksTest.java\n+++ b/test/org/mockitousage/examples/configure/ConfiguringDefaultReturnValuesForSelectedMocksTest.java\n     @Before\n     public void configureDefaultReturnValues() {\n         myDefaultReturnValues = new MyDefaultReturnValues();\n-        MockitoConfiguration.setCustomReturnValues(myDefaultReturnValues);\n+        MockitoConfiguration.instance().setReturnValues(myDefaultReturnValues);\n     }\n     \n     @After\n     public void resetDefaultReturnValues() {\n-        MockitoConfiguration.resetCustomReturnValues();\n+        MockitoConfiguration.instance().resetReturnValues();\n     }\n     \n     private final class MyDefaultReturnValues implements ReturnValues {\n--- a/test/org/mockitousage/examples/configure/ConfiguringDefaultReturnValuesTest.java\n+++ b/test/org/mockitousage/examples/configure/ConfiguringDefaultReturnValuesTest.java\n     \n     @Before\n     public void configureDefaultReturnValues() {\n-        MockitoConfiguration.setCustomReturnValues(new MyDefaultReturnValues());\n+        MockitoConfiguration.instance().setReturnValues(new MyDefaultReturnValues());\n     }\n     \n     @After\n     public void resetDefaultReturnValues() {\n-        MockitoConfiguration.resetCustomReturnValues();\n+        MockitoConfiguration.instance().resetReturnValues();\n         \n     }\n     ", "timestamp": 1206385369, "metainfo": ""}