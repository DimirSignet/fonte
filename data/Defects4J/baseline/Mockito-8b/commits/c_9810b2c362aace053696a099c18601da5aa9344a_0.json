{"sha": "9810b2c362aace053696a099c18601da5aa9344a", "log": "Some work around error messages (mentioning equals() & hashcode() along with other unmockable methods)  --HG-- extra : convert_revision : svn%3Aaa2aecf3-ea3e-0410-9d70-716747e7c967/trunk%401350", "commit": "\n--- a/src/org/mockito/exceptions/Reporter.java\n+++ b/src/org/mockito/exceptions/Reporter.java\n                 \"    when(mock.isOk()).thenThrow(exception);\",\n                 \"    doThrow(exception).when(mock).someVoidMethod();\",\n                 \"Hints:\",\n-                \" 1. missing thenReturn() or mock call inside when()\",\n-                \" 2. although stubbed methods may return mocks, you cannot inline a mock() call inside a thenReturn method (see issue 53)\",\n+                \" 1. missing thenReturn()\",\n+                \" 2. although stubbed methods may return mocks, you cannot inline mock creation (mock()) call inside a thenReturn method (see issue 53)\",\n                 \"\"\n         ));\n     }\n                 \"when() requires an argument which has to be a method call on a mock.\",\n                 \"For example:\",\n                 \"    when(mock.getArticles()).thenReturn(articles);\",\n-                \"Also make sure the method is not final - you cannot stub final methods.\"\n+                \"\",\n+                \"Also, this error might show up because you verify final method, equals() or hashcode() method.\",\n+                \"Those methods *cannot* be stubbed/verified.\",\n+                \"\"\n         ));\n     }\n \n                 \"\",\n                 \"Example of correct verification:\",\n                 \"    verify(mock).doSomething()\",\n-                \"Also make sure the method is not final - you cannot verify final methods.\",\n+                \"\",\n+                \"Also, this error might show up because you stub a final method, equals() or hashcode() method.\",\n+                \"Those methods *cannot* be stubbed/verified.\",\n                 \"\"\n         ));\n         \n                 location,\n                 \"\",\n                 \"You cannot use argument matchers outside of verification or stubbing.\",\n-                \"Also make sure you're *not* stubbing/verifying a final method with an argument matcher.\",\n                 \"Examples of correct usage of argument matchers:\",\n                 \"    when(mock.get(anyInt())).thenReturn(null);\",\n                 \"    doThrow(new RuntimeException()).when(mock).someVoidMethod(anyObject());\",\n                 \"    verify(mock).someMethod(contains(\\\"foo\\\"))\",\n+                \"\",\n+                \"Also, this error might show up because you use argument matchers with methods that cannot be mocked.\",\n+                \"Following methods *cannot* be stubbed/verified: final methods, equals() and hashcode().\",                \n                 \"\"\n                 ));\n     }\n--- a/test/org/mockitousage/stacktrace/ModellingDescriptiveMessagesTest.java\n+++ b/test/org/mockitousage/stacktrace/ModellingDescriptiveMessagesTest.java\n  */\n package org.mockitousage.stacktrace;\n \n+import static org.mockito.Matchers.*;\n import static org.mockito.Mockito.*;\n \n import org.junit.Before;\n     }    \n \n     @Test\n-    public void shouldPointOutUnfinishedStubbingWhenVoidMethodCalled() {\n-        doReturn(\"asdf\");\n-        \n+    public void shouldMentionFinalAndObjectMethodsWhenMissingMockCall() {\n+        when(mock.equals(null)).thenReturn(false);\n+    }\n+    \n+    @Test\n+    public void shouldMentionFinalAndObjectMethodsWhenVerifying() {\n+        verify(mock).equals(null);\n         verify(mock).simpleMethod();\n-    }   \n+    }\n+    \n+    @Test\n+    public void shouldMentionFinalAndObjectMethodsWhenMisplacedArgumentMatcher() {\n+        when(mock.equals(anyObject())).thenReturn(false);\n+    }\n }", "timestamp": 1240174387, "metainfo": ""}