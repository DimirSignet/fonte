{"sha": "b6bf0c1fd79449cd57e6b98762935ae0ae906e65", "log": "Removed redundant interface (had only single interface)  --HG-- extra : convert_revision : svn%3Aaa2aecf3-ea3e-0410-9d70-716747e7c967/trunk%401666", "commit": "\n--- a/src/org/mockito/internal/creation/MethodInterceptorFilter.java\n+++ b/src/org/mockito/internal/creation/MethodInterceptorFilter.java\n         cglibHacker.setMockitoNamingPolicy(mockitoMethodProxy);\n         \n         FilteredCGLIBProxyRealMethod realMethod = new FilteredCGLIBProxyRealMethod(mockitoMethodProxy);\n-        MockitoMethod mockitoMethod = new SerializableMockitoMethod(method);\n+        MockitoMethod mockitoMethod = new MockitoMethod(method);\n         Invocation invocation = new Invocation(proxy, mockitoMethod, args, SequenceNumber.next(), realMethod);\n         return mockHandler.handle(invocation);\n     }\n--- a/src/org/mockito/internal/invocation/MockitoMethod.java\n+++ b/src/org/mockito/internal/invocation/MockitoMethod.java\n package org.mockito.internal.invocation;\n \n-public interface MockitoMethod {\n+import java.io.Serializable;\n+import java.lang.reflect.Method;\n+import java.util.Arrays;\n \n-    Class<?> getReturnType();\n+public class MockitoMethod implements Serializable {\n \n-    Class<?>[] getParameterTypes();\n+    private static final long serialVersionUID = 6005610965006048445L;\n+    private Class<?> declaringClass;\n+    private String methodName;\n+    private Class<?>[] parameterTypes;\n+    private Class<?> returnType;\n+    private Class<?>[] exceptionTypes;\n+    private boolean isVarArgs;\n \n-    String getName();\n+    public MockitoMethod(Method method) {\n+        declaringClass = method.getDeclaringClass();\n+        methodName = method.getName();\n+        parameterTypes = method.getParameterTypes();\n+        returnType = method.getReturnType();\n+        exceptionTypes = method.getExceptionTypes();\n+        isVarArgs = method.isVarArgs();\n+    }\n \n-    Class<?>[] getExceptionTypes();\n+    public String getName() {\n+        return methodName;\n+    }\n \n-    boolean isVarArgs();\n+    public Class<?> getReturnType() {\n+        return returnType;\n+    }\n \n-    boolean isDeclaredOnInterface();\n+    public Class<?>[] getParameterTypes() {\n+        return parameterTypes;\n+    }\n \n+    public Class<?>[] getExceptionTypes() {\n+        return exceptionTypes;\n+    }\n+\n+    public boolean isVarArgs() {\n+        return isVarArgs;\n+    }\n+    \n+    public boolean isDeclaredOnInterface() {\n+        return declaringClass.isInterface();\n+    }    \n+\n+    @Override\n+    public int hashCode() {\n+        throw new RuntimeException(\"hashCode() not implemented\");\n+    }\n+\n+    @Override\n+    public boolean equals(Object obj) {\n+        if (this == obj)\n+            return true;\n+        if (obj == null)\n+            return false;\n+        if (getClass() != obj.getClass())\n+            return false;\n+        MockitoMethod other = (MockitoMethod) obj;\n+        if (declaringClass == null) {\n+            if (other.declaringClass != null)\n+                return false;\n+        } else if (!declaringClass.equals(other.declaringClass))\n+            return false;\n+        if (methodName == null) {\n+            if (other.methodName != null)\n+                return false;\n+        } else if (!methodName.equals(other.methodName))\n+            return false;\n+        if (!Arrays.equals(parameterTypes, other.parameterTypes))\n+            return false;\n+        if (returnType == null) {\n+            if (other.returnType != null)\n+                return false;\n+        } else if (!returnType.equals(other.returnType))\n+            return false;\n+        return true;\n+    }\n }\n--- a/src/org/mockito/internal/util/ObjectMethodsGuru.java\n+++ b/src/org/mockito/internal/util/ObjectMethodsGuru.java\n import java.lang.reflect.Method;\n \n import org.mockito.internal.invocation.MockitoMethod;\n-import org.mockito.internal.invocation.SerializableMockitoMethod;\n \n public class ObjectMethodsGuru implements Serializable {\n \n     private static final long serialVersionUID = -1286718569065470494L;\n \n     public boolean isToString(Method method) {\n-        return isToString(new SerializableMockitoMethod(method));\n+        return isToString(new MockitoMethod(method));\n     }\n \n     public boolean isToString(MockitoMethod method) {\n--- a/test/org/mockito/internal/invocation/InvocationBuilder.java\n+++ b/test/org/mockito/internal/invocation/InvocationBuilder.java\n             }\n         }\n         \n-        Invocation i = new Invocation(mock, new SerializableMockitoMethod(method), args, sequenceNumber, null);\n+        Invocation i = new Invocation(mock, new MockitoMethod(method), args, sequenceNumber, null);\n         if (verified) {\n             i.markVerified();\n         }\n--- a/test/org/mockito/internal/invocation/SerializableMockitoMethodTest.java\n+++ b/test/org/mockito/internal/invocation/SerializableMockitoMethodTest.java\n \n public class SerializableMockitoMethodTest extends TestBase {\n \n-    private SerializableMockitoMethod mockMethod;\n+    private MockitoMethod mockMethod;\n     private Method toStringMethod;\n     private Class<?>[] args;\n \n     public void createMethodToTestWith() throws SecurityException, NoSuchMethodException {\n         args = new Class<?>[0];\n         toStringMethod = this.getClass().getMethod(\"toString\", args);\n-        mockMethod = new SerializableMockitoMethod(toStringMethod);\n+        mockMethod = new MockitoMethod(toStringMethod);\n     }\n     \n     @Test\n     \n     @Test\n     public void shouldBeEqualForTwoInstances() throws Exception {\n-        assertTrue(new SerializableMockitoMethod(toStringMethod).equals(mockMethod));\n+        assertTrue(new MockitoMethod(toStringMethod).equals(mockMethod));\n     }\n     \n     @Test\n     public void shouldNotBeEqualForSameMethodFromTwoDifferentClasses() throws Exception {\n         Method testBaseToStringMethod = String.class.getMethod(\"toString\", args);\n-        assertFalse(new SerializableMockitoMethod(testBaseToStringMethod).equals(mockMethod));\n+        assertFalse(new MockitoMethod(testBaseToStringMethod).equals(mockMethod));\n     }\n     \n     //TODO: add tests for generated equals() method\n--- a/test/org/mockitoutil/TestBase.java\n+++ b/test/org/mockitoutil/TestBase.java\n     }\n \n     protected static Invocation invocationOf(Class<?> type, String methodName, Object ... args) throws NoSuchMethodException {\n-        return new Invocation(new Object(), new SerializableMockitoMethod(type.getMethod(methodName,\n+        return new Invocation(new Object(), new MockitoMethod(type.getMethod(methodName,\n                 new Class[0])), args, 1, null);\n     }\n \n     protected static Invocation invocationOf(Class<?> type, String methodName, RealMethod realMethod) throws NoSuchMethodException {\n-        return new Invocation(new Object(), new SerializableMockitoMethod(type.getMethod(methodName,\n+        return new Invocation(new Object(), new MockitoMethod(type.getMethod(methodName,\n                 new Class[0])), new Object[0], 1, realMethod);\n     }\n ", "timestamp": 1257711647, "metainfo": ""}