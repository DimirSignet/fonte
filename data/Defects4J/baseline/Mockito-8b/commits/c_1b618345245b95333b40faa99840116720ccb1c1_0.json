{"sha": "1b618345245b95333b40faa99840116720ccb1c1", "log": "Growing the release plugin  Added a way to execute specific rollback step", "commit": "\n--- /dev/null\n+++ b/buildSrc/src/main/groovy/org/mockito/release/steps/ConfigurableReleaseStep.java\n+package org.mockito.release.steps;\n+\n+import groovy.lang.Closure;\n+\n+public interface ConfigurableReleaseStep extends ReleaseStep {\n+\n+  void rollback(Closure closure); //TODO SF avoid leaking closure here as the release steps should be a java tool\n+}\n--- a/buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseStep.java\n+++ b/buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseStep.java\n import org.mockito.release.util.operations.Operation;\n import org.mockito.release.util.operations.Operations;\n \n-class DefaultReleaseStep implements ReleaseStep {\n+class DefaultReleaseStep implements ConfigurableReleaseStep {\n \n     private final String description;\n     private final Operation operation;\n--- a/buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java\n+++ b/buildSrc/src/main/groovy/org/mockito/release/steps/DefaultReleaseSteps.java\n \n     private List<ReleaseStep> steps = new ArrayList<ReleaseStep>();\n \n-    public ReleaseStep newStep(String description, Operation operation) {\n+    public ConfigurableReleaseStep newStep(String description, Operation operation) {\n         DefaultReleaseStep step = new DefaultReleaseStep(description, operation);\n         steps.add(step);\n         return step;\n     }\n \n-  public Operation getStep(int stepNumber) {\n+  public ReleaseStep getStep(int stepNumber) {\n     return steps.get(stepNumber - 1); //TODO SF array index\n   }\n \n--- a/buildSrc/src/main/groovy/org/mockito/release/steps/ReleaseStep.java\n+++ b/buildSrc/src/main/groovy/org/mockito/release/steps/ReleaseStep.java\n package org.mockito.release.steps;\n \n-import groovy.lang.Closure;\n import org.mockito.release.util.operations.Operation;\n \n public interface ReleaseStep extends Operation {\n \n     String getDescription();\n \n-    void rollback(Closure closure); //TODO SF avoid leaking closure here as the release steps should be a java tool\n-\n+  /**\n+   * may return null. TODO: I don't like this\n+   */\n     Operation getRollback();\n }\n--- a/buildSrc/src/main/groovy/org/mockito/release/steps/ReleaseSteps.java\n+++ b/buildSrc/src/main/groovy/org/mockito/release/steps/ReleaseSteps.java\n \n public interface ReleaseSteps extends Operation {\n \n-    ReleaseStep newStep(String description, Operation operation);\n+    ConfigurableReleaseStep newStep(String description, Operation operation);\n \n-    Operation getStep(int stepNumber);\n+    ReleaseStep getStep(int stepNumber);\n \n }", "timestamp": 1419879860, "metainfo": ""}