{"sha": "7b7e1413f5b55254e38b65ad0c0849b07b7abb17", "log": "Fixes issue 269  No flag to generate exports  R=johnlenz DELTA=21  (21 added, 0 deleted, 0 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=698   ", "commit": "\n--- a/src/com/google/javascript/jscomp/CommandLineRunner.java\n+++ b/src/com/google/javascript/jscomp/CommandLineRunner.java\n         handler = BooleanOptionHandler.class,\n         usage = \"Enable debugging options\")\n     private boolean debug = false;\n+\n+    @Option(name = \"--generate_exports\",\n+        handler = BooleanOptionHandler.class,\n+        usage = \"Generates export code for those marked with @export\")\n+    private boolean generate_exports = false;\n \n     @Option(name = \"--formatting\",\n         usage = \"Specifies which formatting options, if any, should be \"\n       level.setDebugOptionsForCompilationLevel(options);\n     }\n \n+    if(flags.generate_exports) {\n+      options.setGenerateExports(flags.generate_exports);\n+    }\n+\n     WarningLevel wLevel = flags.warning_level;\n     wLevel.setOptionsForWarningLevel(options);\n     for (FormattingOption formattingOption : flags.formatting) {\n--- a/src/com/google/javascript/jscomp/CompilerOptions.java\n+++ b/src/com/google/javascript/jscomp/CompilerOptions.java\n     this.runtimeTypeCheck = false;\n   }\n \n+  public void setGenerateExports(boolean generateExports) {\n+    this.generateExports = generateExports;\n+  }\n+\n   public void setCodingConvention(CodingConvention codingConvention) {\n     this.codingConvention = codingConvention;\n   }\n--- a/test/com/google/javascript/jscomp/CommandLineRunnerTest.java\n+++ b/test/com/google/javascript/jscomp/CommandLineRunnerTest.java\n         CheckMissingReturn.MISSING_RETURN_STATEMENT);\n   }\n \n+  public void testGenerateExports() {\n+    args.add(\"--generate_exports=true\");\n+    test(\"/** @export */ foo.prototype.x = function() {};\",\n+        \"foo.prototype.x=function(){};\"+\n+        \"goog.exportSymbol(\\\"foo.prototype.x\\\",foo.prototype.x);\");\n+  }\n+\n   /* Helper functions */\n \n   private void testSame(String original) {", "timestamp": 1299006526, "metainfo": ""}