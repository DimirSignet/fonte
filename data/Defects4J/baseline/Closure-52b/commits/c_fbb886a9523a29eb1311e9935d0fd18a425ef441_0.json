{"sha": "fbb886a9523a29eb1311e9935d0fd18a425ef441", "log": "If the source node for a FunctionType is cleared, also clear the prototypeSlot as it will have stale information.  R=nicksantos DELTA=57  (47 added, 5 deleted, 5 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=3248   ", "commit": "\n--- a/src/com/google/javascript/rhino/jstype/FunctionType.java\n+++ b/src/com/google/javascript/rhino/jstype/FunctionType.java\n \n import static com.google.javascript.rhino.jstype.JSTypeNative.OBJECT_TYPE;\n import static com.google.javascript.rhino.jstype.JSTypeNative.U2U_CONSTRUCTOR_TYPE;\n-import static com.google.javascript.rhino.jstype.ObjectType.Property;\n-\n import com.google.common.base.Preconditions;\n import com.google.common.collect.ImmutableList;\n import com.google.common.collect.Iterables;\n    * Sets the source node.\n    */\n   public void setSource(Node source) {\n+    if (null == source) {\n+      prototypeSlot = null;\n+    }\n     this.source = source;\n   }\n \n     call = (ArrowType) safeResolve(call, t, scope);\n     if (prototypeSlot != null) {\n       prototypeSlot.setType(\n-          (PrototypeObjectType) safeResolve(prototypeSlot.getType(), t, scope));\n+          safeResolve(prototypeSlot.getType(), t, scope));\n     }\n \n     // Warning about typeOfThis if it doesn't resolve to an ObjectType", "timestamp": 1315931492, "metainfo": ""}