{"sha": "2928b3ef978a619a5433a6f3c9209e2968497904", "log": "handle explicit null values in JSON", "commit": "\n--- a/proto/src/main/java/com/google/gson/protobuf/ProtoTypeAdapter.java\n+++ b/proto/src/main/java/com/google/gson/protobuf/ProtoTypeAdapter.java\n           String jsonFieldName =\n               getCustSerializedName(fieldDescriptor.getOptions(), fieldDescriptor.getName());\n \n-          if (jsonObject.has(jsonFieldName)) {\n-            JsonElement jsonElement = jsonObject.get(jsonFieldName);\n+          JsonElement jsonElement = jsonObject.get(jsonFieldName);\n+          if (jsonElement != null && !jsonElement.isJsonNull()) {\n             // Do not reuse jsonFieldName here, it might have a custom value\n             Object fieldValue;\n             if (fieldDescriptor.getType() == ENUM_TYPE) {\n--- a/proto/src/test/java/com/google/gson/protobuf/functional/ProtosWithPrimitiveTypesTest.java\n+++ b/proto/src/test/java/com/google/gson/protobuf/functional/ProtosWithPrimitiveTypesTest.java\n     assertEquals(\"foo\", proto.getMsg());\n     assertEquals(3, proto.getCount());\n   }\n+\n+  public void testDeserializeWithExplicitNullValue() {\n+    SimpleProto proto = gson.fromJson(\"{msg:'foo',count:null}\", SimpleProto.class);\n+    assertEquals(\"foo\", proto.getMsg());\n+    assertEquals(0, proto.getCount());\n+  }\n+\n }", "timestamp": 1464032670, "metainfo": ""}