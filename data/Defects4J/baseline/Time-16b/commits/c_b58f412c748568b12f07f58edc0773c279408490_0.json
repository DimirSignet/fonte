{"sha": "b58f412c748568b12f07f58edc0773c279408490", "log": "Store period and duration using ISO8601 string  ", "commit": "\n--- a/JodaTimeContrib/hibernate/src/java/org/joda/time/contrib/hibernate/PersistentDuration.java\n+++ b/JodaTimeContrib/hibernate/src/java/org/joda/time/contrib/hibernate/PersistentDuration.java\n package org.joda.time.contrib.hibernate;\n \n import org.joda.time.Duration;\n-import org.joda.time.convert.ConverterManager;\n-import org.joda.time.convert.DurationConverter;\n \n /**\n  * Converts a org.joda.time.Duration to and from Sql for Hibernate.\n- * It simply stores the value as a varchar (using Duration.toString),\n- * and retrieves it using a DurationConverter.\n- * TODO : are we persisting Chronologies ? is it any relevant ?\n+ * It simply stores the value as a varchar using Duration.toString.\n  *\n  * @author gjoseph\n  * @author $Author: $ (last edit)\n     }\n \n     protected Object fromNonNullString(String s) {\n-        final DurationConverter converter = ConverterManager.getInstance().getDurationConverter(s);\n-        final long durationMillis = converter.getDurationMillis(s);\n-        return new Duration(durationMillis);\n+        return new Duration(s);\n     }\n \n     protected String toNonNullString(Object value) {\n--- a/JodaTimeContrib/hibernate/src/java/org/joda/time/contrib/hibernate/PersistentPeriod.java\n+++ b/JodaTimeContrib/hibernate/src/java/org/joda/time/contrib/hibernate/PersistentPeriod.java\n package org.joda.time.contrib.hibernate;\n \n import org.joda.time.Period;\n-import org.joda.time.format.PeriodFormat;\n \n /**\n  * Converts a org.joda.time.Period to and from Sql for Hibernate.\n- * It simply stores and retrieves the value as a varchar, using\n- * PeriodFormat.\n- *\n- * TODO : are we persisting Chronologies ? is it any relevant ?\n- * TODO : how are we handling conversions that might end up too long for the column ? \n+ * It simply stores and retrieves the value as a varchar using Period.toString.\n  *\n  * @author gjoseph\n  * @author $Author: $ (last edit)\n     }\n \n     protected Object fromNonNullString(String s) {\n-        return PeriodFormat.getDefault().parsePeriod(s);\n+        return new Period(s);\n     }\n \n     protected String toNonNullString(Object value) {\n-        return PeriodFormat.getDefault().print((Period) value);\n+        return value.toString();\n     }\n \n }", "timestamp": 1190922723, "metainfo": ""}