{"sha": "b4e2915b1a395e4b9d142e460b3482d9a5c319c4", "log": "Ensure name length is correct even if one char != one byte  ", "commit": "\n--- a/src/main/java/org/apache/commons/compress/archivers/tar/TarArchiveOutputStream.java\n+++ b/src/main/java/org/apache/commons/compress/archivers/tar/TarArchiveOutputStream.java\n                 TarArchiveEntry longLinkEntry = new TarArchiveEntry(TarConstants.GNU_LONGLINK,\n                                                                     TarConstants.LF_GNUTYPE_LONGNAME);\n \n-                longLinkEntry.setSize(entry.getName().length() + 1);\n+                final byte[] nameBytes = entry.getName().getBytes();\n+                longLinkEntry.setSize(nameBytes.length + 1); // +1 for NUL\n                 putArchiveEntry(longLinkEntry);\n-                write(entry.getName().getBytes());\n-                write(0);\n+                write(nameBytes);\n+                write(0); // NUL terminator\n                 closeArchiveEntry();\n             } else if (longFileMode != LONGFILE_TRUNCATE) {\n                 throw new RuntimeException(\"file name '\" + entry.getName()", "timestamp": 1238525074, "metainfo": ""}