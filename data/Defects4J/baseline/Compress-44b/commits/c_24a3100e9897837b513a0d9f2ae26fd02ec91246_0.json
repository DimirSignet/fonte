{"sha": "24a3100e9897837b513a0d9f2ae26fd02ec91246", "log": "COMPRESS-315 allow tar entries with gid/uid > Integer.MAX_INT  ", "commit": "\n--- a/src/main/java/org/apache/commons/compress/archivers/tar/TarArchiveEntry.java\n+++ b/src/main/java/org/apache/commons/compress/archivers/tar/TarArchiveEntry.java\n     private int mode;\n \n     /** The entry's user id. */\n-    private int userId = 0;\n+    private long userId = 0;\n \n     /** The entry's group id. */\n-    private int groupId = 0;\n+    private long groupId = 0;\n \n     /** The entry's size. */\n     private long size = 0;\n      * Get this entry's user id.\n      *\n      * @return This entry's user id.\n-     */\n+     * @deprecated use #getLongUserId instead as user ids can be\n+     * bigger than {@link Integer.MAX_INT}\n+     */\n+    @Deprecated\n     public int getUserId() {\n+        return (int) (userId & 0xffffffff);\n+    }\n+\n+    /**\n+     * Set this entry's user id.\n+     *\n+     * @param userId This entry's new user id.\n+     */\n+    public void setUserId(int userId) {\n+        setUserId((long) userId);\n+    }\n+\n+    /**\n+     * Get this entry's user id.\n+     *\n+     * @return This entry's user id.\n+     * @since 1.10\n+     */\n+    public long getLongUserId() {\n         return userId;\n     }\n \n      * Set this entry's user id.\n      *\n      * @param userId This entry's new user id.\n-     */\n-    public void setUserId(int userId) {\n+     * @since 1.10\n+     */\n+    public void setUserId(long userId) {\n         this.userId = userId;\n     }\n \n      * Get this entry's group id.\n      *\n      * @return This entry's group id.\n-     */\n+     * @deprecated use #getLongGroupId instead as group ids can be\n+     * bigger than {@link Integer.MAX_INT}\n+     */\n+    @Deprecated\n     public int getGroupId() {\n+        return (int) (groupId & 0xffffffff);\n+    }\n+\n+    /**\n+     * Set this entry's group id.\n+     *\n+     * @param groupId This entry's new group id.\n+     */\n+    public void setGroupId(int groupId) {\n+        setGroupId((long) groupId);\n+    }\n+\n+    /**\n+     * Get this entry's group id.\n+     *\n+     * @return This entry's group id.\n+     */\n+    public long getLongGroupId() {\n         return groupId;\n     }\n \n      *\n      * @param groupId This entry's new group id.\n      */\n-    public void setGroupId(int groupId) {\n+    public void setGroupId(long groupId) {\n         this.groupId = groupId;\n     }\n \n--- a/src/main/java/org/apache/commons/compress/archivers/tar/TarArchiveOutputStream.java\n+++ b/src/main/java/org/apache/commons/compress/archivers/tar/TarArchiveOutputStream.java\n                                             TarArchiveEntry entry) {\n         addPaxHeaderForBigNumber(paxHeaders, \"size\", entry.getSize(),\n                                  TarConstants.MAXSIZE);\n-        addPaxHeaderForBigNumber(paxHeaders, \"gid\", entry.getGroupId(),\n+        addPaxHeaderForBigNumber(paxHeaders, \"gid\", entry.getLongGroupId(),\n                                  TarConstants.MAXID);\n         addPaxHeaderForBigNumber(paxHeaders, \"mtime\",\n                                  entry.getModTime().getTime() / 1000,\n                                  TarConstants.MAXSIZE);\n-        addPaxHeaderForBigNumber(paxHeaders, \"uid\", entry.getUserId(),\n+        addPaxHeaderForBigNumber(paxHeaders, \"uid\", entry.getLongUserId(),\n                                  TarConstants.MAXID);\n         // star extensions by J\\u00f6rg Schilling\n         addPaxHeaderForBigNumber(paxHeaders, \"SCHILY.devmajor\",\n \n     private void failForBigNumbers(TarArchiveEntry entry) {\n         failForBigNumber(\"entry size\", entry.getSize(), TarConstants.MAXSIZE);\n-        failForBigNumberWithPosixMessage(\"group id\", entry.getGroupId(), TarConstants.MAXID);\n+        failForBigNumberWithPosixMessage(\"group id\", entry.getLongGroupId(), TarConstants.MAXID);\n         failForBigNumber(\"last modification time\",\n                          entry.getModTime().getTime() / 1000,\n                          TarConstants.MAXSIZE);\n-        failForBigNumber(\"user id\", entry.getUserId(), TarConstants.MAXID);\n+        failForBigNumber(\"user id\", entry.getLongUserId(), TarConstants.MAXID);\n         failForBigNumber(\"mode\", entry.getMode(), TarConstants.MAXID);\n         failForBigNumber(\"major device number\", entry.getDevMajor(),\n                          TarConstants.MAXID);", "timestamp": 1430886768, "metainfo": ""}