{"sha": "a5f7089f692e8bd46f817624eeee9129169197f2", "log": "COMPRESS-271 bad values for max blacksize flag", "commit": "\n--- a/src/main/java/org/apache/commons/compress/compressors/lz4/FramedLZ4CompressorOutputStream.java\n+++ b/src/main/java/org/apache/commons/compress/compressors/lz4/FramedLZ4CompressorOutputStream.java\n      */\n     public enum BlockSize {\n         /** Block size of 64K */\n-        K64(64 * 1024, 0),\n+        K64(64 * 1024, 4),\n         /** Block size of 256K */\n-        K256(256 * 1024, 1),\n+        K256(256 * 1024, 5),\n         /** Block size of 1M */\n-        M1(1024 * 1024, 2),\n+        M1(1024 * 1024, 6),\n         /** Block size of 4M */\n-        M4(1024 * 1024, 4);\n+        M4(1024 * 1024, 7);\n \n         private final int size, index;\n         private BlockSize(int size, int index) {\n         }\n         out.write(flags);\n         contentHash.update(flags);\n-        int bd = params.blockSize.getIndex() << 4;\n+        int bd = (params.blockSize.getIndex() << 4) & FramedLZ4CompressorInputStream.BLOCK_MAX_SIZE_MASK;\n         out.write(bd);\n         contentHash.update(bd);\n         out.write((int) ((contentHash.getValue() >> 8) & 0xff));", "timestamp": 1486496196, "metainfo": ""}