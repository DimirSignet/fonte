{"sha": "81a7b281ebf59f82befb0b04586e367ff4b06a1f", "log": "Some cleanups to ZCompressorInputStream.    ", "commit": "\n--- a/src/main/java/org/apache/commons/compress/compressors/z/ZCompressorInputStream.java\n+++ b/src/main/java/org/apache/commons/compress/compressors/z/ZCompressorInputStream.java\n     }\n     \n     private void addEntry(int previousEntry, byte character) throws IOException {\n-        if (tableSize >= ((1 << codeSize) - 1)) {\n-            if (tableSize == ((1 << codeSize) - 1)) {\n-                if (codeSize < maxCodeSize) {\n-                    reAlignReading();\n-                    codeSize++;\n-                    prefixes[tableSize] = previousEntry;\n-                    characters[tableSize] = character;\n-                    tableSize++;\n-                } else {\n-                    prefixes[tableSize] = previousEntry;\n-                    characters[tableSize] = character;\n-                    tableSize++;\n-                }\n-            }\n-        } else {\n+        final int maxTableSize = 1 << codeSize;\n+        if (tableSize < maxTableSize) {\n             prefixes[tableSize] = previousEntry;\n             characters[tableSize] = character;\n             tableSize++;\n+        }\n+        if (tableSize == maxTableSize) {\n+            if (codeSize < maxCodeSize) {\n+                reAlignReading();\n+                codeSize++;\n+            }\n         }\n     }\n \n         //  +---+---+---+---+---+---+---+---+---+---+\n         //  |<--------->|<------------->|<----->|<->|\n         //     symbol        symbol      symbol  symbol\n-        //\n-        // Symbols are indexes into a table of table entries. Indexes\n-        // sequentially increase up to the maximum size of the table.\n-        // The bit count used by each index increases up to the minimum\n-        // size needed the index the highest table entry.\n-        //\n-        // To construct a table entry for a symbol,\n-        // we need the symbol's text, and the first character of the\n-        // next symbol's text. When a symbol is the immediately previous\n-        // table entry's symbol, that symbol's text is the previous symbol's text + 1 character.\n-        //\n-        // The compression process adds table entries after writing the symbol.\n-        // Since adding entries can increase the code size, the \n         //\n         final int code = readNextCode();\n         if (code < 0) {", "timestamp": 1385906553, "metainfo": ""}