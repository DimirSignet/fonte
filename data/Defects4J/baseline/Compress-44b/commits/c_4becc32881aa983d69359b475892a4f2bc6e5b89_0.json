{"sha": "4becc32881aa983d69359b475892a4f2bc6e5b89", "log": "COMPRESS-187 - make empty comments compare equal to no comments in ZIP entries  ", "commit": "\n--- a/src/main/java/org/apache/commons/compress/archivers/zip/ZipArchiveEntry.java\n+++ b/src/main/java/org/apache/commons/compress/archivers/zip/ZipArchiveEntry.java\n         String myComment = getComment();\n         String otherComment = other.getComment();\n         if (myComment == null) {\n-            if (otherComment != null) {\n-                return false;\n-            }\n-        } else if (!myComment.equals(otherComment)) {\n-            return false;\n+            myComment = \"\";\n+        }\n+        if (otherComment == null) {\n+            otherComment = \"\";\n         }\n         return getTime() == other.getTime()\n+            && myComment.equals(otherComment)\n             && getInternalAttributes() == other.getInternalAttributes()\n             && getPlatform() == other.getPlatform()\n             && getExternalAttributes() == other.getExternalAttributes()\n--- a/src/test/java/org/apache/commons/compress/archivers/zip/ZipArchiveEntryTest.java\n+++ b/src/test/java/org/apache/commons/compress/archivers/zip/ZipArchiveEntryTest.java\n         ZipArchiveEntry entry2 = new ZipArchiveEntry(\"bar\");\n         assertFalse(entry1.equals(entry2));\n     }\n+\n+    /**\n+     * Tests comment's influence on equals comparisons.\n+     * @see https://issues.apache.org/jira/browse/COMPRESS-187\n+     */\n+    public void testNullCommentEqualsEmptyComment() {\n+        ZipArchiveEntry entry1 = new ZipArchiveEntry(\"foo\");\n+        ZipArchiveEntry entry2 = new ZipArchiveEntry(\"foo\");\n+        ZipArchiveEntry entry3 = new ZipArchiveEntry(\"foo\");\n+        entry1.setComment(null);\n+        entry2.setComment(\"\");\n+        entry3.setComment(\"bar\");\n+        assertEquals(entry1, entry2);\n+        assertFalse(entry1.equals(entry3));\n+        assertFalse(entry2.equals(entry3));\n+    }\n }", "timestamp": 1338737431, "metainfo": ""}