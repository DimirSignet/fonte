{"sha": "b265682a2b779df2bd81464544f6ff9f7ee0add9", "log": "Disallow mixed header formats in a single output file  ", "commit": "\n--- a/src/main/java/org/apache/commons/compress/archivers/cpio/CpioArchiveOutputStream.java\n+++ b/src/main/java/org/apache/commons/compress/archivers/cpio/CpioArchiveOutputStream.java\n \n     private boolean finished;\n \n+    /**\n+     * See {@link CpioArchiveEntry#setFormat(short)} for possible values.\n+     */\n     private final short entryFormat;\n \n     private final HashMap names = new HashMap();\n             e.setTime(System.currentTimeMillis());\n         }\n \n-        // TODO what happens if an entry has an other format than the\n-        // outputstream?\n-        if (e.getFormat() == -1) {\n+        final short format = e.getFormat();\n+        if (format == -1) {\n             e.setFormat(this.entryFormat);\n+        } else if (format != this.entryFormat){\n+            throw new IOException(\"Header format: \"+format+\" does not match existing format: \"+this.entryFormat);\n         }\n \n         if (this.names.put(e.getName(), e) != null) {", "timestamp": 1238083085, "metainfo": ""}