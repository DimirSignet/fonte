{"sha": "8c2e5e6914255b0b8703b350033f7f609bca63ff", "log": "add a finalize method to ZipFile as suggested on the user list  ", "commit": "\n--- a/src/main/java/org/apache/commons/compress/archivers/zip/ZipFile.java\n+++ b/src/main/java/org/apache/commons/compress/archivers/zip/ZipFile.java\n     private final boolean useUnicodeExtraFields;\n \n     /**\n+     * Whether the file is closed.\n+     */\n+    private boolean closed;\n+\n+    /**\n      * Opens the given file for reading, assuming \"UTF8\" for file names.\n      *\n      * @param f the archive.\n      * Closes the archive.\n      * @throws IOException if an error occurs closing the archive.\n      */\n-    public void close() throws IOException {\n-        archive.close();\n+    public synchronized void close() throws IOException {\n+        if (!closed) {\n+            closed = true;\n+            archive.close();\n+        }\n     }\n \n     /**\n             default:\n                 throw new ZipException(\"Found unsupported compression method \"\n                                        + ze.getMethod());\n+        }\n+    }\n+\n+    /**\n+     * Ensures that the close method of this zipfile is called when\n+     * there are no more references to it.\n+     * @see close()\n+     */\n+    protected void finalize() throws Throwable {\n+        try {\n+            close();\n+        } finally {\n+            super.finalize();\n         }\n     }\n ", "timestamp": 1303100894, "metainfo": ""}