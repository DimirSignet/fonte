{"sha": "8a4ea62fe7fab06f6b3bb311b43c5fed3cfce3d8", "log": "COMPRESS-296 Parallel compression. Add support for cloning ZipArchiveOutputStream  With these changes it is possible to realize parallel compression. There is one more class coming that coordinates it all  ", "commit": "\n--- a/src/main/java/org/apache/commons/compress/archivers/zip/ZipArchiveOutputStream.java\n+++ b/src/main/java/org/apache/commons/compress/archivers/zip/ZipArchiveOutputStream.java\n         putArchiveEntry(ae);\n         copyFromZipInputStream(rawStream);\n         closeCopiedEntry();\n+    }\n+\n+    /**\n+     * Make a copy of this stream with all its settings, but point to a new file.\n+     * Used for scatter/gather operations to make several streams from a user-supplied master.\n+     *\n+     * @param newFile The file to use for the copy of this stream\n+     * @return A copy of this stream\n+     */\n+    public ZipArchiveOutputStream cloneWith(File newFile) throws IOException {\n+        ZipArchiveOutputStream zos = new ZipArchiveOutputStream(newFile);\n+        zos.setCreateUnicodeExtraFields(createUnicodeExtraFields);\n+        zos.setMethod(method);\n+        zos.setEncoding(encoding);\n+        zos.setFallbackToUTF8(fallbackToUTF8);\n+        zos.setUseLanguageEncodingFlag(useUTF8Flag);\n+        zos.setUseZip64(zip64Mode);\n+        return zos;\n     }\n \n     /**\n--- a/src/test/java/org/apache/commons/compress/archivers/ZipTestCase.java\n+++ b/src/test/java/org/apache/commons/compress/archivers/ZipTestCase.java\n     };\n \n \n+    public void testCloneZipOutputStream( ) throws IOException {\n+        File tempDir = createTempDir();\n+        File fred = new File(tempDir, \"fred\");\n+        ZipArchiveOutputStream zipArchiveOutputStream = new ZipArchiveOutputStream(fred);\n+        File frank = new File(tempDir, \"frank\");\n+        ZipArchiveOutputStream actual = zipArchiveOutputStream.cloneWith(frank);\n+        zipArchiveOutputStream.close();\n+        actual.close();\n+        assertTrue( fred.exists());\n+        assertTrue( frank.exists());\n+    }\n+\n     public void testCopyRawEntriesFromFile\n             ()\n             throws IOException {", "timestamp": 1418936280, "metainfo": ""}