{"sha": "408b4a54f66e2143165745f14fdc6382e2c704fa", "log": "add a test for unshrinking support in ZipFile  ", "commit": "\n--- a/src/test/java/org/apache/commons/compress/archivers/zip/ZipFileTest.java\n+++ b/src/test/java/org/apache/commons/compress/archivers/zip/ZipFileTest.java\n package org.apache.commons.compress.archivers.zip;\n \n import static org.apache.commons.compress.AbstractTestCase.getFile;\n+import static org.junit.Assert.assertArrayEquals;\n \n import java.io.File;\n+import java.io.FileInputStream;\n import java.io.FileOutputStream;\n import java.io.InputStream;\n import java.io.OutputStream;\n import java.util.zip.ZipEntry;\n \n import junit.framework.TestCase;\n+import org.apache.commons.compress.utils.IOUtils;\n \n public class ZipFileTest extends TestCase {\n     private ZipFile zf = null;\n         assertEquals(26101, ze.getSize());\n     }\n \n+    public void testUnshrinking() throws Exception {\n+        zf = new ZipFile(getFile(\"SHRUNK.ZIP\"));\n+        ZipArchiveEntry test = zf.getEntry(\"TEST1.XML\");\n+        FileInputStream original = new FileInputStream(getFile(\"test1.xml\"));\n+        try {\n+            assertArrayEquals(IOUtils.toByteArray(original),\n+                              IOUtils.toByteArray(zf.getInputStream(test)));\n+        } finally {\n+            original.close();\n+        }\n+        test = zf.getEntry(\"TEST2.XML\");\n+        original = new FileInputStream(getFile(\"test2.xml\"));\n+        try {\n+            assertArrayEquals(IOUtils.toByteArray(original),\n+                              IOUtils.toByteArray(zf.getInputStream(test)));\n+        } finally {\n+            original.close();\n+        }\n+    }\n+\n     /*\n      * ordertest.zip has been handcrafted.\n      *", "timestamp": 1387116223, "metainfo": ""}