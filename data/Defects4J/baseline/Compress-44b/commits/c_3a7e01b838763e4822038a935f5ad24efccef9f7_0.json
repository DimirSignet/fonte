{"sha": "3a7e01b838763e4822038a935f5ad24efccef9f7", "log": "Added more tests for CompressorStreamFactory  ", "commit": "\n--- a/src/test/java/org/apache/commons/compress/DetectCompressorTestCase.java\n+++ b/src/test/java/org/apache/commons/compress/DetectCompressorTestCase.java\n import static org.apache.commons.compress.AbstractTestCase.getFile;\n \n import java.io.BufferedInputStream;\n+import java.io.ByteArrayInputStream;\n import java.io.FileInputStream;\n import java.io.IOException;\n import junit.framework.TestCase;\n import org.apache.commons.compress.compressors.CompressorStreamFactory;\n import org.apache.commons.compress.compressors.bzip2.BZip2CompressorInputStream;\n import org.apache.commons.compress.compressors.gzip.GzipCompressorInputStream;\n+import org.apache.commons.compress.compressors.pack200.Pack200CompressorInputStream;\n+import org.apache.commons.compress.compressors.xz.XZCompressorInputStream;\n \n public final class DetectCompressorTestCase extends TestCase {\n \n         super(name);\n     }\n \n-    final ClassLoader classLoader = getClass().getClassLoader();\n     final CompressorStreamFactory factory = new CompressorStreamFactory();\n \n     public void testDetection() throws Exception {\n-\n-        final CompressorInputStream bzip2 = getStreamFor(\"bla.txt.bz2\"); \n+        CompressorInputStream bzip2 = getStreamFor(\"bla.txt.bz2\"); \n         assertNotNull(bzip2);\n         assertTrue(bzip2 instanceof BZip2CompressorInputStream);\n \n-        final CompressorInputStream gzip = getStreamFor(\"bla.tgz\");\n+        CompressorInputStream gzip = getStreamFor(\"bla.tgz\");\n         assertNotNull(gzip);\n         assertTrue(gzip instanceof GzipCompressorInputStream);\n+        \n+        CompressorInputStream pack200 = getStreamFor(\"bla.pack\");\n+        assertNotNull(pack200);\n+        assertTrue(pack200 instanceof Pack200CompressorInputStream);\n \n+        CompressorInputStream xz = getStreamFor(\"bla.tar.xz\");\n+        assertNotNull(xz);\n+        assertTrue(xz instanceof XZCompressorInputStream);\n+\n+        try {\n+            factory.createCompressorInputStream(new ByteArrayInputStream(new byte[0]));\n+            fail(\"No exception thrown for an empty input stream\");\n+        } catch (CompressorException e) {\n+            // expected\n+        }\n     }\n \n     private CompressorInputStream getStreamFor(String resource)", "timestamp": 1375885880, "metainfo": ""}