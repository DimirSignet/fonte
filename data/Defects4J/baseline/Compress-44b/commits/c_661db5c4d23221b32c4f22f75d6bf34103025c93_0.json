{"sha": "661db5c4d23221b32c4f22f75d6bf34103025c93", "log": "Fixed the decompression of imploded zip entries using a Shannon-Fano tree of depth 16  ", "commit": "\n--- a/src/main/java/org/apache/commons/compress/archivers/zip/BinaryTree.java\n+++ b/src/main/java/org/apache/commons/compress/archivers/zip/BinaryTree.java\n      * @return the value decoded, or -1 if the end of the stream is reached\n      */\n     public int read(BitStream stream) throws IOException {\n-        short currentIndex = 0;\n+        int currentIndex = 0;\n \n         while (true) {\n             int bit = stream.nextBit();\n                 return -1;\n             }\n \n-            short childIndex = (short) (2 * currentIndex + 1 + bit);\n+            int childIndex = 2 * currentIndex + 1 + bit;\n             int value = tree[childIndex];\n             if (value == NODE) {\n                 // consume the next bit\n--- a/src/test/java/org/apache/commons/compress/archivers/zip/ExplodeSupportTest.java\n+++ b/src/test/java/org/apache/commons/compress/archivers/zip/ExplodeSupportTest.java\n         testArchiveWithImplodeCompression(\"target/test-classes/archives/imploding-8Kdict-3trees.zip\", \"LICENSE.TXT\");\n     }\n \n-    public void XtestTikaTestArchive() throws IOException {\n-        testArchiveWithImplodeCompression(\"target/test-classes/tika-moby.zip\", \"README\");\n+    public void testTikaTestArchive() throws IOException {\n+        testArchiveWithImplodeCompression(\"target/test-classes/moby-imploded.zip\", \"README\");\n     }\n \n     private void testZipStreamWithImplodeCompression(String filename, String entryName) throws IOException {\n         testZipStreamWithImplodeCompression(\"target/test-classes/archives/imploding-8Kdict-3trees.zip\", \"LICENSE.TXT\");\n     }\n \n-    public void XtestTikaTestStream() throws IOException {\n-        testZipStreamWithImplodeCompression(\"target/test-classes/tika-moby.zip\", \"README\");\n+    public void testTikaTestStream() throws IOException {\n+        testZipStreamWithImplodeCompression(\"target/test-classes/moby-imploded.zip\", \"README\");\n     }\n \n }", "timestamp": 1387751652, "metainfo": ""}