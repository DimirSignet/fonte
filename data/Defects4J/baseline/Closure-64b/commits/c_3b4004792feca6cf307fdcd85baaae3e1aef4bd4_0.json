{"sha": "3b4004792feca6cf307fdcd85baaae3e1aef4bd4", "log": "improve the open-source command line parsing a bit.  R=johnlenz DELTA=19  (17 added, 0 deleted, 2 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=259520   ", "commit": "\n--- a/src/com/google/javascript/jscomp/CommandLineRunner.java\n+++ b/src/com/google/javascript/jscomp/CommandLineRunner.java\n \n   private static class Flags {\n     @Option(name = \"--help\",\n+        handler = BooleanOptionHandler.class,\n         usage = \"Displays this message\")\n     private boolean display_help = false;\n \n     private boolean print_ast = false;\n \n     @Option(name = \"--print_pass_graph\",\n+        handler = BooleanOptionHandler.class,\n         usage = \"Prints a dot file describing the passes that will get run\"\n         + \" and exits\")\n     private boolean print_pass_graph = false;\n     private String output_manifest = \"\";\n \n     @Option(name = \"--version\",\n+        handler = BooleanOptionHandler.class,\n         usage = \"Prints the compiler version to stderr.\")\n     private boolean version = false;\n \n           } else if (FALSES.contains(lowerParam)) {\n             setter.addValue(false);\n           } else {\n-            throw new CmdLineException(owner,\n-               \"Illegal boolean value: \" + lowerParam);\n+            setter.addValue(true);\n+            return 0;\n           }\n           return 1;\n         }\n--- a/test/com/google/javascript/jscomp/CommandLineRunnerTest.java\n+++ b/test/com/google/javascript/jscomp/CommandLineRunnerTest.java\n         \"Foo.x = 1;\" +\n         \"function f() {throw new Foo().x;} f();\",\n         \"throw (new function Foo() {}).$x$;\");\n+  }\n+\n+  public void testBooleanFlag1() {\n+    args.add(\"--compilation_level=SIMPLE_OPTIMIZATIONS\");\n+    args.add(\"--debug\");\n+    test(\"function foo(a) {alert(a)}\",\n+         \"function foo($a$$) {alert($a$$)}\");\n+  }\n+\n+  public void testBooleanFlag2() {\n+    args.add(\"--debug\");\n+    args.add(\"--compilation_level=SIMPLE_OPTIMIZATIONS\");\n+    test(\"function foo(a) {alert(a)}\",\n+         \"function foo($a$$) {alert($a$$)}\");\n   }\n \n   public void testHelpFlag() {", "timestamp": 1285602636, "metainfo": ""}