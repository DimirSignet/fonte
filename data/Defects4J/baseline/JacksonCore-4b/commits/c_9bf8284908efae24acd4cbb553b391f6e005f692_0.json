{"sha": "9bf8284908efae24acd4cbb553b391f6e005f692", "log": "Checking in actual fix for #146", "commit": "\n--- a/src/main/java/com/fasterxml/jackson/core/json/ReaderBasedJsonParser.java\n+++ b/src/main/java/com/fasterxml/jackson/core/json/ReaderBasedJsonParser.java\n             if (ch == INT_MINUS || ch == INT_PLUS) { // yup, skip for now\n                 if (ptr >= inputLen) {\n                     _inputPtr = startPtr;\n-                    return _parseNumber2(false, startPtr);\n+                    return _parseNumber2(neg, startPtr);\n                 }\n                 ch = (int) _inputBuffer[ptr++];\n             }\n--- a/src/test/java/com/fasterxml/jackson/core/main/TestNumberParsing.java\n+++ b/src/test/java/com/fasterxml/jackson/core/main/TestNumberParsing.java\n package com.fasterxml.jackson.core.main;\n \n-import java.io.CharArrayReader;\n+import java.io.*;\n \n import com.fasterxml.jackson.core.*;\n import com.fasterxml.jackson.core.io.NumberInput;\n         assertFalse(NumberInput.inLongRange(cbuf, 0, cbuf.length, false));\n     }\n \n-    public void testFloatBoundary146() throws Exception\n+    public void testFloatBoundary146Chars() throws Exception\n     {\n         final char[] arr = new char[50005];\n         final JsonFactory f = new JsonFactory();\n           p.close();\n         }        \n     }\n+\n+    public void testFloatBoundary146Bytes() throws Exception\n+    {\n+        final byte[] arr = new byte[50005];\n+        final JsonFactory f = new JsonFactory();\n+        for(int i = 500; i != 9000; ++i) {\n+          java.util.Arrays.fill(arr, 0, i, (byte) 0x20);\n+          arr[i] = '-';\n+          arr[i + 1] = '1';\n+          arr[i + 2] = 'e';\n+          arr[i + 3] = '-';\n+          arr[i + 4] = '1';\n+          ByteArrayInputStream in = new ByteArrayInputStream(arr, 0, i+5);\n+          JsonParser p = f.createParser(in);\n+          assertToken(JsonToken.VALUE_NUMBER_FLOAT, p.nextToken());\n+          p.close();\n+        }        \n+    }\n }", "timestamp": 1407732382, "metainfo": ""}