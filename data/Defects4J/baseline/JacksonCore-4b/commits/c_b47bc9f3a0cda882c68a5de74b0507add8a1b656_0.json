{"sha": "b47bc9f3a0cda882c68a5de74b0507add8a1b656", "log": "Merge pull request #39 from fge/master  Fix two FindBugs items", "commit": "\n--- a/src/main/java/com/fasterxml/jackson/core/util/DefaultPrettyPrinter.java\n+++ b/src/main/java/com/fasterxml/jackson/core/util/DefaultPrettyPrinter.java\n     {\n         private static final long serialVersionUID = 1L;\n \n-        public static NopIndenter instance = new NopIndenter();\n+        public static final NopIndenter instance = new NopIndenter();\n         \n         public NopIndenter() { }\n //      @Override\n     {\n         private static final long serialVersionUID = 1L;\n \n-        public static FixedSpaceIndenter instance = new FixedSpaceIndenter();\n+        public static final FixedSpaceIndenter instance = new FixedSpaceIndenter();\n \n         public FixedSpaceIndenter() { }\n \n     {\n         private static final long serialVersionUID = 1L;\n \n-        public static Lf2SpacesIndenter instance = new Lf2SpacesIndenter();\n+        public static final Lf2SpacesIndenter instance = new Lf2SpacesIndenter();\n \n         final static String SYSTEM_LINE_SEPARATOR;\n         static {\n--- a/src/main/java/com/fasterxml/jackson/core/util/VersionUtil.java\n+++ b/src/main/java/com/fasterxml/jackson/core/util/VersionUtil.java\n      */\n     public static Version versionFor(Class<?> cls)\n     {\n-        InputStream in;\n-        Version version = null;\n+        final InputStream in = cls.getResourceAsStream(VERSION_FILE);\n+\n+        if (in == null)\n+            return Version.unknownVersion();\n \n         try {\n-            in = cls.getResourceAsStream(VERSION_FILE);\n-            if (in != null) {\n+            InputStreamReader reader = new InputStreamReader(in, \"UTF-8\");\n+            try {\n+                return doReadVersion(reader);\n+            } finally {\n                 try {\n-                    BufferedReader br = new BufferedReader(new InputStreamReader(in, \"UTF-8\"));\n-                    String groupStr = null, artifactStr = null;\n-                    String versionStr = br.readLine();\n-                    if (versionStr != null) {\n-                        groupStr = br.readLine();\n-                        if (groupStr != null) {\n-                            groupStr = groupStr.trim();\n-                            artifactStr = br.readLine();\n-                            if (artifactStr != null) {\n-                                artifactStr = artifactStr.trim();\n-                            }\n-                        }\n-                    }\n-                    version = parseVersion(versionStr, groupStr, artifactStr);\n-                } finally {\n-                    try {\n-                        in.close();\n-                    } catch (IOException e) {\n-                        throw new RuntimeException(e);\n-                    }\n+                    reader.close();\n+                } catch (IOException ignored) {\n                 }\n             }\n-        } catch (IOException e) { }\n-        return (version == null) ? Version.unknownVersion() : version;\n+        } catch (UnsupportedEncodingException e) {\n+            return Version.unknownVersion();\n+        } finally {\n+            try {\n+                in.close();\n+            } catch (IOException e) {\n+                throw new RuntimeException(e);\n+            }\n+        }\n+    }\n+\n+    private static Version doReadVersion(final Reader reader)\n+    {\n+        String version = null, group = null, artifact = null;\n+\n+        final BufferedReader br = new BufferedReader(reader);\n+        try {\n+            version = br.readLine();\n+            if (version != null) {\n+                group = br.readLine();\n+                if (group != null)\n+                    artifact = br.readLine();\n+            }\n+        } catch (IOException ignored) {\n+        } finally {\n+            try {\n+                br.close();\n+            } catch (IOException ignored) {\n+            }\n+        }\n+\n+        // We don't trim() version: parseVersion() takes care ot that\n+        if (group != null)\n+            group = group.trim();\n+        if (artifact != null)\n+            artifact = artifact.trim();\n+        return parseVersion(version, group, artifact);\n     }\n \n     /**", "timestamp": 1352831092, "metainfo": ""}