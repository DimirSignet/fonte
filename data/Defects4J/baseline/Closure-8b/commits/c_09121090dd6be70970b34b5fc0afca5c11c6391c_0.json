{"sha": "09121090dd6be70970b34b5fc0afca5c11c6391c", "log": "Correct handling of variable declarations for-in expressions.  R=acleung DELTA=7  (6 added, 0 deleted, 1 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=1309   ", "commit": "\n--- a/src/com/google/javascript/jscomp/GroupVariableDeclarations.java\n+++ b/src/com/google/javascript/jscomp/GroupVariableDeclarations.java\n     // we will be modifying the groupVar subtree so get its parent\n     Node groupVarParent = groupVar.getParent();\n \n+\n     if (initializedName != null) {\n+      if (NodeUtil.isForIn(groupVarParent)) {\n+        // The target of the for-in expression must be an assignable expression.\n+        return;\n+      }\n+\n       // we have an initialized var in the VAR node. We will replace the\n       // VAR node with an assignment.\n \n--- a/test/com/google/javascript/jscomp/GroupVariableDeclarationsTest.java\n+++ b/test/com/google/javascript/jscomp/GroupVariableDeclarationsTest.java\n     test(\"var a; for (var z in a = [1, 2, 3, 4]) {alert(z);} var y, x = 5;\",\n          \"var a, z, y, x; for (z in a = [1, 2, 3, 4]) {alert(z);} x = 5;\");\n     test(\"var a; for (var z = 1 in a = [1, 2, 3, 4]) {alert(z);} var y, x = 5;\",\n-         \"var a, z, y, x; for (z = 1 in a = [1, 2, 3, 4]) {alert(z);} x = 5;\");\n+         \"var a, y, x; for (var z = 1 in a = [1, 2, 3, 4]) {alert(z);} x = 5;\");\n     test(\"var a, z; for (z in a = [1, 2, 3, 4]) {alert(z);} var y, x = 5;\",\n          \"var a, z, y, x; for (z in a = [1, 2, 3, 4]) {alert(z);} x = 5;\");\n   }", "timestamp": 1302303110, "metainfo": ""}