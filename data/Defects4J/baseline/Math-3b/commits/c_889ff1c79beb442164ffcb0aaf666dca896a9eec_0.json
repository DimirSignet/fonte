{"sha": "889ff1c79beb442164ffcb0aaf666dca896a9eec", "log": "ArrayFieldVector can now be constructed from any FieldVector.  Thanks to Arne Pl\u00f6se.  JIRA: MATH-570  ", "commit": "\n--- a/src/main/java/org/apache/commons/math3/linear/ArrayFieldVector.java\n+++ b/src/main/java/org/apache/commons/math3/linear/ArrayFieldVector.java\n      * @param v2 Second vector (will be put at back of the new vector).\n      * @throws NullArgumentException if {@code v1} or {@code v2} is\n      * {@code null}.\n-     */\n+     * @deprecated as of 3.2, replaced by {@link #ArrayFieldVector(FieldVector, FieldVector)}\n+     */\n+    @Deprecated\n     public ArrayFieldVector(ArrayFieldVector<T> v1, ArrayFieldVector<T> v2)\n             throws NullArgumentException {\n-        MathUtils.checkNotNull(v1);\n-        MathUtils.checkNotNull(v2);\n-        field = v1.getField();\n-        data = MathArrays.buildArray(field, v1.data.length + v2.data.length);\n-        System.arraycopy(v1.data, 0, data, 0, v1.data.length);\n-        System.arraycopy(v2.data, 0, data, v1.data.length, v2.data.length);\n+        this((FieldVector<T>) v1, (FieldVector<T>) v2);\n     }\n \n     /**\n      * @param v2 Second vector (will be put at back of the new vector).\n      * @throws NullArgumentException if {@code v1} or {@code v2} is\n      * {@code null}.\n-     */\n-    public ArrayFieldVector(ArrayFieldVector<T> v1, T[] v2)\n+     * @since 3.2\n+     */\n+    public ArrayFieldVector(FieldVector<T> v1, FieldVector<T> v2)\n             throws NullArgumentException {\n         MathUtils.checkNotNull(v1);\n         MathUtils.checkNotNull(v2);\n         field = v1.getField();\n-        data = MathArrays.buildArray(field, v1.data.length + v2.length);\n-        System.arraycopy(v1.data, 0, data, 0, v1.data.length);\n-        System.arraycopy(v2, 0, data, v1.data.length, v2.length);\n+        final T[] v1Data =\n+                (v1 instanceof ArrayFieldVector) ? ((ArrayFieldVector<T>) v1).data : v1.toArray();\n+        final T[] v2Data =\n+                (v2 instanceof ArrayFieldVector) ? ((ArrayFieldVector<T>) v2).data : v2.toArray();\n+        data = MathArrays.buildArray(field, v1Data.length + v2Data.length);\n+        System.arraycopy(v1Data, 0, data, 0, v1Data.length);\n+        System.arraycopy(v2Data, 0, data, v1Data.length, v2Data.length);\n     }\n \n     /**\n      * @param v2 Second vector (will be put at back of the new vector).\n      * @throws NullArgumentException if {@code v1} or {@code v2} is\n      * {@code null}.\n-     */\n+     * @deprecated as of 3.2, replaced by {@link #ArrayFieldVector(FieldVector, FieldElement[])\n+     */\n+    @Deprecated\n+    public ArrayFieldVector(ArrayFieldVector<T> v1, T[] v2)\n+            throws NullArgumentException {\n+        this((FieldVector<T>) v1, v2);\n+    }\n+\n+    /**\n+     * Construct a vector by appending one vector to another vector.\n+     *\n+     * @param v1 First vector (will be put in front of the new vector).\n+     * @param v2 Second vector (will be put at back of the new vector).\n+     * @throws NullArgumentException if {@code v1} or {@code v2} is\n+     * {@code null}.\n+     */\n+    public ArrayFieldVector(FieldVector<T> v1, T[] v2)\n+            throws NullArgumentException {\n+        MathUtils.checkNotNull(v1);\n+        MathUtils.checkNotNull(v2);\n+        field = v1.getField();\n+        final T[] v1Data =\n+                (v1 instanceof ArrayFieldVector) ? ((ArrayFieldVector<T>) v1).data : v1.toArray();\n+        data = MathArrays.buildArray(field, v1Data.length + v2.length);\n+        System.arraycopy(v1Data, 0, data, 0, v1Data.length);\n+        System.arraycopy(v2, 0, data, v1Data.length, v2.length);\n+    }\n+\n+    /**\n+     * Construct a vector by appending one vector to another vector.\n+     *\n+     * @param v1 First vector (will be put in front of the new vector).\n+     * @param v2 Second vector (will be put at back of the new vector).\n+     * @throws NullArgumentException if {@code v1} or {@code v2} is\n+     * {@code null}.\n+     * @deprecated as of 3.2, replaced by {@link #ArrayFieldVector(FieldElement[], FieldVector)\n+     */\n+    @Deprecated\n     public ArrayFieldVector(T[] v1, ArrayFieldVector<T> v2)\n+            throws NullArgumentException {\n+        this(v1, (FieldVector<T>) v2);\n+    }\n+\n+    /**\n+     * Construct a vector by appending one vector to another vector.\n+     *\n+     * @param v1 First vector (will be put in front of the new vector).\n+     * @param v2 Second vector (will be put at back of the new vector).\n+     * @throws NullArgumentException if {@code v1} or {@code v2} is\n+     * {@code null}.\n+     */\n+    public ArrayFieldVector(T[] v1, FieldVector<T> v2)\n             throws NullArgumentException {\n         MathUtils.checkNotNull(v1);\n         MathUtils.checkNotNull(v2);\n         field = v2.getField();\n-        data = MathArrays.buildArray(field, v1.length + v2.data.length);\n+        final T[] v2Data =\n+                (v2 instanceof ArrayFieldVector) ? ((ArrayFieldVector<T>) v2).data : v2.toArray();\n+        data = MathArrays.buildArray(field, v1.length + v2Data.length);\n         System.arraycopy(v1, 0, data, 0, v1.length);\n-        System.arraycopy(v2.data, 0, data, v1.length, v2.data.length);\n+        System.arraycopy(v2Data, 0, data, v1.length, v2Data.length);\n     }\n \n     /**", "timestamp": 1363024512, "metainfo": ""}