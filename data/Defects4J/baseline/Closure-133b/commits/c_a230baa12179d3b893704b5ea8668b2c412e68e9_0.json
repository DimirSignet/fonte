{"sha": "a230baa12179d3b893704b5ea8668b2c412e68e9", "log": "Use @throws when identifying side effects  R=johnlenz DELTA=13  (13 added, 0 deleted, 0 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=5734   ", "commit": "\n--- a/src/com/google/javascript/jscomp/PureFunctionIdentifier.java\n+++ b/src/com/google/javascript/jscomp/PureFunctionIdentifier.java\n           }\n         }\n \n+        if (inExterns && !info.getThrownTypes().isEmpty()) {\n+          hasSpecificSideEffects = true;\n+          sideEffectInfo.setFunctionThrows();\n+        }\n+\n         if (!hasSpecificSideEffects) {\n           if (hasNoSideEffectsAnnotation(info)) {\n             if (inExterns) {\n--- a/test/com/google/javascript/jscomp/CommandLineRunnerTest.java\n+++ b/test/com/google/javascript/jscomp/CommandLineRunnerTest.java\n         + \"/**\\n\"\n         + \" * @constructor\\n\"\n         + \" * @param {...*} var_args\\n\"\n+        + \" * @nosideeffects\\n\"\n+        + \" * @throws {Error}\\n\"\n         + \" */\\n\"\n         + \"function Function(var_args) {}\\n\"\n         + \"/**\\n\"\n          \"window.f=function(){return'\\\\u000B'=='v'}\");\n   }\n \n+  public void testIssue846() {\n+    args.add(\"--compilation_level=ADVANCED_OPTIMIZATIONS\");\n+    testSame(\n+        \"try { new Function('this is an error'); } catch(a) { alert('x'); }\");\n+  }\n+\n   public void testDebugFlag1() {\n     args.add(\"--compilation_level=SIMPLE_OPTIMIZATIONS\");\n     args.add(\"--debug=false\");", "timestamp": 1351870181, "metainfo": ""}