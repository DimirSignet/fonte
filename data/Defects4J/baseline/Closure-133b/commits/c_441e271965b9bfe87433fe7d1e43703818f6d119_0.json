{"sha": "441e271965b9bfe87433fe7d1e43703818f6d119", "log": "Do type checks for obj lits annotated with @dict  R=johnlenz DELTA=15  (14 added, 0 deleted, 1 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=5720   ", "commit": "\n--- a/src/com/google/javascript/rhino/jstype/JSType.java\n+++ b/src/com/google/javascript/rhino/jstype/JSType.java\n         return true;\n       }\n       FunctionType ctor = objType.getConstructor();\n-      return ctor != null && ctor.makesDicts();\n+      // This test is true for object literals\n+      if (ctor == null) {\n+        JSDocInfo info = objType.getJSDocInfo();\n+        return info != null && info.makesDicts();\n+      } else {\n+        return ctor.makesDicts();\n+      }\n     }\n     return false;\n   }\n--- a/test/com/google/javascript/jscomp/TypeCheckTest.java\n+++ b/test/com/google/javascript/jscomp/TypeCheckTest.java\n               \"function Bar() {}\\n\" +\n               \"Bar.prototype = new Foo();\\n\" +\n               \"Bar.prototype.someprop = 123;\\n\",\n+              \"Cannot do '.' access on a dict\");\n+  }\n+\n+  public void testGetpropDict7() throws Exception {\n+    testTypes(\"(/** @dict */ {x: 123}).x = 321;\",\n               \"Cannot do '.' access on a dict\");\n   }\n ", "timestamp": 1351564779, "metainfo": ""}