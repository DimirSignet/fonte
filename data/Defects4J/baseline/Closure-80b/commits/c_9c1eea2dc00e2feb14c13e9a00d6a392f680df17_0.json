{"sha": "9c1eea2dc00e2feb14c13e9a00d6a392f680df17", "log": "make the externs validations default to WARNING  R=johnlenz DELTA=19  (5 added, 0 deleted, 14 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=195036   ", "commit": "\n--- a/src/com/google/javascript/jscomp/VarCheck.java\n+++ b/src/com/google/javascript/jscomp/VarCheck.java\n       \"accessing name {0} in externs has no effect\");\n \n   static final DiagnosticType UNDEFINED_EXTERN_VAR_ERROR =\n-    DiagnosticType.error(\n+    DiagnosticType.warning(\n       \"JSC_UNDEFINED_EXTERN_VAR_ERROR\",\n       \"name {0} is not undefined in the externs.\");\n \n--- a/test/com/google/javascript/jscomp/VarCheckTest.java\n+++ b/test/com/google/javascript/jscomp/VarCheckTest.java\n   private CheckLevel strictModuleDepErrorLevel;\n   private boolean sanityCheck = false;\n \n-  private CheckLevel externValidationpErrorLevel;\n+  private CheckLevel externValidationErrorLevel;\n \n   public VarCheckTest() {\n     super(EXTERNS);\n   protected void setUp() throws Exception {\n     super.setUp();\n     strictModuleDepErrorLevel = CheckLevel.OFF;\n-    externValidationpErrorLevel = CheckLevel.ERROR;\n+    externValidationErrorLevel = null;\n     sanityCheck = false;\n   }\n \n     CompilerOptions options = super.getOptions();\n     options.setWarningLevel(DiagnosticGroups.STRICT_MODULE_DEP_CHECK,\n         strictModuleDepErrorLevel);\n-    options.setWarningLevel(DiagnosticGroups.EXTERNS_VALIDATION,\n-        externValidationpErrorLevel);\n+    if (externValidationErrorLevel != null) {\n+     options.setWarningLevel(DiagnosticGroups.EXTERNS_VALIDATION,\n+         externValidationErrorLevel);\n+    }\n     return options;\n   }\n \n \n   public void testPropReferenceInExterns1() {\n     testSame(\"asdf.foo;\", \"var asdf;\",\n-        VarCheck.UNDEFINED_EXTERN_VAR_ERROR, true);\n+        VarCheck.UNDEFINED_EXTERN_VAR_ERROR);\n   }\n \n   public void testPropReferenceInExterns2() {\n     testSame(\"asdf.foo;\", \"\",\n-        VarCheck.UNDEFINED_EXTERN_VAR_ERROR, true);\n+        VarCheck.UNDEFINED_VAR_ERROR, true);\n   }\n \n   public void testPropReferenceInExterns3() {\n-    externValidationpErrorLevel = CheckLevel.WARNING;\n-    test(\"asdf.foo;\", \"\", \"\",\n-        VarCheck.UNDEFINED_VAR_ERROR, VarCheck.UNDEFINED_EXTERN_VAR_ERROR);\n-\n-    externValidationpErrorLevel = CheckLevel.OFF;\n-    test(\"asdf.foo;\", \"\", \"\",\n-        VarCheck.UNDEFINED_VAR_ERROR, null);\n+    testSame(\"asdf.foo;\", \"var asdf;\",\n+        VarCheck.UNDEFINED_EXTERN_VAR_ERROR);\n+\n+    externValidationErrorLevel = CheckLevel.ERROR;\n+    test(\n+        \"asdf.foo;\", \"var asdf;\", \"\",\n+         VarCheck.UNDEFINED_EXTERN_VAR_ERROR, null);\n+\n+    externValidationErrorLevel = CheckLevel.OFF;\n+    test(\"asdf.foo;\", \"var asdf;\", \"var asdf;\", null, null);\n   }\n \n   public void testVarInWithBlock() {", "timestamp": 1282848273, "metainfo": ""}