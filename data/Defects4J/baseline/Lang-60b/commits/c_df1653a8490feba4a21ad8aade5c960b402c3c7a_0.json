{"sha": "df1653a8490feba4a21ad8aade5c960b402c3c7a", "log": "Ensure classes are the same in Enum.compareTo  ", "commit": "\n--- a/src/java/org/apache/commons/lang/enums/Enum.java\n+++ b/src/java/org/apache/commons/lang/enums/Enum.java\n /*\n- * Copyright 2002-2005 The Apache Software Foundation.\n+ * Copyright 2002-2006 The Apache Software Foundation.\n  * \n  * Licensed under the Apache License, Version 2.0 (the \"License\");\n  * you may not use this file except in compliance with the License.\n             if (other.getClass().getName().equals(this.getClass().getName())) {\n                 return iName.compareTo( getNameInOtherClassLoader(other) );\n             }\n+            throw new ClassCastException(\n+                    \"Different enum class '\" + ClassUtils.getShortClassName(other.getClass()) + \"'\");\n         }\n         return iName.compareTo(((Enum) other).iName);\n     }\n--- a/src/test/org/apache/commons/lang/enums/EnumEqualsTest.java\n+++ b/src/test/org/apache/commons/lang/enums/EnumEqualsTest.java\n         assertEquals(false, TrafficlightColorEnum.RED.equals(new TotallyUnrelatedClass(\"some\")));\n         assertEquals(false, CarColorEnum.RED.equals(new TotallyUnrelatedClass(\"some\")));\n     }\n+\n+    //-----------------------------------------------------------------------\n+    public void testCompareTo() {\n+        try {\n+            CarColorEnum.RED.compareTo(TrafficlightColorEnum.RED);\n+            fail();\n+        } catch (ClassCastException ex) {}\n+        try {\n+            CarColorEnum.YELLOW.compareTo(TrafficlightColorEnum.YELLOW);\n+            fail();\n+        } catch (ClassCastException ex) {}\n+        try {\n+            TrafficlightColorEnum.RED.compareTo(new TotallyUnrelatedClass(\"red\"));\n+            fail();\n+        } catch (ClassCastException ex) {}\n+        try {\n+            CarColorEnum.RED.compareTo(new TotallyUnrelatedClass(\"red\"));\n+            fail();\n+        } catch (ClassCastException ex) {}\n+        try {\n+            TrafficlightColorEnum.RED.compareTo(new TotallyUnrelatedClass(\"some\"));\n+            fail();\n+        } catch (ClassCastException ex) {}\n+        try {\n+            CarColorEnum.RED.compareTo(new TotallyUnrelatedClass(\"some\"));\n+            fail();\n+        } catch (ClassCastException ex) {}\n+    }\n+\n }", "timestamp": 1155930686, "metainfo": ""}