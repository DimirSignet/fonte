{"sha": "883ffeef672c0f47f4b33858f361298316524785", "log": "Attaching Johann's fix to LANG-322 (via Ben's patch)  ", "commit": "\n--- a/src/java/org/apache/commons/lang/ClassUtils.java\n+++ b/src/java/org/apache/commons/lang/ClassUtils.java\n         if (className.length() == 0) {\n             return StringUtils.EMPTY;\n         }\n-        char[] chars = className.toCharArray();\n-        int lastDot = 0;\n-        for (int i = 0; i < chars.length; i++) {\n-            if (chars[i] == PACKAGE_SEPARATOR_CHAR) {\n-                lastDot = i + 1;\n-            } else if (chars[i] == INNER_CLASS_SEPARATOR_CHAR) {  // handle inner classes\n-                chars[i] = PACKAGE_SEPARATOR_CHAR;\n-            }\n-        }\n-        return new String(chars, lastDot, chars.length - lastDot);\n+\n+        int lastDotIdx = className.lastIndexOf(PACKAGE_SEPARATOR_CHAR);\n+        int innerIdx = className.indexOf(\n+                INNER_CLASS_SEPARATOR_CHAR, lastDotIdx == -1 ? 0 : lastDotIdx + 1);\n+        String out = className.substring(lastDotIdx + 1);\n+        if (innerIdx != -1) {\n+            out = out.replace(INNER_CLASS_SEPARATOR_CHAR, PACKAGE_SEPARATOR_CHAR);\n+        }\n+        return out;\n     }\n \n     // Package name", "timestamp": 1194921193, "metainfo": ""}