{"sha": "f2fc8ad39705ba058f1a5fa7102a96e4184a3836", "log": "Use new feature for implementing isSupported(); Javadoc  ", "commit": "\n--- a/src/main/java/org/apache/commons/lang3/CharEncoding.java\n+++ b/src/main/java/org/apache/commons/lang3/CharEncoding.java\n \n package org.apache.commons.lang3;\n \n-import java.io.UnsupportedEncodingException;\n+import java.nio.charset.Charset;\n+import java.nio.charset.IllegalCharsetNameException;\n \n /**\n- * <p>\n- * Character encoding names required of every implementation of the Java platform.\n- * </p>\n+ * <p>Character encoding names required of every implementation of the Java platform.</p>\n  * \n- * <p>\n- * According to <a href=\"http://java.sun.com/j2se/1.3/docs/api/java/lang/package-summary.html#charenc\">JRE character\n- * encoding names</a>:\n- * <p>\n- * <cite>Every implementation of the Java platform is required to support the following character encodings. Consult the\n- * release documentation for your implementation to see if any other encodings are supported.</cite>\n- * </p>\n- * </p>\n+ * <p>According to <a href=\"http://java.sun.com/j2se/1.3/docs/api/java/lang/package-summary.html#charenc\">JRE character\n+ * encoding names</a>:</p>\n  * \n- * @see <a href=\"http://java.sun.com/j2se/1.3/docs/api/java/lang/package-summary.html#charenc\">JRE character encoding\n- *      names</a>\n+ * <p><cite>Every implementation of the Java platform is required to support the following character encodings. Consult the\n+ * release documentation for your implementation to see if any other encodings are supported.</cite></p>\n+ * \n+ * @see <a href=\"http://download.oracle.com/javase/1.3/docs/guide/intl/encoding.doc.html\">JRE character encoding names</a>\n  * @author Apache Software Foundation\n  * @since 2.1\n  * @version $Id$\n public class CharEncoding {\n \n     /**\n-     * <p>\n-     * ISO Latin Alphabet #1, also known as ISO-LATIN-1.\n-     * </p>\n-     * <p>\n-     * Every implementation of the Java platform is required to support this character encoding.\n-     * </p>\n+     * <p>ISO Latin Alphabet #1, also known as ISO-LATIN-1.</p>\n      * \n-     * @see <a href=\"http://java.sun.com/j2se/1.3/docs/api/java/lang/package-summary.html#charenc\">JRE character\n-     *      encoding names</a>\n+     * <p>Every implementation of the Java platform is required to support this character encoding.</p>\n      */\n     public static final String ISO_8859_1 = \"ISO-8859-1\";\n \n     /**\n-     * <p>\n-     * Seven-bit ASCII, also known as ISO646-US, also known as the Basic Latin block of the Unicode character set.\n-     * </p>\n-     * <p>\n-     * Every implementation of the Java platform is required to support this character encoding.\n-     * </p>\n+     * <p>Seven-bit ASCII, also known as ISO646-US, also known as the Basic Latin block\n+     * of the Unicode character set.</p>\n      * \n-     * @see <a href=\"http://java.sun.com/j2se/1.3/docs/api/java/lang/package-summary.html#charenc\">JRE character\n-     *      encoding names</a>\n+     * <p>Every implementation of the Java platform is required to support this character encoding.</p>\n      */\n     public static final String US_ASCII = \"US-ASCII\";\n \n     /**\n-     * <p>\n-     * Sixteen-bit Unicode Transformation Format, byte order specified by a mandatory initial byte-order mark (either\n-     * order accepted on input, big-endian used on output).\n-     * </p>\n-     * <p>\n-     * Every implementation of the Java platform is required to support this character encoding.\n-     * </p>\n+     * <p>Sixteen-bit Unicode Transformation Format, byte order specified by a mandatory initial\n+     * byte-order mark (either order accepted on input, big-endian used on output).</p>\n      * \n-     * @see <a href=\"http://java.sun.com/j2se/1.3/docs/api/java/lang/package-summary.html#charenc\">JRE character\n-     *      encoding names</a>\n+     * <p>Every implementation of the Java platform is required to support this character encoding.</p>\n      */\n     public static final String UTF_16 = \"UTF-16\";\n \n     /**\n-     * <p>\n-     * Sixteen-bit Unicode Transformation Format, big-endian byte order.\n-     * </p>\n-     * <p>\n-     * Every implementation of the Java platform is required to support this character encoding.\n-     * </p>\n+     * <p>Sixteen-bit Unicode Transformation Format, big-endian byte order.</p>\n      * \n-     * @see <a href=\"http://java.sun.com/j2se/1.3/docs/api/java/lang/package-summary.html#charenc\">JRE character\n-     *      encoding names</a>\n+     * <p>Every implementation of the Java platform is required to support this character encoding.</p>\n      */\n     public static final String UTF_16BE = \"UTF-16BE\";\n \n     /**\n-     * <p>\n-     * Sixteen-bit Unicode Transformation Format, little-endian byte order.\n-     * </p>\n-     * <p>\n-     * Every implementation of the Java platform is required to support this character encoding.\n-     * </p>\n+     * <p>Sixteen-bit Unicode Transformation Format, little-endian byte order.</p>\n      * \n-     * @see <a href=\"http://java.sun.com/j2se/1.3/docs/api/java/lang/package-summary.html#charenc\">JRE character\n-     *      encoding names</a>\n+     * <p>Every implementation of the Java platform is required to support this character encoding.</p>\n      */\n     public static final String UTF_16LE = \"UTF-16LE\";\n \n     /**\n-     * <p>\n-     * Eight-bit Unicode Transformation Format.\n-     * </p>\n-     * <p>\n-     * Every implementation of the Java platform is required to support this character encoding.\n-     * </p>\n+     * <p>Eight-bit Unicode Transformation Format.</p>\n      * \n-     * @see <a href=\"http://java.sun.com/j2se/1.3/docs/api/java/lang/package-summary.html#charenc\">JRE character\n-     *      encoding names</a>\n+     * <p>Every implementation of the Java platform is required to support this character encoding.</p>\n      */\n     public static final String UTF_8 = \"UTF-8\";\n \n+    //-----------------------------------------------------------------------\n     /**\n-     * <p>\n-     * Returns whether the named charset is supported.\n-     * </p>\n-     * <p>\n-     * This is similar to <a\n-     * href=\"http://java.sun.com/j2se/1.4.2/docs/api/java/nio/charset/Charset.html#isSupported(java.lang.String)\">\n-     * java.nio.charset.Charset.isSupported(String)</a>\n-     * </p>\n+     * <p>Returns whether the named charset is supported.</p>\n      * \n-     * @param name\n-     *            the name of the requested charset; may be either a canonical name or an alias\n-     * @return <code>true</code> if, and only if, support for the named charset is available in the current Java\n-     *         virtual machine\n+     * <p>This is similar to <a\n+     * href=\"http://download.oracle.com/javase/1.4.2/docs/api/java/nio/charset/Charset.html#isSupported%28java.lang.String%29\">\n+     * java.nio.charset.Charset.isSupported(String)</a> but handles more formats</p>\n      * \n-     * @see <a href=\"http://java.sun.com/j2se/1.3/docs/api/java/lang/package-summary.html#charenc\">JRE character\n-     *      encoding names</a>\n+     * @param name  the name of the requested charset; may be either a canonical name or an alias, null returns false\n+     * @return {@code true} if the charset is available in the current Java virtual machine\n      */\n     public static boolean isSupported(String name) {\n         if (name == null) {\n             return false;\n         }\n         try {\n-            new String(ArrayUtils.EMPTY_BYTE_ARRAY, name);\n-        } catch (UnsupportedEncodingException e) {\n+            return Charset.isSupported(name);\n+        } catch (IllegalCharsetNameException ex) {\n             return false;\n         }\n-        return true;\n     }\n \n }\n--- a/src/test/java/org/apache/commons/lang3/CharEncodingTest.java\n+++ b/src/test/java/org/apache/commons/lang3/CharEncodingTest.java\n \n package org.apache.commons.lang3;\n \n+import static org.apache.commons.lang3.JavaVersion.JAVA_1_1;\n+import static org.apache.commons.lang3.JavaVersion.JAVA_1_2;\n+import static org.apache.commons.lang3.JavaVersion.JAVA_1_3;\n import junit.framework.TestCase;\n-\n-import static org.apache.commons.lang3.JavaVersion.*;\n \n /**\n  * Tests CharEncoding.\n         } else {\n             this.warn(\"Java 1.3 tests not run since the current version is \" + SystemUtils.JAVA_SPECIFICATION_VERSION);\n         }\n+    }\n+\n+    public void testSupported() {\n+        assertTrue(CharEncoding.isSupported(\"UTF8\"));\n+        assertTrue(CharEncoding.isSupported(\"UTF-8\"));\n+        assertTrue(CharEncoding.isSupported(\"ASCII\"));\n     }\n \n     public void testNotSupported() {", "timestamp": 1299252709, "metainfo": ""}