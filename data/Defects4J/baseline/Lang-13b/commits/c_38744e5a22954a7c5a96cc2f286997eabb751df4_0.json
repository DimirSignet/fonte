{"sha": "38744e5a22954a7c5a96cc2f286997eabb751df4", "log": "[LANG-728] StringEscapeUtils.escapeXml(str) does not support supplemental characters. Add one failing test method with @Ignore (= it is not run.)   ", "commit": "\n--- a/src/test/java/org/apache/commons/lang3/StringEscapeUtilsTest.java\n+++ b/src/test/java/org/apache/commons/lang3/StringEscapeUtilsTest.java\n  */\n package org.apache.commons.lang3;\n \n+import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertNotNull;\n+import static org.junit.Assert.assertTrue;\n+import static org.junit.Assert.fail;\n+\n import java.io.FileInputStream;\n import java.io.IOException;\n import java.io.StringWriter;\n import java.lang.reflect.Constructor;\n import java.lang.reflect.Modifier;\n \n-import static org.junit.Assert.*;\n-\n import org.apache.commons.io.IOUtils;\n+import org.junit.Ignore;\n import org.junit.Test;\n \n /**\n         assertEquals(\"XML was unescaped incorrectly\", \"<abc>\", sw.toString() );\n     }\n \n+    /**\n+     * Tests Supplementary characters. \n+     * <p>\n+     * From http://www.w3.org/International/questions/qa-escapes\n+     * </p>\n+     * <blockquote>\n+     * Supplementary characters are those Unicode characters that have code points higher than the characters in\n+     * the Basic Multilingual Plane (BMP). In UTF-16 a supplementary character is encoded using two 16-bit surrogate code points from the\n+     * BMP. Because of this, some people think that supplementary characters need to be represented using two escapes, but this is incorrect\n+     *  you must use the single, code point value for that character. For example, use &#x233B4; rather than &#xD84C;&#xDFB4;.\n+     * </blockquote>\n+     * @see <a href=\"http://www.w3.org/International/questions/qa-escapes\">Using character escapes in markup and CSS</a>\n+     * @see <a href=\"https://issues.apache.org/jira/browse/LANG-728\">LANG-728</a>\n+     */\n+    @Ignore\n+    @Test\n+    public void testEscapeXmlSupplementaryCharacters() {\n+        // Example from https://issues.apache.org/jira/browse/LANG-728\n+        assertEquals(\"Supplementary character must be represented using a single escape\", \"&#144308;\",\n+                StringEscapeUtils.escapeXml(\"\\uD84C\\uDFB4\"));\n+        // Example from See http://www.w3.org/International/questions/qa-escapes\n+        assertEquals(\"Supplementary character must be represented using a single escape\", \"&#x233B4;\",\n+                StringEscapeUtils.escapeXml(\"\\uD84C;\\uDFB4;\"));\n+    }\n+    \n     // Tests issue #38569\n     // http://issues.apache.org/bugzilla/show_bug.cgi?id=38569\n     @Test", "timestamp": 1310855314, "metainfo": ""}