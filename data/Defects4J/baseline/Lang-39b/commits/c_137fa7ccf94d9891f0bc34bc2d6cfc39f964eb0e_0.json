{"sha": "137fa7ccf94d9891f0bc34bc2d6cfc39f964eb0e", "log": "Patch from Fredrik Westermarck <fredrik.westermarck@mdh.se> that adds the containsOnly method. I added a couple more unit tests and modified the code slightly.   ", "commit": "\n--- a/src/java/org/apache/commons/lang/StringUtils.java\n+++ b/src/java/org/apache/commons/lang/StringUtils.java\n  * @author <a href=\"mailto:ed@apache.org\">Ed Korthof</a>\n  * @author <a href=\"mailto:rand_mcneely@yahoo.com>Rand McNeely</a>\n  * @author <a href=\"mailto:scolebourne@joda.org>Stephen Colebourne</a>\n- * @version $Id: StringUtils.java,v 1.10 2002/08/31 19:05:32 bayard Exp $\n+ * @author <a href=\"mailto:fredrik@westermarck.com>Fredrik Westermarck</a>\n+ * @version $Id: StringUtils.java,v 1.11 2002/09/19 06:58:13 bayard Exp $\n  */\n public class StringUtils {\n \n         return d[n][m];\n     }\n \n+    /**\n+     * Checks if the String contains only certain chars.\n+     *\n+     * @param str the String to check\n+     * @param valid an array of valid chars\n+     * @return true if it only contains valid chars and is non-null\n+     */\n+    public static boolean containsOnly(String str, char[] valid) {\n+        if(str == null || valid == null) {\n+            return false;\n+        }\n+\n+        int strSize = str.length();\n+        int validSize = valid.length;\n+\n+        for(int i=0; i<strSize; i++) {\n+            boolean contains = false;\n+            for(int j=0; j<validSize; j++) {\n+                if(valid[j] == str.charAt(i)) {\n+                    contains = true;\n+                    break;\n+                }\n+            }\n+            if(!contains) {\n+                return false;\n+            }\n+        }\n+\n+        return true;\n+    }\n }\n-\n-\n--- a/src/test/org/apache/commons/lang/StringUtilsTest.java\n+++ b/src/test/org/apache/commons/lang/StringUtilsTest.java\n  * @author <a href=\"mailto:bayard@generationjava.com\">Henri Yandell</a>\n  * @author <a href=\"mailto:scolebourne@joda.org\">Stephen Colebourne</a>\n  * @author <a href=\"mailto:ridesmet@users.sourceforge.net\">Ringo De Smet</a>\n- * @version $Id: StringUtilsTest.java,v 1.3 2002/07/26 01:40:11 dlr Exp $\n+ * @author <a href=\"mailto:fredrik@westermarck.com>Fredrik Westermarck</a>\n+ * @version $Id: StringUtilsTest.java,v 1.4 2002/09/19 06:58:13 bayard Exp $\n  */\n public class StringUtilsTest extends TestCase\n {\n                      1, StringUtils.getLevenshteinDistance(\"hello\", \"hallo\") );\n     }\n \n+    public void testContainsOnly() {\n+        String str1 = \"a\";\n+        String str2 = \"b\";\n+        String str3 = \"ab\";\n+        char[] chars1= {'b'};\n+        char[] chars2= {'a'};\n+        char[] chars3= {'a', 'b'};\n+        char[] emptyChars = new char[0];\n+        assertEquals(\"containsOnly(null, null) failed\", false, StringUtils.containsOnly(null, null));\n+        assertEquals(\"containsOnly(empty-string, null) failed\", false, StringUtils.containsOnly(\"\", null));\n+        assertEquals(\"containsOnly(null, empty-string) failed\", false, StringUtils.containsOnly(null, emptyChars));\n+        assertEquals(\"containsOnly(str1, empty-char-array) failed\", false, StringUtils.containsOnly(str1, emptyChars));\n+        assertEquals(\"containsOnly(empty-string, chars1) failed\", true, StringUtils.containsOnly(\"\", chars1));\n+        assertEquals(\"containsOnly(str1, chars1) failed\", false, StringUtils.containsOnly(str1, chars1));\n+        assertEquals(\"containsOnly(str1, chars1) failed\", false, StringUtils.containsOnly(str1, chars1));\n+        assertEquals(\"containsOnly(str1, chars1) success\", true, StringUtils.containsOnly(str1, chars2));\n+        assertEquals(\"containsOnly(str1, chars1) success\", true, StringUtils.containsOnly(str1, chars3));\n+        assertEquals(\"containsOnly(str2, chars2) success\", true, StringUtils.containsOnly(str2, chars1));\n+        assertEquals(\"containsOnly(str2, chars2) failed\", false, StringUtils.containsOnly(str2, chars2));\n+        assertEquals(\"containsOnly(str2, chars2) success\", true, StringUtils.containsOnly(str2, chars3));\n+        assertEquals(\"containsOnly(String3, chars3) failed\", false, StringUtils.containsOnly(str3, chars1));\n+        assertEquals(\"containsOnly(String3, chars3) failed\", false, StringUtils.containsOnly(str3, chars2));\n+        assertEquals(\"containsOnly(String3, chars3) success\", true, StringUtils.containsOnly(str3, chars3));\n+    }\n+\n }\n ", "timestamp": 1032418693, "metainfo": ""}