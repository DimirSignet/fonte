{"sha": "d8624db8004fc8ef596d4ccedff7f307f444ad30", "log": "Sorts aliased strings.  R=nicksantos DELTA=24  (17 added, 5 deleted, 2 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=684   ", "commit": "\n--- a/src/com/google/javascript/jscomp/AliasStrings.java\n+++ b/src/com/google/javascript/jscomp/AliasStrings.java\n \n package com.google.javascript.jscomp;\n \n+import com.google.common.collect.Maps;\n import com.google.javascript.jscomp.NodeTraversal.AbstractPostOrderCallback;\n import com.google.javascript.rhino.Node;\n import com.google.javascript.rhino.Token;\n \n import java.util.ArrayList;\n import java.util.HashMap;\n-import java.util.LinkedHashMap;\n import java.util.LinkedHashSet;\n import java.util.List;\n import java.util.Map;\n+import java.util.Map.Entry;\n import java.util.Set;\n-import java.util.Map.Entry;\n+import java.util.SortedMap;\n import java.util.logging.Logger;\n import java.util.regex.Matcher;\n import java.util.regex.Pattern;\n \n   private final boolean outputStringUsage;\n \n-  private final Map<String, StringInfo> stringInfoMap =\n-      new LinkedHashMap<String, StringInfo>();\n+  private final SortedMap<String, StringInfo> stringInfoMap = Maps.newTreeMap();\n \n   private final Set<String> usedHashedAliases = new LinkedHashSet<String>();\n \n--- a/test/com/google/javascript/jscomp/AliasStringsTest.java\n+++ b/test/com/google/javascript/jscomp/AliasStringsTest.java\n \n     test(\"function f() {\" +\n          \"var styles=['width',100,'px','display','none'].join('')}\",\n+         \"var $$S_='';\" +\n+         \"var $$S_none='none';\" +\n+         \"var $$S_px='px';\" +\n          \"var $$S_width='width';\" +\n-         \"var $$S_px='px';\" +\n-         \"var $$S_none='none';\" +\n-         \"var $$S_='';\" +\n          \"function f() {var styles=[$$S_width,100,$$S_px,'display',\" +\n          \"$$S_none].join($$S_)}\");\n+  }\n+\n+  public void testSortedOutput() {\n+    strings = ImmutableSet.of(\"aba\", \"aaa\", \"aca\", \"bca\", \"bba\");\n+    test(\"function f() {return ['aba', 'aaa', 'aca', 'bca', 'bba']}\",\n+         \"var $$S_aaa='aaa';\" +\n+         \"var $$S_aba='aba';\" +\n+         \"var $$S_aca='aca';\" +\n+         \"var $$S_bba='bba';\" +\n+         \"var $$S_bca='bca';\" +\n+         \"function f() {\" +\n+         \"  return [$$S_aba, $$S_aaa, $$S_aca, $$S_bca, $$S_bba]}\");\n   }\n \n   public void testObjectLiterals() {", "timestamp": 1298679135, "metainfo": ""}