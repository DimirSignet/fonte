{"sha": "d2f27093d7d95a07da901902f894d88b4ecc3e95", "log": "CODEC-229 StringUtils.newStringxxx(null) should return null, not NPE  ", "commit": "\n--- a/src/main/java/org/apache/commons/codec/binary/StringUtils.java\n+++ b/src/main/java/org/apache/commons/codec/binary/StringUtils.java\n      * @since As of 1.7, throws {@link NullPointerException} instead of UnsupportedEncodingException\n      */\n     public static String newStringIso8859_1(final byte[] bytes) {\n-        return new String(bytes, Charsets.ISO_8859_1);\n+        return newString(bytes, Charsets.ISO_8859_1);\n     }\n \n     /**\n      * @since As of 1.7, throws {@link NullPointerException} instead of UnsupportedEncodingException\n      */\n     public static String newStringUsAscii(final byte[] bytes) {\n-        return new String(bytes, Charsets.US_ASCII);\n+        return newString(bytes, Charsets.US_ASCII);\n     }\n \n     /**\n      * @since As of 1.7, throws {@link NullPointerException} instead of UnsupportedEncodingException\n      */\n     public static String newStringUtf16(final byte[] bytes) {\n-        return new String(bytes, Charsets.UTF_16);\n+        return newString(bytes, Charsets.UTF_16);\n     }\n \n     /**\n      * @since As of 1.7, throws {@link NullPointerException} instead of UnsupportedEncodingException\n      */\n     public static String newStringUtf16Be(final byte[] bytes) {\n-        return new String(bytes, Charsets.UTF_16BE);\n+        return newString(bytes, Charsets.UTF_16BE);\n     }\n \n     /**\n      * @since As of 1.7, throws {@link NullPointerException} instead of UnsupportedEncodingException\n      */\n     public static String newStringUtf16Le(final byte[] bytes) {\n-        return new String(bytes, Charsets.UTF_16LE);\n+        return newString(bytes, Charsets.UTF_16LE);\n     }\n \n     /**\n--- a/src/test/java/org/apache/commons/codec/binary/StringUtilsTest.java\n+++ b/src/test/java/org/apache/commons/codec/binary/StringUtilsTest.java\n     }\n \n     @Test\n+    public void testNewStringNullInput_CODEC229() {\n+        Assert.assertNull(StringUtils.newStringUtf8(null));\n+        Assert.assertNull(StringUtils.newStringIso8859_1(null));\n+        Assert.assertNull(StringUtils.newStringUsAscii(null));\n+        Assert.assertNull(StringUtils.newStringUtf16(null));\n+        Assert.assertNull(StringUtils.newStringUtf16Be(null));\n+        Assert.assertNull(StringUtils.newStringUtf16Le(null));\n+    }\n+\n+    @Test\n     public void testNewStringIso8859_1() throws UnsupportedEncodingException {\n         final String charsetName = \"ISO-8859-1\";\n         testNewString(charsetName);", "timestamp": 1490548928, "metainfo": ""}