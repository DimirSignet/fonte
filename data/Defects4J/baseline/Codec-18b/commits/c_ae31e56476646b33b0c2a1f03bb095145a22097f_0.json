{"sha": "ae31e56476646b33b0c2a1f03bb095145a22097f", "log": "Use local code rather than depending on the enum methods  ", "commit": "\n--- a/src/main/java/org/apache/commons/codec/digest/HmacUtils.java\n+++ b/src/main/java/org/apache/commons/codec/digest/HmacUtils.java\n      */\n     @Deprecated\n     public static byte[] hmacMd5(final byte[] key, final byte[] valueToDigest) {\n-        return HmacAlgorithms.HMAC_MD5.hmac(key, valueToDigest);\n+        return HmacUtils.use(HmacAlgorithms.HMAC_MD5, key).hmac(valueToDigest);\n     }\n \n     /**\n      */\n     @Deprecated\n     public static byte[] hmacMd5(final byte[] key, final InputStream valueToDigest) throws IOException {\n-        return HmacAlgorithms.HMAC_MD5.hmac(key, valueToDigest);\n+        return HmacUtils.use(HmacAlgorithms.HMAC_MD5, key).hmac(valueToDigest);\n     }\n \n     /**\n      */\n     @Deprecated\n     public static byte[] hmacMd5(final String key, final String valueToDigest) {\n-        return HmacAlgorithms.HMAC_MD5.hmac(key, valueToDigest);\n+        return HmacUtils.use(HmacAlgorithms.HMAC_MD5, key).hmac(valueToDigest);\n     }\n \n     /**\n      */\n     @Deprecated\n     public static String hmacMd5Hex(final byte[] key, final byte[] valueToDigest) {\n-        return HmacAlgorithms.HMAC_MD5.hmacHex(key, valueToDigest);\n+        return HmacUtils.use(HmacAlgorithms.HMAC_MD5, key).hmacHex(valueToDigest);\n     }\n \n     /**\n      */\n     @Deprecated\n     public static String hmacMd5Hex(final byte[] key, final InputStream valueToDigest) throws IOException {\n-        return HmacAlgorithms.HMAC_MD5.hmacHex(key, valueToDigest);\n+        return HmacUtils.use(HmacAlgorithms.HMAC_MD5, key).hmacHex(valueToDigest);\n     }\n \n     /**\n      */\n     @Deprecated\n     public static String hmacMd5Hex(final String key, final String valueToDigest) {\n-        return HmacAlgorithms.HMAC_MD5.hmacHex(key, valueToDigest);\n+        return HmacUtils.use(HmacAlgorithms.HMAC_MD5, key).hmacHex(valueToDigest);\n     }\n \n     // hmacSha1\n      */\n     @Deprecated\n     public static byte[] hmacSha1(final byte[] key, final byte[] valueToDigest) {\n-        return HmacAlgorithms.HMAC_SHA_1.hmac(key, valueToDigest);\n+        return HmacUtils.use(HmacAlgorithms.HMAC_SHA_1, key).hmac(valueToDigest);\n     }\n \n     /**\n      */\n     @Deprecated\n     public static byte[] hmacSha1(final byte[] key, final InputStream valueToDigest) throws IOException {\n-        return HmacAlgorithms.HMAC_SHA_1.hmac(key, valueToDigest);\n+        return HmacUtils.use(HmacAlgorithms.HMAC_SHA_1, key).hmac(valueToDigest);\n     }\n \n     /**\n      */\n     @Deprecated\n     public static byte[] hmacSha1(final String key, final String valueToDigest) {\n-        return HmacAlgorithms.HMAC_SHA_1.hmac(key, valueToDigest);\n+        return HmacUtils.use(HmacAlgorithms.HMAC_SHA_1, key).hmac(valueToDigest);\n     }\n \n     /**\n      */\n     @Deprecated\n     public static String hmacSha1Hex(final byte[] key, final byte[] valueToDigest) {\n-        return HmacAlgorithms.HMAC_SHA_1.hmacHex(key, valueToDigest);\n+        return HmacUtils.use(HmacAlgorithms.HMAC_SHA_1, key).hmacHex(valueToDigest);\n     }\n \n     /**\n      */\n     @Deprecated\n     public static String hmacSha1Hex(final byte[] key, final InputStream valueToDigest) throws IOException {\n-        return HmacAlgorithms.HMAC_SHA_1.hmacHex(key, valueToDigest);\n+        return HmacUtils.use(HmacAlgorithms.HMAC_SHA_1, key).hmacHex(valueToDigest);\n     }\n \n     /**\n      */\n     @Deprecated\n     public static String hmacSha1Hex(final String key, final String valueToDigest) {\n-        return HmacAlgorithms.HMAC_SHA_1.hmacHex(key, valueToDigest);\n+        return HmacUtils.use(HmacAlgorithms.HMAC_SHA_1, key).hmacHex(valueToDigest);\n     }\n \n     // hmacSha256\n      */\n     @Deprecated\n     public static byte[] hmacSha256(final byte[] key, final byte[] valueToDigest) {\n-        return HmacAlgorithms.HMAC_SHA_256.hmac(key, valueToDigest);\n+        return HmacUtils.use(HmacAlgorithms.HMAC_SHA_256, key).hmac(valueToDigest);\n     }\n \n     /**\n      */\n     @Deprecated\n     public static byte[] hmacSha256(final byte[] key, final InputStream valueToDigest) throws IOException {\n-        return HmacAlgorithms.HMAC_SHA_256.hmac(key, valueToDigest);\n+        return HmacUtils.use(HmacAlgorithms.HMAC_SHA_256, key).hmac(valueToDigest);\n     }\n \n     /**\n      */\n     @Deprecated\n     public static byte[] hmacSha256(final String key, final String valueToDigest) {\n-        return HmacAlgorithms.HMAC_SHA_256.hmac(key, valueToDigest);\n+        return HmacUtils.use(HmacAlgorithms.HMAC_SHA_256, key).hmac(valueToDigest);\n     }\n \n     /**\n      */\n     @Deprecated\n     public static String hmacSha256Hex(final byte[] key, final byte[] valueToDigest) {\n-        return HmacAlgorithms.HMAC_SHA_256.hmacHex(key, valueToDigest);\n+        return HmacUtils.use(HmacAlgorithms.HMAC_SHA_256, key).hmacHex(valueToDigest);\n     }\n \n     /**\n      */\n     @Deprecated\n     public static String hmacSha256Hex(final byte[] key, final InputStream valueToDigest) throws IOException {\n-        return HmacAlgorithms.HMAC_SHA_256.hmacHex(key, valueToDigest);\n+        return HmacUtils.use(HmacAlgorithms.HMAC_SHA_256, key).hmacHex(valueToDigest);\n     }\n \n     /**\n      */\n     @Deprecated\n     public static String hmacSha256Hex(final String key, final String valueToDigest) {\n-        return HmacAlgorithms.HMAC_SHA_256.hmacHex(key, valueToDigest);\n+        return HmacUtils.use(HmacAlgorithms.HMAC_SHA_256, key).hmacHex(valueToDigest);\n     }\n \n     // hmacSha384\n      */\n     @Deprecated\n     public static byte[] hmacSha384(final byte[] key, final byte[] valueToDigest) {\n-        return HmacAlgorithms.HMAC_SHA_384.hmac(key, valueToDigest);\n+        return HmacUtils.use(HmacAlgorithms.HMAC_SHA_384, key).hmac(valueToDigest);\n     }\n \n     /**\n      */\n     @Deprecated\n     public static byte[] hmacSha384(final byte[] key, final InputStream valueToDigest) throws IOException {\n-        return HmacAlgorithms.HMAC_SHA_384.hmac(key, valueToDigest);\n+        return HmacUtils.use(HmacAlgorithms.HMAC_SHA_384, key).hmac(valueToDigest);\n     }\n \n     /**\n      */\n     @Deprecated\n     public static byte[] hmacSha384(final String key, final String valueToDigest) {\n-        return HmacAlgorithms.HMAC_SHA_384.hmac(key, valueToDigest);\n+        return HmacUtils.use(HmacAlgorithms.HMAC_SHA_384, key).hmac(valueToDigest);\n     }\n \n     /**\n      */\n     @Deprecated\n     public static String hmacSha384Hex(final byte[] key, final byte[] valueToDigest) {\n-        return HmacAlgorithms.HMAC_SHA_384.hmacHex(key, valueToDigest);\n+        return HmacUtils.use(HmacAlgorithms.HMAC_SHA_384, key).hmacHex(valueToDigest);\n     }\n \n     /**\n      */\n     @Deprecated\n     public static String hmacSha384Hex(final byte[] key, final InputStream valueToDigest) throws IOException {\n-        return HmacAlgorithms.HMAC_SHA_384.hmacHex(key, valueToDigest);\n+        return HmacUtils.use(HmacAlgorithms.HMAC_SHA_384, key).hmacHex(valueToDigest);\n     }\n \n     /**\n      */\n     @Deprecated\n     public static String hmacSha384Hex(final String key, final String valueToDigest) {\n-        return HmacAlgorithms.HMAC_SHA_384.hmacHex(key, valueToDigest);\n+        return HmacUtils.use(HmacAlgorithms.HMAC_SHA_384, key).hmacHex(valueToDigest);\n     }\n \n     // hmacSha512\n      */\n     @Deprecated\n     public static byte[] hmacSha512(final byte[] key, final byte[] valueToDigest) {\n-        return HmacAlgorithms.HMAC_SHA_512.hmac(key, valueToDigest);\n+        return HmacUtils.use(HmacAlgorithms.HMAC_SHA_512, key).hmac(valueToDigest);\n     }\n \n     /**\n      */\n     @Deprecated\n     public static byte[] hmacSha512(final byte[] key, final InputStream valueToDigest) throws IOException {\n-        return HmacAlgorithms.HMAC_SHA_512.hmac(key, valueToDigest);\n+        return HmacUtils.use(HmacAlgorithms.HMAC_SHA_512, key).hmac(valueToDigest);\n     }\n \n     /**\n      */\n     @Deprecated\n     public static byte[] hmacSha512(final String key, final String valueToDigest) {\n-        return HmacAlgorithms.HMAC_SHA_512.hmac(key, valueToDigest);\n+        return HmacUtils.use(HmacAlgorithms.HMAC_SHA_512, key).hmac(valueToDigest);\n     }\n \n     /**\n      */\n     @Deprecated\n     public static String hmacSha512Hex(final byte[] key, final byte[] valueToDigest) {\n-        return HmacAlgorithms.HMAC_SHA_512.hmacHex(key, valueToDigest);\n+        return HmacUtils.use(HmacAlgorithms.HMAC_SHA_512, key).hmacHex(valueToDigest);\n     }\n \n     /**\n      */\n     @Deprecated\n     public static String hmacSha512Hex(final byte[] key, final InputStream valueToDigest) throws IOException {\n-        return HmacAlgorithms.HMAC_SHA_512.hmacHex(key, valueToDigest);\n+        return HmacUtils.use(HmacAlgorithms.HMAC_SHA_512, key).hmacHex(valueToDigest);\n     }\n \n     /**\n      */\n     @Deprecated\n     public static String hmacSha512Hex(final String key, final String valueToDigest) {\n-        return HmacAlgorithms.HMAC_SHA_512.hmacHex(key, valueToDigest);\n+        return HmacUtils.use(HmacAlgorithms.HMAC_SHA_512, key).hmacHex(valueToDigest);\n     }\n \n     // update\n      */\n     public static HmacUtils use(final String algorithm, final byte[] key) {\n         return new HmacUtils(algorithm, key);\n+    }\n+\n+    /**\n+     * Creates an instance using the provided algorithm type.\n+     *\n+     * @param algorithm to be used\n+     * @param  key the key to be used\n+     * @return the instance\n+     * @throws IllegalArgumentException\n+     *             when a {@link NoSuchAlgorithmException} is caught or key is null or key is invalid.\n+     * @since 1.11\n+     */\n+    public static HmacUtils use(final String algorithm, final String key) {\n+        return new HmacUtils(algorithm, StringUtils.getBytesUtf8(key));\n+    }\n+\n+    /**\n+     * Creates an instance using the provided algorithm type.\n+     *\n+     * @param algorithm to be used\n+     * @param  key the key to be used\n+     * @return the instance\n+     * @throws IllegalArgumentException\n+     *             when a {@link NoSuchAlgorithmException} is caught or key is null or key is invalid.\n+     * @since 1.11\n+     */\n+    public static HmacUtils use(final HmacAlgorithms algorithm, final String key) {\n+        return new HmacUtils(algorithm.getName(), StringUtils.getBytesUtf8(key));\n     }\n \n     /**", "timestamp": 1463957624, "metainfo": ""}