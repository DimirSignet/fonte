{"sha": "0c0c69288e84e858a34a0db2c1c385a35235f437", "log": "Renamed testSpeedCheck to testSpeedCheckRandom. Made testSpeedCheck deterministic.  ", "commit": "\n--- a/src/test/org/apache/commons/codec/language/bm/BeiderMorseEncoderTest.java\n+++ b/src/test/org/apache/commons/codec/language/bm/BeiderMorseEncoderTest.java\n  * @since 2.0\n  */\n public class BeiderMorseEncoderTest extends StringEncoderAbstractTest {\n+    private static final char[] TEST_CHARS = new char[] { 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'o', 'u' };\n+\n     private void assertNotEmpty(BeiderMorseEncoder bmpm, final String value) throws EncoderException {\n         Assert.assertFalse(value, bmpm.encode(value).equals(\"\"));\n     }\n \n     /**\n      * Runs between 1.1 and 13 seconds at length 40 for me (Gary Gregory, 2011/08/06)\n-     *  \n+     * \n      * @throws EncoderException\n      */\n     @Test(/* timeout = 20000L */)\n-    public void testSpeedCheck() throws EncoderException {\n-        char[] chars = new char[] { 'a', 'b', 'c', 'd', 'e', 'f', 'g', 'h', 'o', 'u' };\n-        BeiderMorseEncoder bmpm = createGenericApproxEncoder();\n+    public void testSpeedCheckRandom() throws EncoderException {\n+        BeiderMorseEncoder bmpm = this.createGenericApproxEncoder();\n         StringBuffer stringBuffer = new StringBuffer();\n         Random rand = new Random();\n-        stringBuffer.append(chars[rand.nextInt(chars.length)]);\n-        long start;\n+        stringBuffer.append(TEST_CHARS[rand.nextInt(TEST_CHARS.length)]);\n         for (int i = 0; i < 40; i++) {\n-            start = System.currentTimeMillis();\n-            // System.out.println(i + \" String to encode:\" + stringBuffer.toString());\n             bmpm.encode(stringBuffer.toString());\n-            stringBuffer.append(chars[rand.nextInt(chars.length)]);\n-            // System.out.println(i + \" Elapsed time in ms:\" + (System.currentTimeMillis() - start));\n+            stringBuffer.append(TEST_CHARS[rand.nextInt(TEST_CHARS.length)]);\n+        }\n+    }\n+\n+    @Test(/* timeout = 20000L */)\n+    public void testSpeedCheck() throws EncoderException {\n+        BeiderMorseEncoder bmpm = this.createGenericApproxEncoder();\n+        StringBuffer stringBuffer = new StringBuffer();\n+        stringBuffer.append(TEST_CHARS[0]);\n+        for (int i = 0, j = 1; i < 40; i++, j++) {\n+            if (j == TEST_CHARS.length) {\n+                j = 0;\n+            }\n+            bmpm.encode(stringBuffer.toString());\n+            stringBuffer.append(TEST_CHARS[j]);\n         }\n     }\n }", "timestamp": 1312825790, "metainfo": ""}