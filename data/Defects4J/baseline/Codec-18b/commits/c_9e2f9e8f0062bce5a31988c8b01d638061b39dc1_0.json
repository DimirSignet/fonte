{"sha": "9e2f9e8f0062bce5a31988c8b01d638061b39dc1", "log": "<action dev=\"ggregory\" type=\"fix\" issue=\"CODEC-163\" due-to=\"leo141\">ColognePhonetic encoder unneccessarily creates many char arrays on every loop run.</action>  ", "commit": "\n--- a/src/main/java/org/apache/commons/codec/language/ColognePhonetic.java\n+++ b/src/main/java/org/apache/commons/codec/language/ColognePhonetic.java\n  * @since 1.5\n  */\n public class ColognePhonetic implements StringEncoder {\n+\n+    // Predefined char arrays for better performance and less GC load\n+    private static final char[] AEIJOUY = new char[] { 'A', 'E', 'I', 'J', 'O', 'U', 'Y' };\n+    private static final char[] SCZ = new char[] { 'S', 'C', 'Z' };\n+    private static final char[] WFPV = new char[] { 'W', 'F', 'P', 'V' };\n+    private static final char[] GKQ = new char[] { 'G', 'K', 'Q' };\n+    private static final char[] CKQ = new char[] { 'C', 'K', 'Q' };\n+    private static final char[] AHKLOQRUX = new char[] { 'A', 'H', 'K', 'L', 'O', 'Q', 'R', 'U', 'X' };\n+    private static final char[] SZ = new char[] { 'S', 'Z' };\n+    private static final char[] AHOUKQX = new char[] { 'A', 'H', 'O', 'U', 'K', 'Q', 'X' };\n+    private static final char[] TDX = new char[] { 'T', 'D', 'X' };\n \n     /**\n      * This class is not thread-safe; the field {@link #length} is mutable.\n                 nextChar = '-';\n             }\n \n-            if (arrayContains(new char[]{'A', 'E', 'I', 'J', 'O', 'U', 'Y'}, chr)) {\n+            if (arrayContains(AEIJOUY, chr)) {\n                 code = '0';\n             } else if (chr == 'H' || chr < 'A' || chr > 'Z') {\n                 if (lastCode == '/') {\n                 code = '-';\n             } else if (chr == 'B' || (chr == 'P' && nextChar != 'H')) {\n                 code = '1';\n-            } else if ((chr == 'D' || chr == 'T') && !arrayContains(new char[]{'S', 'C', 'Z'}, nextChar)) {\n+            } else if ((chr == 'D' || chr == 'T') && !arrayContains(SCZ, nextChar)) {\n                 code = '2';\n-            } else if (arrayContains(new char[]{'W', 'F', 'P', 'V'}, chr)) {\n+            } else if (arrayContains(WFPV, chr)) {\n                 code = '3';\n-            } else if (arrayContains(new char[]{'G', 'K', 'Q'}, chr)) {\n+            } else if (arrayContains(GKQ, chr)) {\n                 code = '4';\n-            } else if (chr == 'X' && !arrayContains(new char[]{'C', 'K', 'Q'}, lastChar)) {\n+            } else if (chr == 'X' && !arrayContains(CKQ, lastChar)) {\n                 code = '4';\n                 input.addLeft('S');\n                 rightLength++;\n                 code = '8';\n             } else if (chr == 'C') {\n                 if (lastCode == '/') {\n-                    if (arrayContains(new char[]{'A', 'H', 'K', 'L', 'O', 'Q', 'R', 'U', 'X'}, nextChar)) {\n+                    if (arrayContains(AHKLOQRUX, nextChar)) {\n                         code = '4';\n                     } else {\n                         code = '8';\n                     }\n                 } else {\n-                    if (arrayContains(new char[]{'S', 'Z'}, lastChar) ||\n-                        !arrayContains(new char[]{'A', 'H', 'O', 'U', 'K', 'Q', 'X'}, nextChar)) {\n+                    if (arrayContains(SZ, lastChar) || !arrayContains(AHOUKQX, nextChar)) {\n                         code = '8';\n                     } else {\n                         code = '4';\n                     }\n                 }\n-            } else if (arrayContains(new char[]{'T', 'D', 'X'}, chr)) {\n+            } else if (arrayContains(TDX, chr)) {\n                 code = '8';\n             } else if (chr == 'R') {\n                 code = '7';", "timestamp": 1353598755, "metainfo": ""}