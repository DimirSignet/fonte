{"sha": "72c8759a22c6552a2dfcdf61b29729f981752879", "log": "Eberhard -> 01772 (not 0172) because two or more identical consecutive digits can occur if they occur after removing the \"0\" digits last step.  ", "commit": "\n--- a/src/java/org/apache/commons/codec/language/ColognePhonetic.java\n+++ b/src/java/org/apache/commons/codec/language/ColognePhonetic.java\n  * \n  * <li>\n  * <h3>Third step:</h3>\n- * Removal of all codes \u201c0\u201d except at the beginning\n+ * Removal of all codes \u201c0\u201d except at the beginning. This means that two or more identical consecutive digits can occur\n+ *  if they occur after removing the \"0\" digits.\n  * \n  * <h4>Example:</h4>\n  * {@code \"6050750206802\" => \"65752682\"}</li>\n \n             if (code != '-' && (lastCode != code && (code != '0' || lastCode == '/') || code < '0' || code > '8')) {\n                 left.addRight(code);\n-                lastCode = code;\n             }\n \n             lastChar = chr;\n+            lastCode = code;\n         }\n         return left.toString();\n     }\n--- a/src/test/org/apache/commons/codec/language/ColognePhoneticTest.java\n+++ b/src/test/org/apache/commons/codec/language/ColognePhoneticTest.java\n             {\"weber\", \"317\"},\n             // {\"wagner\", \"357\"},\n             {\"becker\", \"147\"},\n-            {\"hoffmann\", \"036\"},\n+            {\"hoffmann\", \"0366\"},\n             {\"sch\\u00C4fer\", \"837\"},\n             {\"Breschnew\", \"17863\"},\n             {\"Wikipedia\", \"3412\"},\n             {\"peter\", \"127\"},\n             {\"pharma\", \"376\"},\n-            {\"m\u00f6nchengladbach\", \"64645214\"},\n+            {\"m\u00f6nchengladbach\", \"664645214\"},\n             {\"deutsch\", \"28\"},\n             {\"deutz\", \"28\"},\n             {\"hamburg\", \"06174\"},\n             {\"matsch\", \"68\"},\n             {\"matz\", \"68\"},\n             {\"Arbeitsamt\", \"071862\"},\n-            {\"Eberhard\", \"0172\"},\n-            {\"Eberhardt\", \"0172\"},\n+            {\"Eberhard\", \"01772\"},\n+            {\"Eberhardt\", \"01772\"},\n             {\"heithabu\", \"021\"}};\n         this.checkEncodings(data);\n     }\n         }\n     }\n \n-    public void testVariations() {\n+    public void testVariationsMeyer() {\n         String data[] = {\"Meier\", \"Maier\", \"Mair\", \"Meyer\", \"Meyr\", \"Mejer\", \"Major\"};\n         this.checkEncodingVariations(\"67\", data);\n+\n+    }\n+\n+    public void testVariationsMella() {\n+        String data[] = {\"mella\", \"milah\", \"moulla\", \"mellah\", \"muehle\", \"mule\"};\n+        this.checkEncodingVariations(\"65\", data);\n     }\n }", "timestamp": 1298409559, "metainfo": ""}