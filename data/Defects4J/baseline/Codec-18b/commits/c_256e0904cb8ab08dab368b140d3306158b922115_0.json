{"sha": "256e0904cb8ab08dab368b140d3306158b922115", "log": "Cache Patterns.  ", "commit": "\n--- a/src/main/java/org/apache/commons/codec/language/Nysiis.java\n+++ b/src/main/java/org/apache/commons/codec/language/Nysiis.java\n  */\n \n package org.apache.commons.codec.language;\n+\n+import java.util.regex.Pattern;\n \n import org.apache.commons.codec.EncoderException;\n import org.apache.commons.codec.StringEncoder;\n     private static final char[] CHARS_NN = new char[] { 'N', 'N' };\n     private static final char[] CHARS_S = new char[] { 'S' };\n     private static final char[] CHARS_SSS = new char[] { 'S', 'S', 'S' };\n+    \n+    private static final Pattern PAT_MAC = Pattern.compile(\"^MAC\");\n+    private static final Pattern PAT_KN = Pattern.compile(\"^KN\");\n+    private static final Pattern PAT_K = Pattern.compile(\"^K\");\n+    private static final Pattern PAT_PH_PF = Pattern.compile(\"^(PH|PF)\");\n+    private static final Pattern PAT_SCH = Pattern.compile(\"^SCH\");\n+    private static final Pattern PAT_EE_IE = Pattern.compile(\"(EE|IE)$\");\n+    private static final Pattern PAT_DT_ETC = Pattern.compile(\"(DT|RT|RD|NT|ND)$\");\n+    \n     private static final char SPACE = ' ';\n     private static final int TRUE_LENGTH = 6;\n \n \n         // Translate first characters of name:\n         // MAC -> MCC, KN -> NN, K -> C, PH | PF -> FF, SCH -> SSS\n-        str = str.replaceFirst(\"^MAC\", \"MCC\");\n-        str = str.replaceFirst(\"^KN\", \"NN\");\n-        str = str.replaceFirst(\"^K\", \"C\");\n-        str = str.replaceFirst(\"^(PH|PF)\", \"FF\");\n-        str = str.replaceFirst(\"^SCH\", \"SSS\");\n-\n+        str = PAT_MAC.matcher(str).replaceFirst(\"MCC\");\n+        str = PAT_KN.matcher(str).replaceFirst(\"NN\");\n+        str = PAT_K.matcher(str).replaceFirst(\"C\");\n+        str = PAT_PH_PF.matcher(str).replaceFirst(\"FF\");\n+        str = PAT_SCH.matcher(str).replaceFirst(\"SSS\");\n+        \n         // Translate last characters of name:\n         // EE -> Y, IE -> Y, DT | RT | RD | NT | ND -> D\n-        str = str.replaceFirst(\"(EE|IE)$\", \"Y\");\n-        str = str.replaceFirst(\"(DT|RT|RD|NT|ND)$\", \"D\");\n+        str = PAT_EE_IE.matcher(str).replaceFirst(\"Y\");\n+        str = PAT_DT_ETC.matcher(str).replaceFirst(\"D\");\n \n         // First character of key = first character of name.\n         StringBuffer key = new StringBuffer(str.length());", "timestamp": 1331244935, "metainfo": ""}