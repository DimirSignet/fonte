{"sha": "40e45bb4017ba81769e97537ba443ec4ae34cd10", "log": "String goog.asserts.assert in Advanced mode.  R=nicksantos DELTA=10  (10 added, 0 deleted, 0 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=309   ", "commit": "\n--- a/src/com/google/javascript/jscomp/CompilationLevel.java\n+++ b/src/com/google/javascript/jscomp/CompilationLevel.java\n   public void setDebugOptionsForCompilationLevel(CompilerOptions options) {\n     options.anonymousFunctionNaming = AnonymousFunctionNamingPolicy.UNMAPPED;\n     options.generatePseudoNames = true;\n+    options.removeClosureAsserts = false;\n   }\n \n   /**\n     options.optimizeArgumentsArray = true;\n \n     // All the advance optimizations.\n+    options.removeClosureAsserts = true;\n     options.aliasKeywords = true;\n     options.reserveRawExports = true;\n     options.variableRenaming = VariableRenamingPolicy.ALL;\n--- a/test/com/google/javascript/jscomp/CommandLineRunnerTest.java\n+++ b/test/com/google/javascript/jscomp/CommandLineRunnerTest.java\n          \" var a;\" +\n          \" return ((a=b.id) && (a=parseInt(a.substr(1))) && a>0);\" +\n          \"}\");\n-  }  \n+  }\n \n   public void testDebugFlag1() {\n     args.add(\"--compilation_level=SIMPLE_OPTIMIZATIONS\");\n     args.add(\"--warning_level=VERBOSE\");\n     test(\"var theirVar = {}; var myVar = {}; var myVar = {};\",\n          SyntacticScopeCreator.VAR_MULTIPLY_DECLARED_ERROR);\n+  }\n+\n+  public void testGoogAssertStripping() {\n+    args.add(\"--compilation_level=ADVANCED_OPTIMIZATIONS\");\n+    test(\"goog.asserts.assert(false)\",\n+         \"\");\n+    args.add(\"--debug\");\n+    test(\"goog.asserts.assert(false)\", \"goog.$asserts$.$assert$(false)\");\n   }\n \n   /* Helper functions */", "timestamp": 1295467483, "metainfo": ""}