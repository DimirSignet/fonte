{"sha": "7fbff508f8590793108aa192a1898dc617e7b040", "log": "Don't warn about trailing commas in ES5 mode.  ES5 allows it and IE9 handles it propertly.  R=nicksantos DELTA=9  (8 added, 0 deleted, 1 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=764   ", "commit": "\n--- a/src/com/google/javascript/jscomp/parsing/ParserRunner.java\n+++ b/src/com/google/javascript/jscomp/parsing/ParserRunner.java\n     compilerEnv.initFromContext(cx);\n     compilerEnv.setRecordingComments(true);\n     compilerEnv.setRecordingLocalJsDocComments(true);\n-    compilerEnv.setWarnTrailingComma(true);\n+    // ES5 specifically allows trailing commas\n+    compilerEnv.setWarnTrailingComma(!config.acceptES5);\n+\n     if (config.isIdeMode) {\n       compilerEnv.setReservedKeywordAsIdentifier(true);\n       compilerEnv.setAllowMemberExprAsFunctionName(true);\n--- a/test/com/google/javascript/jscomp/parsing/ParserTest.java\n+++ b/test/com/google/javascript/jscomp/parsing/ParserTest.java\n \n   public void testTrailingCommaWarning3() {\n     parse(\"var a = ['foo', 'bar',];\", TRAILING_COMMA_MESSAGE);\n+    es5mode = true;\n+    parse(\"var a = ['foo', 'bar',];\");\n   }\n \n   public void testTrailingCommaWarning4() {\n     parse(\"var a = [,];\", TRAILING_COMMA_MESSAGE);\n+    es5mode = true;\n+    parse(\"var a = [,];\");\n   }\n \n   public void testTrailingCommaWarning5() {\n \n   public void testTrailingCommaWarning6() {\n     parse(\"var a = {'foo': 'bar',};\", TRAILING_COMMA_MESSAGE);\n+    es5mode = true;\n+    parse(\"var a = {'foo': 'bar',};\");\n   }\n \n   public void testTrailingCommaWarning7() {", "timestamp": 1299267696, "metainfo": ""}