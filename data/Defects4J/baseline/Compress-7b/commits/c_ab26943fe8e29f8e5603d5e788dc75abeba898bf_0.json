{"sha": "ab26943fe8e29f8e5603d5e788dc75abeba898bf", "log": "added byte counter  ", "commit": "\n--- a/src/main/java/org/apache/commons/compress/archivers/ArchiveOutputStream.java\n+++ b/src/main/java/org/apache/commons/compress/archivers/ArchiveOutputStream.java\n     private final byte[] oneByte = new byte[1];\n     static final int BYTE_MASK = 0xFF;\n \n+    /** holds the number of bytes read in this stream */\n+    private int bytesRead = 0;\n     // Methods specific to ArchiveOutputStream\n     \n     /**\n         write(oneByte, 0, 1);\n     }\n \n+    /**\n+     * Increments the counter of already read bytes.\n+     * Doesn't increment if the EOF has been hit (read == -1)\n+     * \n+     * @param read the number of bytes read\n+     */\n+    protected void count(int read) {\n+        if(read != -1) {\n+            bytesRead = bytesRead + read;\n+        }\n+    }\n+    \n+    /**\n+     * Returns the current number of bytes read from this stream.\n+     * @return the number of read bytes\n+     */\n+    public int getCount() {\n+        return bytesRead;\n+    }\n }\n--- a/src/main/java/org/apache/commons/compress/archivers/ar/ArArchiveOutputStream.java\n+++ b/src/main/java/org/apache/commons/compress/archivers/ar/ArArchiveOutputStream.java\n \n     public void write(byte[] b, int off, int len) throws IOException {\n         out.write(b, off, len);\n+        count(len);\n         entryOffset += len;\n     }\n \n--- a/src/main/java/org/apache/commons/compress/archivers/cpio/CpioArchiveOutputStream.java\n+++ b/src/main/java/org/apache/commons/compress/archivers/cpio/CpioArchiveOutputStream.java\n                 this.crc += b[pos] & 0xFF;\n             }\n         }\n+        count(len);\n     }\n \n     /**\n--- a/src/main/java/org/apache/commons/compress/archivers/tar/TarArchiveOutputStream.java\n+++ b/src/main/java/org/apache/commons/compress/archivers/tar/TarArchiveOutputStream.java\n             numToWrite -= num;\n             wOffset += num;\n         }\n+        \n+        count(numToWrite);\n     }\n \n     /**\n--- a/src/main/java/org/apache/commons/compress/archivers/zip/ZipArchiveOutputStream.java\n+++ b/src/main/java/org/apache/commons/compress/archivers/zip/ZipArchiveOutputStream.java\n             written += length;\n         }\n         crc.update(b, offset, length);\n+        count(length);\n     }\n \n     /**", "timestamp": 1240554617, "metainfo": ""}