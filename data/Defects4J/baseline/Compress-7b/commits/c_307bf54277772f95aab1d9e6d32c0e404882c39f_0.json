{"sha": "307bf54277772f95aab1d9e6d32c0e404882c39f", "log": "Fix test case to work even if test file has unexpected line endings  ", "commit": "\n--- a/src/test/java/org/apache/commons/compress/archivers/CpioTestCase.java\n+++ b/src/test/java/org/apache/commons/compress/archivers/CpioTestCase.java\n \n     public void testCpioUnarchive() throws Exception {\n         final File output = new File(dir, \"bla.cpio\");\n+        final File file1 = getFile(\"test1.xml\");\n+        final File file2 = getFile(\"test2.xml\");\n+        final long file1Length = file1.length();\n+        final long file2Length = file2.length();\n+        \n         {\n-            final File file1 = getFile(\"test1.xml\");\n-            final File file2 = getFile(\"test2.xml\");\n-\n             final OutputStream out = new FileOutputStream(output);\n             final ArchiveOutputStream os = new ArchiveStreamFactory().createArchiveOutputStream(\"cpio\", out);\n-            CpioArchiveEntry entry = new CpioArchiveEntry(\"test1.xml\", file1.length());\n+            CpioArchiveEntry entry = new CpioArchiveEntry(\"test1.xml\", file1Length);\n             entry.setMode(CpioConstants.C_ISREG);\n             os.putArchiveEntry(entry);\n             IOUtils.copy(new FileInputStream(file1), os);\n             os.closeArchiveEntry();\n \n-            entry = new CpioArchiveEntry(\"test2.xml\", file2.length());\n+            entry = new CpioArchiveEntry(\"test2.xml\", file2Length);\n             entry.setMode(CpioConstants.C_ISREG);\n             os.putArchiveEntry(entry);\n             IOUtils.copy(new FileInputStream(file2), os);\n         in.close();\n         is.close();\n \n-        int lineSepLength = System.getProperty(\"line.separator\").length();\n-\n         File t = (File)result.get(\"test1.xml\");\n         assertTrue(\"Expected \" + t.getAbsolutePath() + \" to exist\", t.exists());\n-        assertEquals(\"length of \" + t.getAbsolutePath(),\n-                     72 + 4 * lineSepLength, t.length());\n+        assertEquals(\"length of \" + t.getAbsolutePath(), file1Length, t.length());\n \n         t = (File)result.get(\"test2.xml\");\n         assertTrue(\"Expected \" + t.getAbsolutePath() + \" to exist\", t.exists());\n-        assertEquals(\"length of \" + t.getAbsolutePath(),\n-                     73 + 5 * lineSepLength, t.length());\n+        assertEquals(\"length of \" + t.getAbsolutePath(), file2Length, t.length());\n     }\n \n }", "timestamp": 1242063708, "metainfo": ""}