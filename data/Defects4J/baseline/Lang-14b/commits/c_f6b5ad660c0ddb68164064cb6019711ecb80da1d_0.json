{"sha": "f6b5ad660c0ddb68164064cb6019711ecb80da1d", "log": "Applying Arnaud Brunet's patch from LANG-355 to make StrBuilder implement CharSequence  ", "commit": "\n--- a/src/java/org/apache/commons/lang/text/StrBuilder.java\n+++ b/src/java/org/apache/commons/lang/text/StrBuilder.java\n  * @since 2.2\n  * @version $Id$\n  */\n-public class StrBuilder {\n+public class StrBuilder implements CharSequence {\n \n     /**\n      * The extra capacity for new builders.\n     }\n \n     //-----------------------------------------------------------------------\n+    /**\n+     * {@inheritDoc}\n+     */\n+    public CharSequence subSequence(int startIndex, int endIndex) {\n+      if (startIndex < 0) {\n+          throw new StringIndexOutOfBoundsException(startIndex);\n+      }\n+      if (endIndex > size) {\n+          throw new StringIndexOutOfBoundsException(endIndex);\n+      }\n+      if (startIndex > endIndex) {\n+          throw new StringIndexOutOfBoundsException(endIndex - startIndex);\n+      }\n+      return substring(startIndex, endIndex);\n+    }\n+\n     /**\n      * Extracts a portion of this string builder as a string.\n      * \n--- a/src/test/org/apache/commons/lang/text/StrBuilderTest.java\n+++ b/src/test/org/apache/commons/lang/text/StrBuilderTest.java\n     }\n \n     //-----------------------------------------------------------------------\n+    public void testSubSequenceIntInt() {\n+       StrBuilder sb = new StrBuilder (\"hello goodbye\");\n+       // Start index is negative\n+       try {\n+            sb.subSequence(-1, 5);\n+            fail();\n+        } catch (IndexOutOfBoundsException e) {}\n+        \n+        // End index is negative\n+       try {\n+            sb.subSequence(2, -1);\n+            fail();\n+        } catch (IndexOutOfBoundsException e) {}\n+        \n+        // End index greater than length()\n+        try {\n+            sb.subSequence(2, sb.length() + 1);\n+            fail();\n+        } catch (IndexOutOfBoundsException e) {}\n+        \n+        // Start index greater then end index\n+        try {\n+            sb.subSequence(3, 2);\n+            fail();\n+        } catch (IndexOutOfBoundsException e) {}\n+        \n+        // Normal cases\n+        assertEquals (\"hello\", sb.subSequence(0, 5));\n+        assertEquals (\"hello goodbye\".subSequence(0, 6), sb.subSequence(0, 6));\n+        assertEquals (\"goodbye\", sb.subSequence(6, 13));\n+        assertEquals (\"hello goodbye\".subSequence(6,13), sb.subSequence(6, 13));\n+    }\n+\n     public void testSubstringInt() {\n         StrBuilder sb = new StrBuilder (\"hello goodbye\");\n         assertEquals (\"goodbye\", sb.substring(6));", "timestamp": 1248031840, "metainfo": ""}