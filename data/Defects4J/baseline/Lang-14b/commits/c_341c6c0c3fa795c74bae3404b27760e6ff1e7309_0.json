{"sha": "341c6c0c3fa795c74bae3404b27760e6ff1e7309", "log": "Handle badly formatted java version numbers without exceptions  ", "commit": "\n--- a/src/java/org/apache/commons/lang/SystemUtils.java\n+++ b/src/java/org/apache/commons/lang/SystemUtils.java\n /*\n- * Copyright 2002-2005 The Apache Software Foundation.\n+ * Copyright 2002-2006 The Apache Software Foundation.\n  * \n  * Licensed under the Apache License, Version 2.0 (the \"License\");\n  * you may not use this file except in compliance with the License.\n         if (JAVA_VERSION_TRIMMED.length() >= 5) {\n             str = str + JAVA_VERSION_TRIMMED.substring(4, 5);\n         }\n-        return Float.parseFloat(str);\n+        try {\n+            return Float.parseFloat(str);\n+        } catch (Exception ex) {\n+            return 0;\n+        }\n     }\n     \n     /**\n         } else {\n             str = str + \"0\";\n         }\n-        return Integer.parseInt(str);\n+        try {\n+            return Integer.parseInt(str);\n+        } catch (Exception ex) {\n+            return 0;\n+        }\n     }\n \n     /**\n--- a/src/test/org/apache/commons/lang/SystemUtilsTest.java\n+++ b/src/test/org/apache/commons/lang/SystemUtilsTest.java\n /*\n- * Copyright 2003,2004 The Apache Software Foundation.\n+ * Copyright 2003,2004,2006 The Apache Software Foundation.\n  * \n  * Licensed under the Apache License, Version 2.0 (the \"License\");\n  * you may not use this file except in compliance with the License.\n         if (JAVA_VERSION_TRIMMED.length() >= 5) {\n             str = str + JAVA_VERSION_TRIMMED.substring(4, 5);\n         }\n-        return Float.parseFloat(str);\n+        try {\n+            return Float.parseFloat(str);\n+        } catch (Exception ex) {\n+            return 0;\n+        }\n     }\n \n     /**\n         } else {\n             str = str + \"0\";\n         }\n-        return Integer.parseInt(str);\n+        try {\n+            return Integer.parseInt(str);\n+        } catch (Exception ex) {\n+            return 0;\n+        }\n     }\n \n     /**\n         JAVA_VERSION = \"JavaVM-1.3.1\";  //HP-UX\n         JAVA_VERSION_TRIMMED = getJavaVersionTrimmed();\n         assertEquals(1.31f, getJavaVersionAsFloat(), 0.000001f);\n+        JAVA_VERSION = \"XXX-1.3.x\";  //error\n+        JAVA_VERSION_TRIMMED = getJavaVersionTrimmed();\n+        assertEquals(0.0f, getJavaVersionAsFloat(), 0.000001f);\n     }\n \n     public void testJavaVersionAsInt() {\n         JAVA_VERSION = \"JavaVM-1.3.1\";  //HP-UX\n         JAVA_VERSION_TRIMMED = getJavaVersionTrimmed();\n         assertEquals(131, getJavaVersionAsInt());\n+        JAVA_VERSION = \"XXX-1.3.x\";  //error\n+        JAVA_VERSION_TRIMMED = getJavaVersionTrimmed();\n+        assertEquals(0, getJavaVersionAsInt());\n     }\n \n     public void testJavaVersionAtLeastFloat() {", "timestamp": 1143670952, "metainfo": ""}