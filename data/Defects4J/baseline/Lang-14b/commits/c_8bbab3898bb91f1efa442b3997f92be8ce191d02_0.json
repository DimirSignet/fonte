{"sha": "8bbab3898bb91f1efa442b3997f92be8ce191d02", "log": "Implemented TODO to protect unescaper from ArrayIndexOutOfBounds  ", "commit": "\n--- a/src/main/java/org/apache/commons/lang3/text/translate/NumericEntityUnescaper.java\n+++ b/src/main/java/org/apache/commons/lang3/text/translate/NumericEntityUnescaper.java\n      */\n     @Override\n     public int translate(CharSequence input, int index, Writer out) throws IOException {\n-        // TODO: Protect from ArrayIndexOutOfBounds\n-        if(input.charAt(index) == '&' && input.charAt(index + 1) == '#') {\n+        if(input.charAt(index) == '&' && index < (input.length() - 1) && input.charAt(index + 1) == '#') {\n             int start = index + 2;\n             boolean isHex = false;\n \n--- a/src/test/java/org/apache/commons/lang3/text/translate/NumericEntityUnescaperTest.java\n+++ b/src/test/java/org/apache/commons/lang3/text/translate/NumericEntityUnescaperTest.java\n         assertEquals(\"Failed to unescape numeric entities supplementary characters\", expected, result);\n     }\n \n+    public void testOutOfBounds() {\n+        NumericEntityUnescaper neu = new NumericEntityUnescaper();\n+        String input = \"Test &\";\n+        String expected = input;\n+\n+        String result = neu.translate(input);\n+        assertEquals(\"Failed to ignore when last character is &\", expected, result);\n+    }\n+\n }", "timestamp": 1296374479, "metainfo": ""}