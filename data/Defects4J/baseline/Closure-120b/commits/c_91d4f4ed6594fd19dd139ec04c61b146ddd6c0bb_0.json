{"sha": "91d4f4ed6594fd19dd139ec04c61b146ddd6c0bb", "log": "I noticed that if a function is defined:  function foo (param) {} versus var foo = function(param) {}  then in the first case, js doc info is not generated in the externs.  This cl attempts to generated the jsdoc info. ------------- Created by MOE: http://code.google.com/p/moe-java MOE_MIGRATED_REVID=48243384", "commit": "\n--- a/src/com/google/javascript/jscomp/ExternExportsPass.java\n+++ b/src/com/google/javascript/jscomp/ExternExportsPass.java\n         case Token.VAR:\n           definition = definitionParent.getLastChild().getLastChild();\n           break;\n+        case Token.FUNCTION:\n+          if (NodeUtil.isFunctionDeclaration(definitionParent)) {\n+            definition = definitionParent;\n+          } else {\n+            return null;\n+          }\n+          break;\n         default:\n             return null;\n       }\n           return;\n         }\n \n-        if (parent.isAssign() || parent.isVar()) {\n+        if (parent.isAssign() || parent.isVar() || parent.isFunction()) {\n           definitionMap.put(name, parent);\n         }\n \n--- a/test/com/google/javascript/jscomp/ExternExportsPassTest.java\n+++ b/test/com/google/javascript/jscomp/ExternExportsPassTest.java\n         \"};\\n\");\n   }\n \n+  public void testExportSymbolWithFunctionDefinedAsFunction() {\n+\n+    compileAndCheck(\"/**\\n\" +\n+                    \" * @param {string} param1\\n\" +\n+                    \" * @return {string}\\n\" +\n+                    \" */\\n\" +\n+                    \"function internalName(param1) {\" +\n+                      \"return param1\" +\n+                    \"};\" +\n+                    \"goog.exportSymbol('externalName', internalName)\",\n+                    \"/**\\n\" +\n+                    \" * @param {string} param1\\n\" +\n+                    \" * @return {string}\\n\" +\n+                    \" */\\n\" +\n+                    \"var externalName = function(param1) {\\n};\\n\");\n+  }\n+\n+  public void testExportSymbolWithFunctionAlias() {\n+\n+    compileAndCheck(\"/**\\n\" +\n+                    \" * @param {string} param1\\n\" +\n+                    \" */\\n\" +\n+                    \"var y = function(param1) {\" +\n+                    \"};\" +\n+                    \"/**\\n\" +\n+                    \" * @param {string} param1\\n\" +\n+                    \" * @param {string} param2\\n\" +\n+                    \" */\\n\" +\n+                    \"var x = function y(param1, param2) {\" +\n+                    \"};\" +\n+                    \"goog.exportSymbol('externalName', y)\",\n+                    \"/**\\n\" +\n+                    \" * @param {string} param1\\n\" +\n+                    \" * @return {undefined}\\n\" +\n+                    \" */\\n\" +\n+                    \"var externalName = function(param1) {\\n};\\n\");\n+  }\n+\n   private void compileAndCheck(String js, String expected) {\n     Result result = compileAndExportExterns(js);\n ", "timestamp": 1371775362, "metainfo": ""}