{"sha": "1bfafcc711950e8b8adcc1fafa259182a6a02dbc", "log": "Fix missed @suppress in CheckAccessControl  R=nicksantos,pdoyle DELTA=23  (14 added, 2 deleted, 7 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=3186   ", "commit": "\n--- a/src/com/google/javascript/jscomp/SuppressDocWarningsGuard.java\n+++ b/src/com/google/javascript/jscomp/SuppressDocWarningsGuard.java\n           info = NodeUtil.getFunctionJSDocInfo(current);\n         } else if (type == Token.SCRIPT) {\n           info = current.getJSDocInfo();\n+        } else if (type == Token.ASSIGN) {\n+          Node rhs = current.getLastChild();\n+          if (NodeUtil.isFunction(rhs)) {\n+            info = NodeUtil.getFunctionJSDocInfo(rhs);\n+          }\n         }\n \n         if (info != null) {\n--- a/test/com/google/javascript/jscomp/CheckAccessControlsTest.java\n+++ b/test/com/google/javascript/jscomp/CheckAccessControlsTest.java\n       \"function SubFoo() {}\" +\n       \"/** @protected */ SubFoo.prototype.bar = function() {};\",\n     }, null, PRIVATE_OVERRIDE);\n+\n+    testSame(new String[] {\n+      \"/** @constructor */ function Foo() { } \" +\n+      \"/** @private */ Foo.prototype.bar = function() {};\",\n+      \"/** @constructor \\n * @extends {Foo} */ \" +\n+      \"function SubFoo() {}\" +\n+      \"/** @override \\n *@suppress{visibility} */\\n\" +\n+      \" SubFoo.prototype.bar = function() {};\",\n+    });\n   }\n \n   public void testAccessOfStaticMethodOnPrivateConstructor() {\n--- a/test/com/google/javascript/jscomp/TypeCheckTest.java\n+++ b/test/com/google/javascript/jscomp/TypeCheckTest.java\n   }\n \n   public void testObjectLiteralDeclaration4() throws Exception {\n-    testClosureTypesMultipleWarnings(\n+    testClosureTypes(\n         \"var x = {\" +\n         \"  /** @param {boolean} x */ abc: function(x) {}\" +\n         \"};\" +\n         \" * @param {string} x\\n\" +\n         \" * @suppress {duplicate}\\n\" +\n         \" */ x.abc = function(x) {};\",\n-        Lists.newArrayList(\n-            \"variable x.abc redefined with type \" +\n-            \"function (string): undefined, \" +\n-            \"original definition at  [testcode] :1 with type \" +\n-            \"function (boolean): undefined\",\n-            \"assignment to property abc of x\\n\" +\n-            \"found   : function (string): undefined\\n\" +\n-            \"required: function (boolean): undefined\"));\n+        \"assignment to property abc of x\\n\" +\n+        \"found   : function (string): undefined\\n\" +\n+        \"required: function (boolean): undefined\");\n+    // TODO(user): suppress {duplicate} currently also silence the\n+    // redefining type error in the TypeValidator. May be it needs\n+    // a new suppress name instead?\n   }\n \n   public void testObjectLiteralDeclaration5() throws Exception {", "timestamp": 1315339107, "metainfo": ""}