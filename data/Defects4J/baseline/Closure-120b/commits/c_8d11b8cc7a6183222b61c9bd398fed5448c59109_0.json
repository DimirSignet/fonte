{"sha": "8d11b8cc7a6183222b61c9bd398fed5448c59109", "log": "Printing of IN statement inside HOOK inside FOR.  Fixes issue 1033 ------------- Created by MOE: http://code.google.com/p/moe-java MOE_MIGRATED_REVID=48696718", "commit": "\n--- a/src/com/google/javascript/jscomp/CodeGenerator.java\n+++ b/src/com/google/javascript/jscomp/CodeGenerator.java\n       case Token.HOOK: {\n         Preconditions.checkState(childCount == 3);\n         int p = NodeUtil.precedence(type);\n+        Context rhsContext = getContextForNoInOperator(context);\n         addExpr(first, p + 1, context);\n         cc.addOp(\"?\", true);\n-        addExpr(first.getNext(), 1, Context.OTHER);\n+        addExpr(first.getNext(), 1, rhsContext);\n         cc.addOp(\":\", true);\n-        addExpr(last, 1, Context.OTHER);\n+        addExpr(last, 1, rhsContext);\n         break;\n       }\n \n--- a/test/com/google/javascript/jscomp/CodePrinterTest.java\n+++ b/test/com/google/javascript/jscomp/CodePrinterTest.java\n     // Test we correctly handle an in operator inside a comma.\n     assertPrintSame(\"for(x,(y in z);;)foo()\");\n     assertPrintSame(\"for(var x,w=(y in z);;)foo()\");\n+\n+    // And in operator inside a hook.\n+    assertPrintSame(\"for(a=c?0:(0 in d);;)foo()\");\n   }\n \n   public void testLiteralProperty() {", "timestamp": 1372460976, "metainfo": ""}