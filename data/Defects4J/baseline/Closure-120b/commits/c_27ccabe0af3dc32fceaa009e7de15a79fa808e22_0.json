{"sha": "27ccabe0af3dc32fceaa009e7de15a79fa808e22", "log": "Fix bugs in how bind() works on var_arg functions  R=johnlenz DELTA=23  (23 added, 0 deleted, 0 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=4048   ", "commit": "\n--- a/src/com/google/javascript/rhino/jstype/FunctionType.java\n+++ b/src/com/google/javascript/rhino/jstype/FunctionType.java\n       if (origParams != null) {\n         Node params = origParams.cloneTree();\n         for (int i = 1; i < argsToBind && params.getFirstChild() != null; i++) {\n+          if (params.getFirstChild().isVarArgs()) {\n+            break;\n+          }\n           params.removeFirstChild();\n         }\n         builder.withParamsNode(params);\n--- a/test/com/google/javascript/jscomp/TypeCheckTest.java\n+++ b/test/com/google/javascript/jscomp/TypeCheckTest.java\n         \"actual parameter 1 of function does not match formal parameter\\n\" +\n         \"found   : boolean\\n\" +\n         \"required: string\");\n+  }\n+\n+  public void testFunctionBind4() throws Exception {\n+    testTypes(\n+        \"/** @param {...number} x */\" +\n+        \"function f(x) {}\" +\n+        \"f.bind(null, 3, 3, 3)(true);\",\n+        \"actual parameter 1 of function does not match formal parameter\\n\" +\n+        \"found   : boolean\\n\" +\n+        \"required: (number|undefined)\");\n+  }\n+\n+  public void testFunctionBind5() throws Exception {\n+    testTypes(\n+        \"/** @param {...number} x */\" +\n+        \"function f(x) {}\" +\n+        \"f.bind(null, true)(3, 3, 3);\",\n+        \"actual parameter 2 of f.bind does not match formal parameter\\n\" +\n+        \"found   : boolean\\n\" +\n+        \"required: (number|undefined)\");\n   }\n \n   public void testGoogBind1() throws Exception {", "timestamp": 1325783626, "metainfo": ""}