{"sha": "672e3a8ead2970181c32cf5fc70a3ea3d020c1fc", "log": "Applying test for #LANG-303, and a fix.   ", "commit": "\n--- a/src/java/org/apache/commons/lang/time/FastDateFormat.java\n+++ b/src/java/org/apache/commons/lang/time/FastDateFormat.java\n  * limitations under the License.\n  */\n package org.apache.commons.lang.time;\n+\n+import java.io.IOException;\n+import java.io.ObjectInputStream;\n \n import java.text.DateFormat;\n import java.text.DateFormatSymbols;\n     /**\n      * The parsed rules.\n      */\n-    private Rule[] mRules;\n+    private transient Rule[] mRules;\n     /**\n      * The estimated maximum length.\n      */\n-    private int mMaxLengthEstimate;\n+    private transient int mMaxLengthEstimate;\n \n     //-----------------------------------------------------------------------\n     /**\n      */\n     public String toString() {\n         return \"FastDateFormat[\" + mPattern + \"]\";\n+    }\n+\n+    // Serializing\n+    //-----------------------------------------------------------------------\n+    private void readObject(ObjectInputStream in) throws IOException, ClassNotFoundException {\n+        in.defaultReadObject();\n+        init();\n     }\n     \n     // Rules\n--- a/src/test/org/apache/commons/lang/time/FastDateFormatTest.java\n+++ b/src/test/org/apache/commons/lang/time/FastDateFormatTest.java\n import junit.framework.TestSuite;\n import junit.textui.TestRunner;\n \n+import org.apache.commons.lang.SerializationUtils;\n+\n /**\n  * Unit tests {@link org.apache.commons.lang.time.FastDateFormat}.\n  *\n         cal.set(1,2,2);\n         assertEquals(\"0001/03/02\", format.format(cal));\n     }\n+\n+    public void testLang303() {\n+        FastDateFormat format = FastDateFormat.getInstance(\"yyyy/MM/dd\");\n+        format = (FastDateFormat) SerializationUtils.deserialize( SerializationUtils.serialize( format ) );\n+    }\n }", "timestamp": 1167170747, "metainfo": ""}