{"sha": "45be5ea3b6534eb6c34fd0c160cf0b62ba65ca5c", "log": "DeadAssignmentElimination runs once, so should the unit test.  R=acleung DELTA=19  (15 added, 0 deleted, 4 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=277279   ", "commit": "\n--- a/test/com/google/javascript/jscomp/DeadAssignmentsEliminationTest.java\n+++ b/test/com/google/javascript/jscomp/DeadAssignmentsEliminationTest.java\n             compiler, js, new DeadAssignmentsElimination(compiler));\n       }\n     };\n+  }\n+\n+  @Override\n+  protected int getNumRepetitions() {\n+    return 1;\n   }\n \n   public void testSimple() {\n     inFunction(\"var x; return\");\n   }\n \n+  public void testAssignmentSamples() {\n+    // We want this to be \"var x\" in these cases.\n+    inFunction(\"var x = 2;\");\n+    inFunction(\"var x = 2; x++;\", \"var x=2; void 0\");\n+    inFunction(\"var x; x=x++;\", \"var x;x++\");\n+    inFunction(\"var x; x+=1;\", \"var x;x+1\");\n+  }\n+\n   public void testAssignmentInArgs() {\n     inFunction(\"var x; foo(x = 1);\", \"var x; foo(1);\");\n     inFunction(\"var x; return foo(x = 1);\", \"var x; return foo(1);\");\n     inFunction(\"var a; a = (a *= 2)\", \"var a; a*2\");\n \n     // Note a = (a++) is not same as a++. Only if 'a' is dead.\n-    inFunction(\"var a; a = (a++)\", \"var a; void 0\");\n-    inFunction(\"var a; a = (++a)\", \"var a; void 0\");\n+    inFunction(\"var a; a = (a++)\", \"var a; a++\"); // Preferred: \"var a\"\n+    inFunction(\"var a; a = (++a)\", \"var a; ++a\"); // Preferred: \"var a\"\n \n     inFunction(\"var a; a = (b = (a = 1))\", \"var a; b = 1\");\n     inFunction(\"var a; a = (b = (a *= 2))\", \"var a; b = a * 2\");\n     // Include b as local.\n     inFunction(\"var a,b; a = (b = (a = 1))\", \"var a,b; 1\");\n     inFunction(\"var a,b; a = (b = (a *= 2))\", \"var a,b; a * 2\");\n-    inFunction(\"var a,b; a = (b = (a++))\", \"var a,b; void 0\");\n-    inFunction(\"var a,b; a = (b = (++a))\", \"var a,b; void 0\");\n+    inFunction(\"var a,b; a = (b = (a++))\",\n+               \"var a,b; a++\"); // Preferred: \"var a,b\"\n+    inFunction(\"var a,b; a = (b = (++a))\",\n+               \"var a,b; ++a\"); // Preferred: \"var a,b\"\n \n     inFunction(\"var a; a += (a++)\", \"var a; a + a++\");\n     inFunction(\"var a; a += (++a)\", \"var a; a+ (++a)\");", "timestamp": 1285884688, "metainfo": ""}