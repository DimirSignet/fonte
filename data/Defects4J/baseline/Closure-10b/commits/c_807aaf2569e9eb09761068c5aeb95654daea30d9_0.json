{"sha": "807aaf2569e9eb09761068c5aeb95654daea30d9", "log": "check var_args properly Fixes issue 229.  R=moedinger DELTA=20  (17 added, 0 deleted, 3 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=201482   ", "commit": "\n--- a/src/com/google/javascript/jscomp/TypeCheck.java\n+++ b/src/com/google/javascript/jscomp/TypeCheck.java\n \n     Iterator<Node> parameters = functionType.getParameters().iterator();\n     int ordinal = 0;\n-    while (arguments.hasNext() && parameters.hasNext()) {\n-      Node parameter = parameters.next();\n-      Node argument = arguments.next();\n+    Node parameter = null;\n+    Node argument = null;\n+    while (arguments.hasNext() &&\n+           (parameters.hasNext() ||\n+            parameter != null && parameter.isVarArgs())) {\n+      // If there are no parameters left in the list, then the while loop\n+      // above implies that this must be a var_args function.\n+      if (parameters.hasNext()) {\n+        parameter = parameters.next();\n+      }\n+      argument = arguments.next();\n       ordinal++;\n \n       validator.expectArgumentMatchesParameter(t, argument,\n--- a/test/com/google/javascript/jscomp/TypeCheckTest.java\n+++ b/test/com/google/javascript/jscomp/TypeCheckTest.java\n         \"Function f: called with 2 argument(s). \" +\n         \"Function requires at least 1 argument(s) \" +\n         \"and no more than 1 argument(s).\");\n+  }\n+\n+  public void testFunctionArguments16() throws Exception {\n+    testTypes(\n+        \"/** @param {...number} var_args */\" +\n+        \"function g(var_args) {} g(1, true);\",\n+        \"actual parameter 2 of g does not match formal parameter\\n\" +\n+        \"found   : boolean\\n\" +\n+        \"required: (number|undefined)\");\n   }\n \n   public void testPrintFunctionName1() throws Exception {", "timestamp": 1283446147, "metainfo": ""}