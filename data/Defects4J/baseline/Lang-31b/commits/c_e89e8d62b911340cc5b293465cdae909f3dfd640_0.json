{"sha": "e89e8d62b911340cc5b293465cdae909f3dfd640", "log": "Applying unit test/fix for LANG-328  ", "commit": "\n--- a/src/java/org/apache/commons/lang/LocaleUtils.java\n+++ b/src/java/org/apache/commons/lang/LocaleUtils.java\n                 throw new IllegalArgumentException(\"Invalid locale format: \" + str);\n             }\n             char ch3 = str.charAt(3);\n+            if (ch3 == '_') {\n+                return new Locale(str.substring(0, 2), \"\", str.substring(4));\n+            }\n             char ch4 = str.charAt(4);\n             if (ch3 < 'A' || ch3 > 'Z' || ch4 < 'A' || ch4 > 'Z') {\n                 throw new IllegalArgumentException(\"Invalid locale format: \" + str);\n--- a/src/test/org/apache/commons/lang/LocaleUtilsTest.java\n+++ b/src/test/org/apache/commons/lang/LocaleUtilsTest.java\n         } catch (UnsupportedOperationException ex) {}\n     }\n \n+    /**\n+     * Tests #LANG-328 - only language+variant\n+     */\n+    public void testLang328() {\n+        assertValidToLocale(\"fr__POSIX\", \"fr\", \"\", \"POSIX\");\n+    }\n+\n }", "timestamp": 1178063401, "metainfo": ""}