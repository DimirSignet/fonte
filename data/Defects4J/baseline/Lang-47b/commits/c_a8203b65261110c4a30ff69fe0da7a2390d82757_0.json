{"sha": "a8203b65261110c4a30ff69fe0da7a2390d82757", "log": "Fixng LANG-295 - thisBuf.length calls. There were two of the calls, so I've committed a unit test showing things are broken and a fix in both cases.   ", "commit": "\n--- a/src/java/org/apache/commons/lang/text/StrBuilder.java\n+++ b/src/java/org/apache/commons/lang/text/StrBuilder.java\n      */\n     public boolean contains(char ch) {\n         char[] thisBuf = buffer;\n-        for (int i = 0; i < thisBuf.length; i++) {\n+        for (int i = 0; i < this.size; i++) {\n             if (thisBuf[i] == ch) {\n                 return true;\n             }\n             return -1;\n         }\n         char[] thisBuf = buffer;\n-        for (int i = startIndex; i < thisBuf.length; i++) {\n+        for (int i = startIndex; i < size; i++) {\n             if (thisBuf[i] == ch) {\n                 return i;\n             }\n--- a/src/test/org/apache/commons/lang/text/StrBuilderTest.java\n+++ b/src/test/org/apache/commons/lang/text/StrBuilderTest.java\n         assertEquals(-1, sb.indexOf(\"three\"));\n     }\n \n+    //-----------------------------------------------------------------------\n+    public void testLang295() {\n+        StrBuilder sb = new StrBuilder(\"onetwothree\");\n+        sb.deleteFirst(\"three\");\n+        assertFalse( \"The contains(char) method is looking beyond the end of the string\", sb.contains('h'));\n+        assertEquals( \"The indexOf(char) method is looking beyond the end of the string\", -1, sb.indexOf('h'));\n+    }\n+\n }", "timestamp": 1162335654, "metainfo": ""}