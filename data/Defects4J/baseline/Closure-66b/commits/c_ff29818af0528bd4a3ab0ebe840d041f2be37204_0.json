{"sha": "ff29818af0528bd4a3ab0ebe840d041f2be37204", "log": "Add a couple of unit tests that show what happens with enums with the @export annotation  R=nicksantos DELTA=29  (28 added, 0 deleted, 1 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=211   ", "commit": "\n--- a/test/com/google/javascript/jscomp/ExternExportsPassTest.java\n+++ b/test/com/google/javascript/jscomp/ExternExportsPassTest.java\n package com.google.javascript.jscomp;\n \n \n+import com.google.common.base.Joiner;\n+\n import junit.framework.TestCase;\n \n \n         \" */\\n\" +\n         \"var externalName = function(a) {\\n}\");\n   }\n+\n+  /**\n+   * Enums are not currently handled.\n+   */\n+   public void testExportEnum() {\n+     compileAndCheck(\n+         \"/** @enum {string}\\n @export */ var E = {A:1, B:2};\" +\n+         \"goog.exportSymbol('E', E);\",\n+         // TODO(johnlenz): We would like this:\n+         // \"/**\\n\" +\n+         // \" * @enum {string}\\n\" +\n+         //\" */\\n\" +\n+         \"var E = {}\"\n+     );\n+   }\n \n   /** If we export a property with \"prototype\" as a path component, there\n     * is no need to emit the initializer for prototype because every namespace\n \n     Result result = compiler.compile(externFiles, inputs, options);\n \n-    assertTrue(result.success);\n+    if (!result.success) {\n+      String msg = \"Errors:\";\n+      msg += Joiner.on(\"\\n\").join(result.errors);\n+      assertTrue(msg, result.success);\n+    }\n \n     return result;\n   }\n--- a/test/com/google/javascript/jscomp/GenerateExportsTest.java\n+++ b/test/com/google/javascript/jscomp/GenerateExportsTest.java\n          \"var goog = {}; function F() {}\" +\n          \"function G() {} goog.inherits(G, F); google_exportSymbol('G', G);\");\n   }\n+\n+  public void testExportEnum() {\n+    // TODO(johnlenz): Issue 310, should the values also be externed?\n+    test(\"/** @enum {string}\\n @export */ var E = {A:1, B:2};\",\n+         \"/** @enum {string}\\n @export */ var E = {A:1, B:2};\" +\n+         \"google_exportSymbol('E', E);\");\n+  }\n }", "timestamp": 1294266506, "metainfo": ""}