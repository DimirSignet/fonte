{"sha": "9f8345afa4e5eaa24e3ff6a84d16691764698799", "log": "Escape start-html comments in strings,  because certain versions of webkit don't parse them properly. We already escape end html comments and </script> tags in this way, so this seems reasonable.  R=adeboor DELTA=14  (12 added, 0 deleted, 2 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=247   ", "commit": "\n--- a/src/com/google/javascript/jscomp/CodeGenerator.java\n+++ b/src/com/google/javascript/jscomp/CodeGenerator.java\n             sb.append(c);\n           }\n           break;\n-        case '<':                       // Break </script into <\\/script\n+        case '<':\n+          // Break </script into <\\/script\n           final String END_SCRIPT = \"/script\";\n+\n+          // Break <!-- into <\\!--\n+          final String START_COMMENT = \"!--\";\n+\n           if (s.regionMatches(true, i + 1, END_SCRIPT, 0,\n-              END_SCRIPT.length())) {\n+                              END_SCRIPT.length())) {\n+            sb.append(\"<\\\\\");\n+          } else if (s.regionMatches(false, i + 1, START_COMMENT, 0,\n+                                     START_COMMENT.length())) {\n             sb.append(\"<\\\\\");\n           } else {\n             sb.append(c);\n--- a/test/com/google/javascript/jscomp/CodePrinterTest.java\n+++ b/test/com/google/javascript/jscomp/CodePrinterTest.java\n     assertPrint(\"' --></script>'\", \"\\\" --\\\\><\\\\/script>\\\"\");\n \n     assertPrint(\"/--> <\\\\/script>/g\", \"/--\\\\> <\\\\/script>/g\");\n+\n+    // Break HTML start comments. Certain versions of Webkit\n+    // begin an HTML comment when they see this.\n+    assertPrint(\"'<!-- I am a string -->'\", \"\\\"<\\\\!-- I am a string --\\\\>\\\"\");\n \n     // Precedence\n     assertPrint(\"a ? delete b[0] : 3\", \"a?delete b[0]:3\");", "timestamp": 1294763810, "metainfo": ""}