{"sha": "31f9f6bc45146e7e7e24af2ef9bb410fa5c8f8c6", "log": "Added the second fix from Mark McDowell [mcdoma@ncs.com] for bug #14062   ", "commit": "\n--- a/src/java/org/apache/commons/lang/StringUtils.java\n+++ b/src/java/org/apache/commons/lang/StringUtils.java\n  * @author <a href=\"mailto:rand_mcneely@yahoo.com\">Rand McNeely</a>\n  * @author <a href=\"mailto:scolebourne@joda.org\">Stephen Colebourne</a>\n  * @author <a href=\"mailto:fredrik@westermarck.com\">Fredrik Westermarck</a>\n- * @version $Id: StringUtils.java,v 1.25 2002/11/16 10:41:03 scolebourne Exp $\n+ * @version $Id: StringUtils.java,v 1.26 2002/11/23 00:54:24 bayard Exp $\n  */\n public class StringUtils {\n \n \n         String[] list = new String[listSize];\n         int i = 0;\n+        int lastTokenBegin = 0;\n+        int lastTokenEnd = 0;\n         while (tok.hasMoreTokens()) {\n             if (max > 0 && i == listSize - 1) {\n                 // In the situation where we hit the max yet have\n                 // tokens left over in our input, the last list\n                 // element gets all remaining text.\n-                StringBuffer buf = new StringBuffer((int) 1.2 * str.length() * (listSize - i) / listSize);\n-                while (tok.hasMoreTokens()) {\n-                    buf.append(tok.nextToken());\n-                    if (tok.hasMoreTokens()) {\n-                        buf.append(separator);\n-                    }\n-                }\n-                list[i] = buf.toString();\n+                String endToken = tok.nextToken();\n+                lastTokenBegin = str.indexOf(endToken, lastTokenEnd);\n+                list[i] = str.substring(lastTokenBegin);\n                 break;\n             } else {\n                 list[i] = tok.nextToken();\n+                lastTokenBegin = str.indexOf(list[i], lastTokenEnd);\n+                lastTokenEnd = lastTokenBegin + list[i].length();\n             }\n             i++;\n         }", "timestamp": 1038012864, "metainfo": ""}