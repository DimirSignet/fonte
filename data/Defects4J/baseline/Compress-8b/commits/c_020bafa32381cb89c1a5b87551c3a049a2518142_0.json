{"sha": "020bafa32381cb89c1a5b87551c3a049a2518142", "log": "Need to ensure that data is written to the file as some archives check this  ", "commit": "\n--- a/src/test/java/org/apache/commons/compress/archivers/ArchiveOutputStreamTest.java\n+++ b/src/test/java/org/apache/commons/compress/archivers/ArchiveOutputStreamTest.java\n \n import java.io.ByteArrayOutputStream;\n import java.io.File;\n+import java.io.FileInputStream;\n import java.io.IOException;\n+import java.io.InputStream;\n import java.io.OutputStream;\n \n import org.apache.commons.compress.AbstractTestCase;\n import org.apache.commons.compress.archivers.jar.JarArchiveEntry;\n import org.apache.commons.compress.archivers.tar.TarArchiveEntry;\n import org.apache.commons.compress.archivers.zip.ZipArchiveEntry;\n+import org.apache.commons.compress.utils.IOUtils;\n \n public class ArchiveOutputStreamTest extends AbstractTestCase {\n \n         ArchiveOutputStream aos1;\n         aos1 = factory.createArchiveOutputStream(archiveType, out1);\n         aos1.putArchiveEntry(aos1.createArchiveEntry(dummy, \"dummy\"));\n+        InputStream is = new FileInputStream(dummy);\n+        IOUtils.copy(is, aos1);\n+        is.close();\n         aos1.closeArchiveEntry();\n         aos1.close(); // omitted finish\n \n+        // TODO - check if archives ensure that data has been written to the stream?\n+        \n         aos1 = factory.createArchiveOutputStream(archiveType, out1);\n         try {\n             aos1.closeArchiveEntry();", "timestamp": 1240863294, "metainfo": ""}