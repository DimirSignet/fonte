{"sha": "70a6a3dcc6de219ae89b82e46fe39b190bf03306", "log": "Support negative weekyears; fixed minor bug in matching parser.   ", "commit": "\n--- a/JodaTime/src/java/org/joda/time/format/DateTimeFormatterBuilder.java\n+++ b/JodaTime/src/java/org/joda/time/format/DateTimeFormatterBuilder.java\n      * @return this DateTimeFormatterBuilder\n      */\n     public DateTimeFormatterBuilder appendWeekyear(final int minDigits, final int maxDigits) {\n-        return appendDecimal\n-            (iChronoUTC.weekyear(), minDigits, maxDigits);\n+        return appendSignedDecimal(iChronoUTC.weekyear(), minDigits, maxDigits);\n     }\n \n     /**\n                         bestValidState = bucket.saveState();\n                     }\n                 } else {\n-                    bucket.undoChanges(originalState);\n                     if (parsePos < 0) {\n                         parsePos = ~parsePos;\n                         if (parsePos > bestInvalidPos) {\n                         }\n                     }\n                 }\n+                bucket.restoreState(originalState);\n             }\n \n             if (bestValidPos > position || (bestValidPos == position && isOptional)) {\n                 // Restore the state to the best valid parse.\n                 if (bestValidState != null) {\n-                    bucket.undoChanges(bestValidState);\n+                    bucket.restoreState(bestValidState);\n                 }\n                 return bestValidPos;\n             }", "timestamp": 1073779503, "metainfo": ""}