{"sha": "f0b7de0860f5f72ac914c4c7bb6bf5457009bd65", "log": "Period formatting could end up in an infinite loop on IBM JDK 1.4.2 problem investigated by Jeroen van Erp with patch supplied   ", "commit": "\n--- a/JodaTime/src/java/org/joda/time/format/PeriodFormatterBuilder.java\n+++ b/JodaTime/src/java/org/joda/time/format/PeriodFormatterBuilder.java\n     private static final int MILLIS = 7;\n     private static final int SECONDS_MILLIS = 8;\n     private static final int SECONDS_OPTIONAL_MILLIS = 9;\n+    private static final int MAX_FIELD = SECONDS_OPTIONAL_MILLIS;\n \n     private int iMinPrintedDigits;\n     private int iPrintZeroSetting;\n                     return Long.MAX_VALUE;\n                 case PRINT_ZERO_RARELY_LAST:\n                     if (isZero(period) && iFieldFormatters[iFieldType] == this) {\n-                        for (int i = iFieldType + 1; i < 10; i++) {\n+                        for (int i = iFieldType + 1; i <= MAX_FIELD; i++) {\n                             if (isSupported(type, i) && iFieldFormatters[i] != null) {\n                                 return Long.MAX_VALUE;\n                             }\n                     break;\n                 case PRINT_ZERO_RARELY_FIRST:\n                     if (isZero(period) && iFieldFormatters[iFieldType] == this) {\n-                        for (int i = Math.min(iFieldType, 8) - 1; i >= 0; i++) {\n+                        int i = Math.min(iFieldType, 8);  // line split out for IBM JDK\n+                        i--;                              // see bug 1660490\n+                        for (; i >= 0 && i <= MAX_FIELD; i++) {\n                             if (isSupported(type, i) && iFieldFormatters[i] != null) {\n                                 return Long.MAX_VALUE;\n                             }", "timestamp": 1173114833, "metainfo": ""}