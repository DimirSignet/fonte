{"sha": "9e112e07e45797166bc52fccad28e62349dd0fa3", "log": "Fix fromDateFields() where j.u.Date before 1970 reported by Jure Mercun  ", "commit": "\n--- a/JodaTime/src/java/org/joda/time/LocalTime.java\n+++ b/JodaTime/src/java/org/joda/time/LocalTime.java\n             date.getHours(),\n             date.getMinutes(),\n             date.getSeconds(),\n-            (int) (date.getTime() % 1000)\n+            (((int) (date.getTime() % 1000)) + 1000) % 1000\n         );\n     }\n \n--- a/JodaTime/src/java/org/joda/time/TimeOfDay.java\n+++ b/JodaTime/src/java/org/joda/time/TimeOfDay.java\n             date.getHours(),\n             date.getMinutes(),\n             date.getSeconds(),\n-            (int) (date.getTime() % 1000)\n+            (((int) (date.getTime() % 1000)) + 1000) % 1000\n         );\n     }\n \n--- a/JodaTime/src/test/org/joda/time/TestLocalTime_Constructors.java\n+++ b/JodaTime/src/test/org/joda/time/TestLocalTime_Constructors.java\n     }\n \n     //-----------------------------------------------------------------------\n-    public void testFactory_FromDateFields_Date() throws Exception {\n+    public void testFactory_FromDateFields_after1970() throws Exception {\n         GregorianCalendar cal = new GregorianCalendar(1970, 1, 3, 4, 5, 6);\n         cal.set(Calendar.MILLISECOND, 7);\n         LocalTime expected = new LocalTime(4, 5, 6, 7);\n         assertEquals(expected, LocalTime.fromDateFields(cal.getTime()));\n+    }\n+\n+    public void testFactory_FromDateFields_before1970() throws Exception {\n+        GregorianCalendar cal = new GregorianCalendar(1969, 1, 3, 4, 5, 6);\n+        cal.set(Calendar.MILLISECOND, 7);\n+        LocalTime expected = new LocalTime(4, 5, 6, 7);\n+        assertEquals(expected, LocalTime.fromDateFields(cal.getTime()));\n+    }\n+\n+    public void testFactory_FromDateFields_null() throws Exception {\n         try {\n             LocalTime.fromDateFields((Date) null);\n             fail();\n--- a/JodaTime/src/test/org/joda/time/TestTimeOfDay_Constructors.java\n+++ b/JodaTime/src/test/org/joda/time/TestTimeOfDay_Constructors.java\n     }\n \n     //-----------------------------------------------------------------------\n-    public void testFactory_FromDateFields() throws Exception {\n+    public void testFactory_FromDateFields_after1970() throws Exception {\n         GregorianCalendar cal = new GregorianCalendar(1970, 1, 3, 4, 5, 6);\n         cal.set(Calendar.MILLISECOND, 7);\n         TimeOfDay expected = new TimeOfDay(4, 5, 6, 7);\n         assertEquals(expected, TimeOfDay.fromDateFields(cal.getTime()));\n+    }\n+\n+    public void testFactory_FromDateFields_before1970() throws Exception {\n+        GregorianCalendar cal = new GregorianCalendar(1969, 1, 3, 4, 5, 6);\n+        cal.set(Calendar.MILLISECOND, 7);\n+        TimeOfDay expected = new TimeOfDay(4, 5, 6, 7);\n+        assertEquals(expected, TimeOfDay.fromDateFields(cal.getTime()));\n+    }\n+\n+    public void testFactory_FromDateFields_null() throws Exception {\n         try {\n             TimeOfDay.fromDateFields(null);\n             fail();", "timestamp": 1266143861, "metainfo": ""}