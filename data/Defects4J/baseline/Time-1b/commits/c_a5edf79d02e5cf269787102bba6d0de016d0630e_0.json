{"sha": "a5edf79d02e5cf269787102bba6d0de016d0630e", "log": "Guard against locale changing concurrently.   ", "commit": "\n--- a/JodaTime/src/java/org/joda/time/format/DateTimeFormatterBuilder.java\n+++ b/JodaTime/src/java/org/joda/time/format/DateTimeFormatterBuilder.java\n                 throw new UnsupportedOperationException();\n             }\n \n+            if (locale == null) {\n+                // Guard against default locale changing concurrently.\n+                locale = Locale.getDefault();\n+            }\n+\n             int len = elements.length;\n             for (int i = 0; i < len; i++) {\n                 elements[i].printTo(buf, instant, chrono, displayOffset, displayZone, locale);\n                 throw new UnsupportedOperationException();\n             }\n \n+            if (locale == null) {\n+                // Guard against default locale changing concurrently.\n+                locale = Locale.getDefault();\n+            }\n+\n             int len = elements.length;\n             for (int i = 0; i < len; i++) {\n                 elements[i].printTo(out, instant, chrono, displayOffset, displayZone, locale);\n                 throw new UnsupportedOperationException();\n             }\n \n+            if (locale == null) {\n+                // Guard against default locale changing concurrently.\n+                locale = Locale.getDefault();\n+            }\n+\n             int len = elements.length;\n             for (int i=0; i<len; i++) {\n                 elements[i].printTo(buf, partial, locale);\n             DateTimePrinter[] elements = iPrinters;\n             if (elements == null) {\n                 throw new UnsupportedOperationException();\n+            }\n+\n+            if (locale == null) {\n+                // Guard against default locale changing concurrently.\n+                locale = Locale.getDefault();\n             }\n \n             int len = elements.length;", "timestamp": 1189360160, "metainfo": ""}