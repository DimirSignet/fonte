{"sha": "a1c49b11a34f950da65cd7288ee9a0d0c3bf0b86", "log": "Now that the consumers of the source map can transparently switch formats on the fly, switch the default format to the more compact one.  R=nicksantos DELTA=12  (7 added, 0 deleted, 5 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=1086   ", "commit": "\n--- a/src/com/google/javascript/jscomp/AbstractCommandLineRunner.java\n+++ b/src/com/google/javascript/jscomp/AbstractCommandLineRunner.java\n     }\n \n     private SourceMap.Format sourceMapFormat =\n-      SourceMap.Format.LEGACY;\n+      SourceMap.Format.DEFAULT;\n \n     /**\n      * The detail supplied in the source map file, if generated.\n--- a/src/com/google/javascript/jscomp/CompilerOptions.java\n+++ b/src/com/google/javascript/jscomp/CompilerOptions.java\n \n   /** The source map file format */\n   public SourceMap.Format sourceMapFormat =\n-      SourceMap.Format.LEGACY;\n+      SourceMap.Format.DEFAULT;\n \n   /**\n    * Charset to use when generating code.  If null, then output ASCII.\n--- a/src/com/google/javascript/jscomp/SourceMap.java\n+++ b/src/com/google/javascript/jscomp/SourceMap.java\n      LEGACY {\n        @Override SourceMap getInstance() {\n          return new SourceMap(new SourceMapGeneratorV1());\n+       }\n+     },\n+     DEFAULT {\n+       @Override SourceMap getInstance() {\n+         return new SourceMap(new SourceMapGeneratorV2());\n        }\n      },\n      EXPERIMENTIAL {\n--- a/test/com/google/debugging/sourcemap/SourceMapGeneratorV1Test.java\n+++ b/test/com/google/debugging/sourcemap/SourceMapGeneratorV1Test.java\n import com.google.javascript.jscomp.Result;\n import com.google.javascript.jscomp.SourceMap;\n import com.google.javascript.jscomp.SourceMap.DetailLevel;\n+import com.google.javascript.jscomp.SourceMap.Format;\n \n import junit.framework.TestCase;\n \n       String fileName2) {\n     Compiler compiler = new Compiler();\n     CompilerOptions options = new CompilerOptions();\n+    options.sourceMapFormat = Format.LEGACY;\n     options.sourceMapOutputPath = \"testcode_source_map.out\";\n     options.sourceMapDetailLevel = detailLevel;\n \n--- a/test/com/google/javascript/jscomp/CommandLineRunnerTest.java\n+++ b/test/com/google/javascript/jscomp/CommandLineRunnerTest.java\n     args.add(\"--js_output_file\");\n     args.add(\"/path/to/out.js\");\n     testSame(\"var x = 3;\");\n-    assertEquals(SourceMap.Format.LEGACY,\n+    assertEquals(SourceMap.Format.DEFAULT,\n         lastCompiler.getOptions().sourceMapFormat);\n   }\n ", "timestamp": 1301077731, "metainfo": ""}