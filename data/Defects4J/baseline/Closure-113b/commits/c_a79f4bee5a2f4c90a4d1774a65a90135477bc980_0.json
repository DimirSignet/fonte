{"sha": "a79f4bee5a2f4c90a4d1774a65a90135477bc980", "log": "Replace / with File.separator Fixes issue 656 Contributed by Ben McCann  Revision created by MOE tool push_codebase.  R=malteubl DELTA=7  (3 added, 0 deleted, 4 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=4173   ", "commit": "\n--- a/src/com/google/javascript/jscomp/ProcessCommonJSModules.java\n+++ b/src/com/google/javascript/jscomp/ProcessCommonJSModules.java\n  */\n package com.google.javascript.jscomp;\n \n+import java.io.File;\n import java.net.URI;\n import java.net.URISyntaxException;\n \n  */\n class ProcessCommonJSModules implements CompilerPass {\n \n-  public static final String  DEFAULT_FILENAME_PREFIX = \"./\";\n+  public static final String  DEFAULT_FILENAME_PREFIX = \".\" + File.separator;\n \n   private static final String MODULE_NAME_PREFIX = \"module$\";\n \n    */\n   public static String toModuleName(String filename) {\n     return MODULE_NAME_PREFIX +\n-        filename.replaceAll(\"^\\\\./\", \"\").replaceAll(\"/\", \"\\\\$\")\n+        filename.replaceAll(\"^\\\\.\" + File.separator, \"\")\n+            .replaceAll(File.separator, \"\\\\$\")\n             .replaceAll(\"\\\\.js$\", \"\").replaceAll(\"-\", \"_\");\n   }\n \n     requiredFilename = requiredFilename.replaceAll(\"\\\\.js$\", \"\");\n     currentFilename = currentFilename.replaceAll(\"\\\\.js$\", \"\");\n \n-    if (requiredFilename.startsWith(\"./\") ||\n-        requiredFilename.startsWith(\"../\")) {\n+    if (requiredFilename.startsWith(\".\" + File.separator) ||\n+        requiredFilename.startsWith(\"..\" + File.separator)) {\n       try {\n         requiredFilename = (new URI(currentFilename)).resolve(new URI(requiredFilename))\n             .toString();", "timestamp": 1328583155, "metainfo": ""}