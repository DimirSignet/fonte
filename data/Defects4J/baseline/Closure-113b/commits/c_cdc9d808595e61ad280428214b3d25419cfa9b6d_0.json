{"sha": "cdc9d808595e61ad280428214b3d25419cfa9b6d", "log": "Tests for xid as \"@idGenerator {mapped}\". ------------- Created by MOE: http://code.google.com/p/moe-java MOE_MIGRATED_REVID=44578352", "commit": "\n--- a/test/com/google/javascript/jscomp/IntegrationTest.java\n+++ b/test/com/google/javascript/jscomp/IntegrationTest.java\n     assertEquals(\n         ImmutableMap.of(\"foo\", new Integer(1)),\n         lastCompiler.getPassConfig().getIntermediateState().cssNames);\n+  }\n+\n+  public void testReplaceIdGeneratorsTest() {\n+    CompilerOptions options = createCompilerOptions();\n+    options.replaceIdGenerators = true;\n+\n+    options.setIdGenerators(ImmutableMap.<String, RenamingMap>of(\n+        \"xid\", new RenamingMap() {\n+      @Override\n+      public String get(String value) {\n+        return \":\" + value + \":\";\n+      }\n+    }));\n+\n+    test(options, \"/** @idGenerator {mapped} */\"\n+         + \"var xid = function() {};\\n\"\n+         + \"function f() {\\n\"\n+         + \"  return xid('foo');\\n\"\n+         + \"}\",\n+         \"var xid = function() {};\\n\"\n+         + \"function f() {\\n\"\n+         + \"  return ':foo:';\\n\"\n+         + \"}\");\n   }\n \n   public void testRemoveClosureAsserts() {\n--- a/test/com/google/javascript/jscomp/ReplaceIdGeneratorsTest.java\n+++ b/test/com/google/javascript/jscomp/ReplaceIdGeneratorsTest.java\n         \"foo.bar = ':foo:';\");\n   }\n \n+  public void testMapped2() {\n+    test(\"/** @idGenerator {mapped}*/ xid = function() {};\" +\n+        \"foo.bar = function() { return xid('foo'); };\",\n+\n+        \"xid = function() {};\" +\n+        \"foo.bar = function() { return ':foo:'; };\",\n+\n+        \"xid = function() {};\" +\n+        \"foo.bar = function() { return ':foo:'; };\");\n+  }\n+\n   public void testTwoGenerators() {\n     test(\"/** @idGenerator */ var id1 = function() {};\" +\n          \"/** @idGenerator */ var id2 = function() {};\" +", "timestamp": 1364512790, "metainfo": ""}