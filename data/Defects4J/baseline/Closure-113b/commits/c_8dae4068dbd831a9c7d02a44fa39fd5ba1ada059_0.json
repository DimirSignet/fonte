{"sha": "8dae4068dbd831a9c7d02a44fa39fd5ba1ada059", "log": "Add suppport for the JavaScript language mode flag (language_in)  R=mwr DELTA=38  (27 added, 5 deleted, 6 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=5592   ", "commit": "\n--- a/src/com/google/javascript/jscomp/AbstractCommandLineRunner.java\n+++ b/src/com/google/javascript/jscomp/AbstractCommandLineRunner.java\n     }\n \n     if (config.languageIn.length() > 0) {\n-      if (config.languageIn.equals(\"ECMASCRIPT5_STRICT\") ||\n-          config.languageIn.equals(\"ES5_STRICT\")) {\n-        options.setLanguageIn(CompilerOptions.LanguageMode.ECMASCRIPT5_STRICT);\n-      } else if (config.languageIn.equals(\"ECMASCRIPT5\") ||\n-          config.languageIn.equals(\"ES5\")) {\n-        options.setLanguageIn(CompilerOptions.LanguageMode.ECMASCRIPT5);\n-      } else if (config.languageIn.equals(\"ECMASCRIPT3\") ||\n-                 config.languageIn.equals(\"ES3\")) {\n-        options.setLanguageIn(CompilerOptions.LanguageMode.ECMASCRIPT3);\n+      CompilerOptions.LanguageMode languageMode =\n+          CompilerOptions.LanguageMode.fromString(config.languageIn);\n+      if (languageMode != null) {\n+        options.setLanguageIn(languageMode);\n       } else {\n         throw new FlagUsageException(\"Unknown language `\" + config.languageIn +\n                                      \"' specified.\");\n--- a/src/com/google/javascript/jscomp/CompilerOptions.java\n+++ b/src/com/google/javascript/jscomp/CompilerOptions.java\n     /**\n      * Nitpicky, shiny new JavaScript\n      */\n-    ECMASCRIPT5_STRICT,\n+    ECMASCRIPT5_STRICT;\n+\n+    public static LanguageMode fromString(String value) {\n+      if (value.equals(\"ECMASCRIPT5_STRICT\") ||\n+          value.equals(\"ES5_STRICT\")) {\n+        return CompilerOptions.LanguageMode.ECMASCRIPT5_STRICT;\n+      } else if (value.equals(\"ECMASCRIPT5\") ||\n+          value.equals(\"ES5\")) {\n+        return CompilerOptions.LanguageMode.ECMASCRIPT5;\n+      } else if (value.equals(\"ECMASCRIPT3\") ||\n+                 value.equals(\"ES3\")) {\n+        return CompilerOptions.LanguageMode.ECMASCRIPT3;\n+      }\n+      return null;\n+    }\n   }\n \n   /** When to do the extra sanity checks */", "timestamp": 1349309353, "metainfo": ""}