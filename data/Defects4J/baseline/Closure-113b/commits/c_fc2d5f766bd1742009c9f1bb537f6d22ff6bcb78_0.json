{"sha": "fc2d5f766bd1742009c9f1bb537f6d22ff6bcb78", "log": "ProxyObjectType should delegate subtype/supertype as they may have custom implementations different from JSType or ObjectType  R=nicksantos DELTA=15  (15 added, 0 deleted, 0 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=3360   ", "commit": "\n--- a/src/com/google/javascript/rhino/jstype/ProxyObjectType.java\n+++ b/src/com/google/javascript/rhino/jstype/ProxyObjectType.java\n   public String toDebugHashCodeString() {\n     return \"{proxy:\" + referencedType.toDebugHashCodeString() + \"}\";\n   }\n+\n+  @Override\n+  public ObjectType getTypeOfThis() {\n+    if (referencedObjType != null) {\n+      return referencedObjType.getTypeOfThis();\n+    }\n+    return super.getTypeOfThis();\n+  }\n }\n--- a/test/com/google/javascript/rhino/jstype/JSTypeTest.java\n+++ b/test/com/google/javascript/rhino/jstype/JSTypeTest.java\n     assertTypeEquals(supremum, p1.getLeastSupertype(p2));\n   }\n \n+  public void testTypeOfThisIsProxied() {\n+    ObjectType fnType = new FunctionBuilder(registry)\n+        .withReturnType(NUMBER_TYPE).withTypeOfThis(OBJECT_TYPE).build();\n+    ObjectType proxyType = new ProxyObjectType(registry, fnType);\n+    assertTypeEquals(fnType.getTypeOfThis(), proxyType.getTypeOfThis());\n+  }\n+\n   /**\n    * Tests the {@link NamedType#equals} function, which had a bug in it.\n    */", "timestamp": 1317219707, "metainfo": ""}