{"sha": "6f63fab43852f92226b462e737c7d580c28461c7", "log": "Add some tests for ARJ archives  ", "commit": "\n--- a/src/test/java/org/apache/commons/compress/DetectArchiverTestCase.java\n+++ b/src/test/java/org/apache/commons/compress/DetectArchiverTestCase.java\n import org.apache.commons.compress.archivers.ArchiveException;\n import org.apache.commons.compress.archivers.ArchiveInputStream;\n import org.apache.commons.compress.archivers.ar.ArArchiveInputStream;\n+import org.apache.commons.compress.archivers.arj.ArjArchiveInputStream;\n import org.apache.commons.compress.archivers.cpio.CpioArchiveInputStream;\n import org.apache.commons.compress.archivers.tar.TarArchiveInputStream;\n import org.apache.commons.compress.archivers.zip.ZipArchiveInputStream;\n         final ArchiveInputStream cpio = getStreamFor(\"bla.cpio\");\n         assertNotNull(cpio);\n         assertTrue(cpio instanceof CpioArchiveInputStream);\n+        \n+        final ArchiveInputStream arj = getStreamFor(\"bla.arj\");\n+        assertNotNull(arj);\n+        assertTrue(arj instanceof ArjArchiveInputStream);\n \n // Not yet implemented\n //        final ArchiveInputStream tgz = getStreamFor(\"bla.tgz\");\n--- /dev/null\n+++ b/src/test/java/org/apache/commons/compress/archivers/arj/ArjArchiveInputStreamTest.java\n+/*\n+ * Licensed to the Apache Software Foundation (ASF) under one\n+ * or more contributor license agreements.  See the NOTICE file\n+ * distributed with this work for additional information\n+ * regarding copyright ownership.  The ASF licenses this file\n+ * to you under the Apache License, Version 2.0 (the\n+ * \"License\"); you may not use this file except in compliance\n+ * with the License.  You may obtain a copy of the License at\n+ *\n+ * http://www.apache.org/licenses/LICENSE-2.0\n+ *\n+ * Unless required by applicable law or agreed to in writing,\n+ * software distributed under the License is distributed on an\n+ * \"AS IS\" BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\n+ * KIND, either express or implied.  See the License for the\n+ * specific language governing permissions and limitations\n+ * under the License.\n+ */\n+\n+package org.apache.commons.compress.archivers.arj;\n+\n+import java.io.FileInputStream;\n+\n+import org.apache.commons.compress.AbstractTestCase;\n+\n+public class ArjArchiveInputStreamTest extends AbstractTestCase {\n+\n+    public void testArjUnarchive() throws Exception {\n+        StringBuilder expected = new StringBuilder();\n+        expected.append(\"test1.xml<?xml version=\\\"1.0\\\"?>\\n\");\n+        expected.append(\"<empty/>test2.xml<?xml version=\\\"1.0\\\"?>\\n\");\n+        expected.append(\"<empty/>\\n\");\n+\n+\n+        ArjArchiveInputStream in = new ArjArchiveInputStream(new FileInputStream(getFile(\"bla.arj\")));\n+        ArjArchiveEntry entry;\n+\n+        StringBuilder result = new StringBuilder();\n+        while ((entry = in.getNextEntry()) != null) {\n+            result.append(entry.getName());\n+            int tmp;\n+            while ((tmp = in.read()) != -1) {\n+                result.append((char) tmp);\n+            }\n+        }\n+        in.close();\n+        assertEquals(result.toString(), expected.toString());\n+    }\n+}", "timestamp": 1375883406, "metainfo": ""}