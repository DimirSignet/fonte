{"sha": "19a620c904587dc0397b43bfe9071ff60033c097", "log": "COMPRESS-355 properly deal with blank PAX header lines  Patch-by: Jeremy Gustie", "commit": "\n--- a/src/main/java/org/apache/commons/compress/archivers/tar/TarArchiveInputStream.java\n+++ b/src/main/java/org/apache/commons/compress/archivers/tar/TarArchiveInputStream.java\n             int read = 0;\n             while((ch = i.read()) != -1) {\n                 read++;\n-                if (ch == ' '){ // End of length string\n+                if (ch == '\\n') { // blank line in header\n+                    break;\n+                } else if (ch == ' '){ // End of length string\n                     // Get keyword\n                     final ByteArrayOutputStream coll = new ByteArrayOutputStream();\n                     while((ch = i.read()) != -1) {\n--- a/src/test/java/org/apache/commons/compress/archivers/tar/TarArchiveInputStreamTest.java\n+++ b/src/test/java/org/apache/commons/compress/archivers/tar/TarArchiveInputStreamTest.java\n import static org.apache.commons.compress.AbstractTestCase.rmdir;\n import static org.junit.Assert.assertArrayEquals;\n import static org.junit.Assert.assertEquals;\n+import static org.junit.Assert.assertNull;\n import static org.junit.Assert.assertTrue;\n import static org.junit.Assert.fail;\n \n         }\n     }\n \n+    /**\n+     * @link \"https://issues.apache.org/jira/browse/COMPRESS-355\"\n+     */\n+    @Test\n+    public void survivesBlankLinesInPaxHeader() throws Exception {\n+        final TarArchiveInputStream is = getTestStream(\"/COMPRESS-355.tar\");\n+        try {\n+            final TarArchiveEntry entry = is.getNextTarEntry();\n+            assertEquals(\"package/package.json\", entry.getName());\n+            assertNull(is.getNextTarEntry());\n+        } finally {\n+            is.close();\n+        }\n+    }\n+\n     private TarArchiveInputStream getTestStream(final String name) {\n         return new TarArchiveInputStream(\n                 TarArchiveInputStreamTest.class.getResourceAsStream(name));", "timestamp": 1463761085, "metainfo": ""}