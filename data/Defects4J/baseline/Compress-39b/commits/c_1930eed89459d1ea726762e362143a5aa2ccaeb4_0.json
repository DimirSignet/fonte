{"sha": "1930eed89459d1ea726762e362143a5aa2ccaeb4", "log": "COMPRESS-324 be more lenient when detecting GNU tar extensions", "commit": "\n--- a/src/main/java/org/apache/commons/compress/archivers/tar/TarArchiveEntry.java\n+++ b/src/main/java/org/apache/commons/compress/archivers/tar/TarArchiveEntry.java\n      * @return true if this is a long name extension provided by GNU tar\n      */\n     public boolean isGNULongLinkEntry() {\n-        return linkFlag == LF_GNUTYPE_LONGLINK\n-            && name.equals(GNU_LONGLINK);\n+        return linkFlag == LF_GNUTYPE_LONGLINK;\n     }\n \n     /**\n      * @return true if this is a long name extension provided by GNU tar\n      */\n     public boolean isGNULongNameEntry() {\n-        return linkFlag == LF_GNUTYPE_LONGNAME\n-            && name.equals(GNU_LONGLINK);\n+        return linkFlag == LF_GNUTYPE_LONGNAME;\n     }\n \n     /**\n--- a/src/test/java/org/apache/commons/compress/archivers/tar/TarArchiveInputStreamTest.java\n+++ b/src/test/java/org/apache/commons/compress/archivers/tar/TarArchiveInputStreamTest.java\n         tis.close();\n     }\n \n+    /**\n+     * @link \"https://issues.apache.org/jira/browse/COMPRESS-324\"\n+     */\n+    @Test\n+    public void shouldReadGNULongNameEntryWithWrongName() throws Exception {\n+        TarArchiveInputStream is = getTestStream(\"/COMPRESS-324.tar\");\n+        try {\n+            TarArchiveEntry entry = is.getNextTarEntry();\n+            assertEquals(\"1234567890123456789012345678901234567890123456789012345678901234567890\"\n+                         + \"1234567890123456789012345678901234567890123456789012345678901234567890\"\n+                         + \"1234567890123456789012345678901234567890123456789012345678901234567890\"\n+                         + \"1234567890123456789012345678901234567890.txt\",\n+                         entry.getName());\n+        } finally {\n+            is.close();\n+        }\n+    }\n+\n     private TarArchiveInputStream getTestStream(String name) {\n         return new TarArchiveInputStream(\n                 TarArchiveInputStreamTest.class.getResourceAsStream(name));", "timestamp": 1444102648, "metainfo": ""}