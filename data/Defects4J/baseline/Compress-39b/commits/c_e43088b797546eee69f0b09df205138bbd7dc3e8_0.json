{"sha": "e43088b797546eee69f0b09df205138bbd7dc3e8", "log": "explicitly specify encoding for tar name roundtrip test  ", "commit": "\n--- a/src/test/java/org/apache/commons/compress/archivers/tar/TarUtilsTest.java\n+++ b/src/test/java/org/apache/commons/compress/archivers/tar/TarUtilsTest.java\n package org.apache.commons.compress.archivers.tar;\n \n import junit.framework.TestCase;\n+import org.apache.commons.compress.archivers.zip.ZipEncoding;\n+import org.apache.commons.compress.archivers.zip.ZipEncodingHelper;\n \n public class TarUtilsTest extends TestCase {\n \n         checkName(\"The quick brown fox\\n\");\n         checkName(\"\\177\");\n         // checkName(\"\\0\"); // does not work, because NUL is ignored\n+    }\n+\n+    public void testRoundEncoding() throws Exception {\n         // COMPRESS-114\n-        checkName(\"0302-0601-3\\u00b1\\u00b1\\u00b1F06\\u00b1W220\\u00b1ZB\\u00b1LALALA\\u00b1\\u00b1\\u00b1\\u00b1\\u00b1\\u00b1\\u00b1\\u00b1\\u00b1\\u00b1CAN\\u00b1\\u00b1DC\\u00b1\\u00b1\\u00b104\\u00b1060302\\u00b1MOE.model\");\n+        ZipEncoding enc = ZipEncodingHelper.getZipEncoding(\"iso-8859-1\");\n+        String s = \"0302-0601-3\\u00b1\\u00b1\\u00b1F06\\u00b1W220\\u00b1ZB\\u00b1LALALA\\u00b1\\u00b1\\u00b1\\u00b1\\u00b1\\u00b1\\u00b1\\u00b1\\u00b1\\u00b1CAN\\u00b1\\u00b1DC\\u00b1\\u00b1\\u00b104\\u00b1060302\\u00b1MOE.model\";\n+        byte buff[] = new byte[100];\n+        int len = TarUtils.formatNameBytes(s, buff, 0, buff.length, enc);\n+        assertEquals(s, TarUtils.parseName(buff, 0, len, enc));\n     }\n \n     private void checkName(String string) {", "timestamp": 1332098690, "metainfo": ""}