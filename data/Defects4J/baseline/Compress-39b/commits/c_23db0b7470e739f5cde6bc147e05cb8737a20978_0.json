{"sha": "23db0b7470e739f5cde6bc147e05cb8737a20978", "log": "simplify addition of PAX headers  ", "commit": "\n--- a/src/main/java/org/apache/commons/compress/archivers/tar/TarArchiveOutputStream.java\n+++ b/src/main/java/org/apache/commons/compress/archivers/tar/TarArchiveOutputStream.java\n \n     private void addPaxHeadersForBigNumbers(Map<String, String> paxHeaders,\n                                             TarArchiveEntry entry) {\n-        if (entry.getSize() > TarConstants.MAXSIZE) {\n-            paxHeaders.put(\"size\", String.valueOf(entry.getSize()));\n-        }\n-        if (entry.getGroupId() > TarConstants.MAXID) {\n-            paxHeaders.put(\"gid\", String.valueOf(entry.getGroupId()));\n-        }\n-        final long mtime =  entry.getModTime().getTime() / 1000;\n-        if (mtime < 0 || mtime > TarConstants.MAXSIZE) {\n-            paxHeaders.put(\"mtime\", String.valueOf(mtime));\n-        }\n-        if (entry.getUserId() > TarConstants.MAXID) {\n-            paxHeaders.put(\"uid\", String.valueOf(entry.getUserId()));\n-        }\n-        if (entry.getDevMajor() > TarConstants.MAXID) {\n-            paxHeaders.put(\"SCHILY.devmajor\",\n-                           String.valueOf(entry.getDevMajor()));\n-        }\n-        if (entry.getDevMinor() > TarConstants.MAXID) {\n-            paxHeaders.put(\"SCHILY.devminor\",\n-                           String.valueOf(entry.getDevMinor()));\n-        }\n+        addPaxHeaderForBigNumber(paxHeaders, \"size\", entry.getSize(),\n+                                 TarConstants.MAXSIZE);\n+        addPaxHeaderForBigNumber(paxHeaders, \"gid\", entry.getGroupId(),\n+                                 TarConstants.MAXID);\n+        addPaxHeaderForBigNumber(paxHeaders, \"mtime\",\n+                                 entry.getModTime().getTime() / 1000,\n+                                 TarConstants.MAXSIZE);\n+        addPaxHeaderForBigNumber(paxHeaders, \"uid\", entry.getUserId(),\n+                                 TarConstants.MAXID);\n+        // star extensions by J\\u00f6rg Schillig\n+        addPaxHeaderForBigNumber(paxHeaders, \"SCHILY.devmajor\",\n+                                 entry.getDevMajor(), TarConstants.MAXID);\n+        addPaxHeaderForBigNumber(paxHeaders, \"SCHILY.devminor\",\n+                                 entry.getDevMinor(), TarConstants.MAXID);\n+        // there is no PAX header for file mode\n         failForBigNumber(\"mode\", entry.getMode(), TarConstants.MAXID);\n+    }\n+\n+    private void addPaxHeaderForBigNumber(Map<String, String> paxHeaders,\n+                                          String header, long value,\n+                                          long maxValue) {\n+        if (value < 0 || value > maxValue) {\n+            paxHeaders.put(header, String.valueOf(value));\n+        }\n     }\n \n     private void failForBigNumbers(TarArchiveEntry entry) {", "timestamp": 1331316433, "metainfo": ""}