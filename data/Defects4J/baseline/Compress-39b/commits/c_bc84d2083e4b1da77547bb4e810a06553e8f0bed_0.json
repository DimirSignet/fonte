{"sha": "bc84d2083e4b1da77547bb4e810a06553e8f0bed", "log": "COMPRESS-178 TarArchiveInputStream throws IllegalArgumentException instead of IOException  ", "commit": "\n--- a/src/main/java/org/apache/commons/compress/archivers/tar/TarArchiveInputStream.java\n+++ b/src/main/java/org/apache/commons/compress/archivers/tar/TarArchiveInputStream.java\n             return null;\n         }\n \n-        currEntry = new TarArchiveEntry(headerBuf);\n+        try {\n+            currEntry = new TarArchiveEntry(headerBuf);\n+        } catch (IllegalArgumentException e) {\n+            IOException ioe = new IOException(\"Error detected parsing the header\");\n+            ioe.initCause(e);\n+            throw ioe;\n+        }\n         entryOffset = 0;\n         entrySize = currEntry.getSize();\n \n--- a/src/test/java/org/apache/commons/compress/archivers/TarTestCase.java\n+++ b/src/test/java/org/apache/commons/compress/archivers/TarTestCase.java\n             rmdir(tmp[0]);\n         }\n     }\n+\n+    public void testCOMPRESS178() throws Exception {\n+        final File input = getFile(\"COMPRESS-178.tar\");\n+        final InputStream is = new FileInputStream(input);\n+        final ArchiveInputStream in = new ArchiveStreamFactory().createArchiveInputStream(\"tar\", is);\n+        try {\n+            in.getNextEntry();\n+            fail(\"Expected IOException\");\n+        } catch (IOException e) {\n+            Throwable t = e.getCause();\n+            assertTrue(\"Expected cause = IllegalArgumentException\", t instanceof IllegalArgumentException);\n+        }\n+        in.close();\n+    }\n+\n }", "timestamp": 1329958981, "metainfo": ""}