{"sha": "e5210d1f9ef4f1d41ff0a8c4a2ab8e9192d5e087", "log": "Corrected fix for #998", "commit": "\n--- a/src/main/java/org/jsoup/parser/XmlTreeBuilder.java\n+++ b/src/main/java/org/jsoup/parser/XmlTreeBuilder.java\n      * @param endTag tag to close\n      */\n     private void popStackToClose(Token.EndTag endTag) {\n-        String elName = endTag.normalName();\n+        String elName = settings.normalizeTag(endTag.tagName);\n         Element firstFound = null;\n \n         for (int pos = stack.size() -1; pos >= 0; pos--) {\n--- a/src/test/java/org/jsoup/parser/XmlTreeBuilderTest.java\n+++ b/src/test/java/org/jsoup/parser/XmlTreeBuilderTest.java\n \n     @Test\n     public void preservesCaseByDefault() {\n-        String xml = \"<TEST ID=1>Check</TEST>\";\n-        Document doc = Jsoup.parse(xml, \"\", Parser.xmlParser());\n-        assertEquals(\"<TEST ID=\\\"1\\\">Check</TEST>\", TextUtil.stripNewlines(doc.html()));\n+        String xml = \"<CHECK>One</CHECK><TEST ID=1>Check</TEST>\";\n+        Document doc = Jsoup.parse(xml, \"\", Parser.xmlParser());\n+        assertEquals(\"<CHECK>One</CHECK><TEST ID=\\\"1\\\">Check</TEST>\", TextUtil.stripNewlines(doc.html()));\n     }\n \n     @Test", "timestamp": 1513979387, "metainfo": ""}