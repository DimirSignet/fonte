{"sha": "b8411990753314ed3b746d3402dec5a65ff6d603", "log": "Don't OBE at  EOF  Fixes #972", "commit": "\n--- a/src/main/java/org/jsoup/parser/CharacterReader.java\n+++ b/src/main/java/org/jsoup/parser/CharacterReader.java\n         // limit (no cache):\n         if (count > maxStringCacheLen)\n             return new String(charBuf, start, count);\n+        if (count < 1)\n+            return \"\";\n \n         // calculate hash:\n         int hash = 0;\n--- a/src/test/java/org/jsoup/parser/CharacterReaderTest.java\n+++ b/src/test/java/org/jsoup/parser/CharacterReaderTest.java\n         assertEquals(\"Two\", two);\n     }\n \n+    @Test\n+    public void consumeToNonexistentEndWhenAtAnd() {\n+        CharacterReader r = new CharacterReader(\"<!\");\n+        assertTrue(r.matchConsume(\"<!\"));\n+        assertTrue(r.isEmpty());\n+\n+        String after = r.consumeTo('>');\n+        assertEquals(\"\", after);\n+\n+        assertTrue(r.isEmpty());\n+    }\n+\n \n }\n--- a/src/test/java/org/jsoup/parser/HtmlParserTest.java\n+++ b/src/test/java/org/jsoup/parser/HtmlParserTest.java\n         assertEquals(200, doc.select(\"span\").size());\n         assertEquals(1, doc.select(\"p\").size());\n   }\n+\n+  @Test public void commentAtEnd() throws Exception {\n+      Document doc = Jsoup.parse(\"<!\");\n+      assertTrue(doc.childNode(0) instanceof Comment);\n+  }\n }", "timestamp": 1510688060, "metainfo": ""}