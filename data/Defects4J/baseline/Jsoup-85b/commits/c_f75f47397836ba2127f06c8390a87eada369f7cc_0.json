{"sha": "f75f47397836ba2127f06c8390a87eada369f7cc", "log": "Fix #429  Remove element from formData when element is removed", "commit": "\n--- a/src/main/java/org/jsoup/nodes/FormElement.java\n+++ b/src/main/java/org/jsoup/nodes/FormElement.java\n     public FormElement addElement(Element element) {\n         elements.add(element);\n         return this;\n+    }\n+\n+    @Override\n+    protected void removeChild(Node out) {\n+        super.removeChild(out);\n+        elements.remove(out);\n     }\n \n     /**\n--- a/src/test/java/org/jsoup/nodes/FormElementTest.java\n+++ b/src/test/java/org/jsoup/nodes/FormElementTest.java\n         assertEquals(\"pass\", data.get(1).key());\n         assertEquals(\"login\", data.get(2).key());\n     }\n+\n+    @Test public void removeFormElement() {\n+        String html = \"<html>\\n\" +\n+                \"  <body> \\n\" +\n+                \"      <form action=\\\"/hello.php\\\" method=\\\"post\\\">\\n\" +\n+                \"      User:<input type=\\\"text\\\" name=\\\"user\\\" />\\n\" +\n+                \"      Password:<input type=\\\"password\\\" name=\\\"pass\\\" />\\n\" +\n+                \"      <input type=\\\"submit\\\" name=\\\"login\\\" value=\\\"login\\\" />\\n\" +\n+                \"   </form>\\n\" +\n+                \"  </body>\\n\" +\n+                \"</html>  \";\n+        Document doc = Jsoup.parse(html);\n+        FormElement form = (FormElement) doc.selectFirst(\"form\");\n+        Element pass = form.selectFirst(\"input[name=pass]\");\n+        pass.remove();\n+\n+        List<Connection.KeyVal> data = form.formData();\n+        assertEquals(2, data.size());\n+        assertEquals(\"user\", data.get(0).key());\n+        assertEquals(\"login\", data.get(1).key());\n+        assertEquals(null, doc.selectFirst(\"input[name=pass]\"));\n+    }\n }", "timestamp": 1510531056, "metainfo": ""}