{"sha": "8808e3fbc5a8f25970c151d076636ad05798ff9d", "log": "NPE fix", "commit": "\n--- a/src/main/java/org/jsoup/internal/Normalizer.java\n+++ b/src/main/java/org/jsoup/internal/Normalizer.java\n public final class Normalizer {\n \n     public static String lowerCase(final String input) {\n-        return input.toLowerCase(Locale.ENGLISH);\n+        return input != null ? input.toLowerCase(Locale.ENGLISH) : \"\";\n     }\n \n     public static String normalize(final String input) {\n--- a/src/test/java/org/jsoup/safety/CleanerTest.java\n+++ b/src/test/java/org/jsoup/safety/CleanerTest.java\n         String clean = Jsoup.clean(html, Whitelist.basic());\n         assertEquals(\"<a rel=\\\"nofollow\\\"></a>\", clean);\n     }\n+\n+    @Test public void handlesAttributesWithNoValue() {\n+        // https://github.com/jhy/jsoup/issues/973\n+        String clean = Jsoup.clean(\"<a href>Clean</a>\", Whitelist.basic());\n+\n+        assertEquals(\"<a rel=\\\"nofollow\\\">Clean</a>\", clean);\n+    }\n }", "timestamp": 1510691960, "metainfo": ""}