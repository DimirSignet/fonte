{"sha": "1933e9727c694863d6b7a9bb98682b560510d212", "log": "Make HttpConnection constructor public  For DI tasks  Fixes #1052", "commit": "\n--- a/src/main/java/org/jsoup/helper/HttpConnection.java\n+++ b/src/main/java/org/jsoup/helper/HttpConnection.java\n         return con;\n     }\n \n+    public HttpConnection() {\n+        req = new Request();\n+        res = new Response();\n+    }\n+\n     /**\n      * Encodes the input URL into a safe ASCII URL string\n      * @param url unescaped URL\n \n     private Connection.Request req;\n     private Connection.Response res;\n-\n-\tprivate HttpConnection() {\n-        req = new Request();\n-        res = new Response();\n-    }\n \n     public Connection url(URL url) {\n         req.url(url);\n \n         static Response execute(Connection.Request req, Response previousResponse) throws IOException {\n             Validate.notNull(req, \"Request must not be null\");\n+            Validate.notNull(req.url(), \"URL must be specified to connect\");\n             String protocol = req.url().getProtocol();\n             if (!protocol.equals(\"http\") && !protocol.equals(\"https\"))\n                 throw new MalformedURLException(\"Only http & https protocols supported\");\n--- a/src/test/java/org/jsoup/helper/HttpConnectionTest.java\n+++ b/src/test/java/org/jsoup/helper/HttpConnectionTest.java\n         URL url2 = HttpConnection.encodeUrl(url1);\n         assertEquals(\"http://test.com/?q=white%20space\", url2.toExternalForm());\n     }\n+\n+    @Test public void noUrlThrowsValidationError() throws IOException {\n+        HttpConnection con = new HttpConnection();\n+        boolean threw = false;\n+        try {\n+            con.execute();\n+        } catch (IllegalArgumentException e) {\n+            threw = true;\n+            assertEquals(\"URL must be specified to connect\", e.getMessage());\n+        }\n+        assertTrue(threw);\n+    }\n }", "timestamp": 1526101328, "metainfo": ""}