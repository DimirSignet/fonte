{"sha": "a02241e5df48e44e23dc0e66dbef3fdc3c91eb3e", "log": "Correct output of -0.0. Fixes issue 582.  R=acleung DELTA=9  (8 added, 0 deleted, 1 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=3489   ", "commit": "\n--- a/src/com/google/javascript/jscomp/CodeConsumer.java\n+++ b/src/com/google/javascript/jscomp/CodeConsumer.java\n       add(\" \");\n     }\n \n-    if ((long) x == x) {\n+    if ((long) x == x && !isNegativeZero(x)) {\n       long value = (long) x;\n       long mantissa = value;\n       int exp = 0;\n     }\n   }\n \n+  static boolean isNegativeZero(double x) {\n+    return x == 0.0 && Math.copySign(1, x) == -1.0;\n+  }\n+\n   static boolean isWordChar(char ch) {\n     return (ch == '_' ||\n             ch == '$' ||\n--- a/test/com/google/javascript/jscomp/CodePrinterTest.java\n+++ b/test/com/google/javascript/jscomp/CodePrinterTest.java\n     assertPrint(\"var x = {0.2: 1};\", \"var x={\\\"0.2\\\":1}\");\n     assertPrint(\"var x = {'0.2': 1};\", \"var x={\\\"0.2\\\":1}\");\n   }\n+\n+  public void testIssue582() {\n+    assertPrint(\"var x = -0.0;\", \"var x=-0.0\");\n+  }\n }", "timestamp": 1318885659, "metainfo": ""}