{"sha": "18a6a1d05a697c6da9735aeb8950ef9269c47c12", "log": "Compiler Memory reference leak Fix in MemeoizedScopeCreator for incremental builds. the test also finds other reference leaks so can't be submitted yet.  R=nicksantos DELTA=53  (53 added, 0 deleted, 0 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=3210   ", "commit": "\n--- a/src/com/google/javascript/jscomp/MemoizedScopeCreator.java\n+++ b/src/com/google/javascript/jscomp/MemoizedScopeCreator.java\n \n import com.google.common.base.Preconditions;\n import com.google.common.collect.ImmutableList;\n+import com.google.common.collect.ImmutableSet;\n import com.google.common.collect.Iterables;\n import com.google.common.collect.Lists;\n import com.google.common.collect.Maps;\n   public Scope getScopeIfMemoized(Node n) {\n     return scopes.get(n);\n   }\n+\n+  /**\n+   * Removes all scopes with root nodes from a given script file.\n+   *\n+   * @param scriptName the name of the script file to remove nodes for.\n+   */\n+  void removeScopesForScript(String scriptName) {\n+    for (Node scopeRoot : ImmutableSet.copyOf(scopes.keySet())) {\n+      if (scriptName.equals(scopeRoot.getSourceFileName())) {\n+        scopes.remove(scopeRoot);\n+      }\n+    }\n+  }\n }", "timestamp": 1315419783, "metainfo": ""}