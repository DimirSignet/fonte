{"sha": "f4b9657b05cb32df729ea44f4b0be4665f49b88b", "log": "PR: http://issues.apache.org/bugzilla/show_bug.cgi?id=27876 [lang] ReflectionToStringBuilder.toString(null) throws exception by design new ToStringBuilder(null).toString() == the style's nullText.   ", "commit": "\n--- a/src/java/org/apache/commons/lang/builder/ToStringBuilder.java\n+++ b/src/java/org/apache/commons/lang/builder/ToStringBuilder.java\n  * @author Gary Gregory\n  * @author Pete Gieser\n  * @since 1.0\n- * @version $Id: ToStringBuilder.java,v 1.34 2004/07/01 17:10:47 ggregory Exp $\n+ * @version $Id: ToStringBuilder.java,v 1.35 2004/07/01 17:40:10 ggregory Exp $\n  */\n public class ToStringBuilder {\n \n      * <p>This method appends the end of data indicator, and can only be called once.\n      * Use {@link #getStringBuffer} to get the current string state.</p>\n      * \n+     * <p>If the object is <code>null</code>, return the style's <code>nullText</code></p>\n+     * \n      * @return the String <code>toString</code>\n      */\n     public String toString() {\n-        style.appendEnd(this.getStringBuffer(), this.getObject());\n+        if (this.getObject() == null) {\n+            this.getStringBuffer().append(this.getStyle().getNullText());\n+        } else {\n+            style.appendEnd(this.getStringBuffer(), this.getObject());\n+        }\n         return this.getStringBuffer().toString();\n     }\n \n--- a/src/java/org/apache/commons/lang/builder/ToStringStyle.java\n+++ b/src/java/org/apache/commons/lang/builder/ToStringStyle.java\n  * @author Gary Gregory\n  * @author Pete Gieser\n  * @since 1.0\n- * @version $Id: ToStringStyle.java,v 1.31 2004/07/01 17:10:47 ggregory Exp $\n+ * @version $Id: ToStringStyle.java,v 1.32 2004/07/01 17:40:10 ggregory Exp $\n  */\n public abstract class ToStringStyle implements Serializable {\n \n      *  <code>toString</code> for.\n      */\n     public void appendEnd(StringBuffer buffer, Object object) {\n-        if (object == null){\n-            return;\n-        }\n-        if (fieldSeparatorAtEnd == false) {\n+        if (this.fieldSeparatorAtEnd == false) {\n             removeLastFieldSeparator(buffer);\n         }\n         appendContentEnd(buffer);", "timestamp": 1088703610, "metainfo": ""}