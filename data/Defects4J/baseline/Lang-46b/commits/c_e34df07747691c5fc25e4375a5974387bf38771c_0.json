{"sha": "e34df07747691c5fc25e4375a5974387bf38771c", "log": "Fix setLength()  ", "commit": "\n--- a/src/java/org/apache/commons/lang/text/StrBuilder.java\n+++ b/src/java/org/apache/commons/lang/text/StrBuilder.java\n         }\n         if (length < size) {\n             size = length;\n-        } else {\n+        } else if (length > size) {\n             ensureCapacity(length);\n             int oldEnd = size;\n             int newEnd = length;\n--- a/src/test/org/apache/commons/lang/text/StrBuilderTest.java\n+++ b/src/test/org/apache/commons/lang/text/StrBuilderTest.java\n     public void testSetLength() {\n         StrBuilder sb = new StrBuilder();\n         sb.append(\"Hello\");\n-        sb.setLength(2);\n+        sb.setLength(2);  // shorten\n         assertEquals(\"He\", sb.toString());\n+        sb.setLength(2);  // no change\n+        assertEquals(\"He\", sb.toString());\n+        sb.setLength(3);  // lengthen\n+        assertEquals(\"He\\0\", sb.toString());\n \n         try {\n             sb.setLength(-1);", "timestamp": 1123537857, "metainfo": ""}