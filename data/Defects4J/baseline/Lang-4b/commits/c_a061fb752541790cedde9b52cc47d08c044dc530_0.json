{"sha": "a061fb752541790cedde9b52cc47d08c044dc530", "log": "Test for [LANG-720] StringEscapeUtils.escapeXml(input) outputs wrong results when an input contains characters in Supplementary Planes. [LANG-708] StringEscapeUtils.escapeEcmaScript from lang3 cuts off long unicode string.   ", "commit": "\n--- a/src/test/java/org/apache/commons/lang3/StringEscapeUtilsTest.java\n+++ b/src/test/java/org/apache/commons/lang3/StringEscapeUtilsTest.java\n  */\n package org.apache.commons.lang3;\n \n+import java.io.FileInputStream;\n import java.io.IOException;\n import java.io.StringWriter;\n import java.lang.reflect.Constructor;\n import java.lang.reflect.Modifier;\n \n import junit.framework.TestCase;\n+\n+import org.apache.commons.io.IOUtils;\n \n /**\n  * Unit tests for {@link StringEscapeUtils}.\n         }\n     }\n \n-    // https://issues.apache.org/jira/browse/LANG-480\n+    /**\n+     * Tests // https://issues.apache.org/jira/browse/LANG-480\n+     * \n+     * @throws java.io.UnsupportedEncodingException\n+     */\n     public void testEscapeHtmlHighUnicode() throws java.io.UnsupportedEncodingException {\n         // this is the utf8 representation of the character:\n         // COUNTING ROD UNIT DIGIT THREE\n //        assertEquals( \"High unicode should have been unescaped\", original, unescapedFromEntity);\n     }\n \n-    // https://issues.apache.org/jira/browse/LANG-339\n+    /**\n+     * Tests https://issues.apache.org/jira/browse/LANG-339\n+     */\n     public void testEscapeHiragana() {\n         // Some random Japanese unicode characters\n         String original = \"\\u304B\\u304C\\u3068\";\n         assertEquals( \"Hiragana character unicode behaviour has changed - expected no unescaping\", escaped, unescaped);\n     }\n \n-    // https://issues.apache.org/jira/browse/LANG-720\n+    /**\n+     * Tests https://issues.apache.org/jira/browse/LANG-708\n+     * \n+     * @throws IOException\n+     *             if an I/O error occurs\n+     */\n+    public void testLang708() throws IOException {\n+        String input = IOUtils.toString(new FileInputStream(\"src/test/resources/lang-708-input.txt\"), \"UTF-8\");\n+        String escaped = StringEscapeUtils.escapeEcmaScript(input);\n+        // just the end:\n+        assertTrue(escaped, escaped.endsWith(\"}]\"));\n+        // a little more:\n+        assertTrue(escaped, escaped.endsWith(\"\\\"valueCode\\\\\\\":\\\\\\\"\\\\\\\"}]\"));\n+    }\n+\n+    /**\n+     * Tests https://issues.apache.org/jira/browse/LANG-720\n+     */\n     public void testLang720() {\n         String input = new StringBuilder(\"\\ud842\\udfb7\").append(\"A\").toString();\n         String escaped = StringEscapeUtils.escapeXml(input);", "timestamp": 1310746370, "metainfo": ""}