{"sha": "0fbbbce8f8320917ea6115f23e30ea9b072a91ce", "log": "Ignore assertions for IBM JDK 1.6.0 in ToStringBuilderTest.testReflectionHierarchyArrayList because the test makes assumptions on the internal representation of an ArrayList (LANG-727).  ", "commit": "\n--- a/src/test/java/org/apache/commons/lang3/builder/ToStringBuilderTest.java\n+++ b/src/test/java/org/apache/commons/lang3/builder/ToStringBuilderTest.java\n \n import org.junit.Test;\n \n+import org.apache.commons.lang3.SystemUtils;\n+\n /**\n  * Unit tests for {@link org.apache.commons.lang3.builder.ToStringBuilder}.\n  *\n     }\n \n     // Reflection hierarchy tests\n-\n     @Test\n     public void testReflectionHierarchyArrayList() {\n         List<Object> base = new ArrayList<Object>();\n         String baseStr = this.toBaseString(base);\n-        assertEquals(baseStr + \"[elementData={<null>,<null>,<null>,<null>,<null>,<null>,<null>,<null>,<null>,<null>},size=0,modCount=0]\", ToStringBuilder.reflectionToString(base, null, true));\n-        assertEquals(baseStr + \"[size=0]\", ToStringBuilder.reflectionToString(base, null, false));\n+        // note, the test data depends on the internal representation of the ArrayList, which may differ between JDK versions and vendors\n+        String expectedWithTransients = baseStr + \"[elementData={<null>,<null>,<null>,<null>,<null>,<null>,<null>,<null>,<null>,<null>},size=0,modCount=0]\";\n+        String toStringWithTransients = ToStringBuilder.reflectionToString(base, null, true);\n+        if (!expectedWithTransients.equals(toStringWithTransients)) {\n+            // representation different for IBM JDK 1.6.0, LANG-727\n+            if (!(\"IBM Corporation\".equals(SystemUtils.JAVA_VENDOR) && \"1.6\".equals(SystemUtils.JAVA_SPECIFICATION_VERSION))) {\n+                assertEquals(expectedWithTransients, toStringWithTransients);\n+            }\n+        }\n+        String expectedWithoutTransients = baseStr + \"[size=0]\";\n+        String toStringWithoutTransients = ToStringBuilder.reflectionToString(base, null, false);\n+        if (!expectedWithoutTransients.equals(toStringWithoutTransients)) {\n+            // representation different for IBM JDK 1.6.0, LANG-727\n+            if (!(\"IBM Corporation\".equals(SystemUtils.JAVA_VENDOR) && \"1.6\".equals(SystemUtils.JAVA_SPECIFICATION_VERSION))) {\n+                assertEquals(expectedWithoutTransients, toStringWithoutTransients);\n+            }\n+        }\n         this.validateNullToStringStyleRegistry();\n     }\n ", "timestamp": 1312645387, "metainfo": ""}