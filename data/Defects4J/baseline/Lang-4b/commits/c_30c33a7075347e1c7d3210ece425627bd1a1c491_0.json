{"sha": "30c33a7075347e1c7d3210ece425627bd1a1c491", "log": "LANG-830 FastDateParser could use \\Q \\E to quote regexes  ", "commit": "\n--- a/src/main/java/org/apache/commons/lang3/time/FastDateParser.java\n+++ b/src/main/java/org/apache/commons/lang3/time/FastDateParser.java\n      * @return The <code>StringBuilder</code>\n      */\n     private static StringBuilder escapeRegex(StringBuilder regex, String value, boolean unquote) {\n+        regex.append(\"\\\\Q\");\n         for(int i= 0; i<value.length(); ++i) {\n             char c= value.charAt(i);\n             switch(c) {\n                     c= value.charAt(i);\n                 }\n                 break;\n-            case '?':\n-            case '[':\n-            case ']':\n-            case '(':\n-            case ')':\n-            case '{':\n-            case '}':\n             case '\\\\':\n-            case '|':\n-            case '*':\n-            case '+':\n-            case '^':\n-            case '$':\n-            case '.':\n-                regex.append('\\\\');\n+                if(++i==value.length()) {\n+                    break;\n+                }                \n+                /*\n+                 * If we have found \\E, we replace it with \\E\\\\E\\Q, i.e. we stop the quoting,\n+                 * quote the \\ in \\E, then restart the quoting.\n+                 * \n+                 * Otherwise we just output the two characters.\n+                 * In each case the initial \\ needs to be output and the final char is done at the end\n+                 */\n+                regex.append(c); // we always want the original \\\n+                c = value.charAt(i); // Is it followed by E ?\n+                if (c == 'E') { // \\E detected\n+                  regex.append(\"E\\\\\\\\E\\\\\"); // see comment above\n+                  c = 'Q'; // appended below\n+                }\n+                break;\n             }\n             regex.append(c);\n         }\n+        regex.append(\"\\\\E\");\n         return regex;\n     }\n ", "timestamp": 1348746652, "metainfo": ""}