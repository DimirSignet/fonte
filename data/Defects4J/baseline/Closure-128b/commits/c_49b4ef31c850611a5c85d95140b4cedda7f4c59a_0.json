{"sha": "49b4ef31c850611a5c85d95140b4cedda7f4c59a", "log": "Fix order of operations of GLOBAL_THIS options. Fixes issue 521  R=acleung DELTA=8  (7 added, 0 deleted, 1 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=2758   ", "commit": "\n--- a/src/com/google/javascript/jscomp/Compiler.java\n+++ b/src/com/google/javascript/jscomp/Compiler.java\n           CheckLevel.OFF);\n     }\n \n-    if (options.checkGlobalThisLevel.isOn()) {\n+    if (options.checkGlobalThisLevel.isOn() &&\n+        !options.disables(DiagnosticGroups.GLOBAL_THIS)) {\n       options.setWarningLevel(\n           DiagnosticGroups.GLOBAL_THIS,\n           options.checkGlobalThisLevel);\n--- a/test/com/google/javascript/jscomp/CommandLineRunnerTest.java\n+++ b/test/com/google/javascript/jscomp/CommandLineRunnerTest.java\n     test(\"function f() { this.a = 3; }\", CheckGlobalThis.GLOBAL_THIS);\n   }\n \n+  public void testCheckGlobalThisOff() {\n+    args.add(\"--warning_level=VERBOSE\");\n+    args.add(\"--jscomp_off=globalThis\");\n+    testSame(\"function f() { this.a = 3; }\");\n+  }\n+\n   public void testTypeCheckingOffByDefault() {\n     test(\"function f(x) { return x; } f();\",\n          \"function f(a) { return a; } f();\");", "timestamp": 1311633162, "metainfo": ""}