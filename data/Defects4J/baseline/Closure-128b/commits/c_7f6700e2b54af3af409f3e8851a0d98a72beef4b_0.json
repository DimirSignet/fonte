{"sha": "7f6700e2b54af3af409f3e8851a0d98a72beef4b", "log": "Add patch from issue 921 as well as accompanying unit test.  Fixes issue 921. ------------- Created by MOE: http://code.google.com/p/moe-java MOE_MIGRATED_REVID=43087590", "commit": "\n--- a/src/com/google/javascript/rhino/TokenStream.java\n+++ b/src/com/google/javascript/rhino/TokenStream.java\n     public static boolean isJSIdentifier(String s) {\n       int length = s.length();\n \n-      if (length == 0 || !Character.isJavaIdentifierStart(s.charAt(0)))\n+      if (length == 0 ||\n+          Character.isIdentifierIgnorable(s.charAt(0)) ||\n+          !Character.isJavaIdentifierStart(s.charAt(0))) {\n         return false;\n+      }\n \n       for (int i = 1; i < length; i++) {\n-        if (!Character.isJavaIdentifierPart(s.charAt(i))) {\n+        if (Character.isIdentifierIgnorable(s.charAt(i)) ||\n+            !Character.isJavaIdentifierPart(s.charAt(i))) {\n           return false;\n         }\n       }\n--- a/test/com/google/javascript/jscomp/ConvertToDottedPropertiesTest.java\n+++ b/test/com/google/javascript/jscomp/ConvertToDottedPropertiesTest.java\n     testSame(\"a[$]\");\n     testSame(\"a[p()]\");\n     testSame(\"a['default']\");\n+    // Ignorable control characters are ok in Java identifiers, but not in JS.\n+    testSame(\"a['A\\u0004']\");\n     // upper case lower half of o from phonetic extensions set.\n     // valid in Safari, not in Firefox, IE.\n     test(\"a['\\u1d17A']\", \"a['\\u1d17A']\");\n     testSame(\"({'':0})\");\n     testSame(\"({'1.0':0})\");\n     testSame(\"({'\\u1d17A':0})\");\n+    testSame(\"({'a\\u0004b':0})\");\n   }\n \n   public void test5746867() {", "timestamp": 1361927905, "metainfo": ""}