{"sha": "2449a5c225b5b14cc12c4a767c724bcb3870138d", "log": "properly regexp escape file separators fixes issue 714 contributed by neaket  R=malteubl DELTA=5  (3 added, 0 deleted, 2 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=4623   ", "commit": "\n--- a/src/com/google/javascript/jscomp/ProcessCommonJSModules.java\n+++ b/src/com/google/javascript/jscomp/ProcessCommonJSModules.java\n import java.io.File;\n import java.net.URI;\n import java.net.URISyntaxException;\n+import java.util.regex.Pattern;\n \n /**\n  * Rewrites a Common JS module http://wiki.commonjs.org/wiki/Modules/1.1.1\n \n   public static final String DEFAULT_FILENAME_PREFIX = \".\" + File.separator;\n \n+  private static final String MODULE_NAME_SEPARATOR = \"\\\\$\";\n   private static final String MODULE_NAME_PREFIX = \"module$\";\n \n   private final AbstractCompiler compiler;\n    */\n   public static String toModuleName(String filename) {\n     return MODULE_NAME_PREFIX +\n-        filename.replaceAll(\"^\\\\.\" + File.separator, \"\")\n-            .replaceAll(File.separator, \"\\\\$\")\n+        filename.replaceAll(\"^\\\\.\" + Pattern.quote(File.separator), \"\")\n+            .replaceAll(Pattern.quote(File.separator), MODULE_NAME_SEPARATOR)\n             .replaceAll(\"\\\\.js$\", \"\").replaceAll(\"-\", \"_\");\n   }\n ", "timestamp": 1335483600, "metainfo": ""}