{"sha": "e963fa841eb14be4e5b557347974493d3bb7f1c3", "log": "get and set support for SuspiciousPropertyCheck  R=nicksantos DELTA=17  (10 added, 3 deleted, 4 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=136   ", "commit": "\n--- a/src/com/google/javascript/jscomp/SuspiciousPropertiesCheck.java\n+++ b/src/com/google/javascript/jscomp/SuspiciousPropertiesCheck.java\n   private Property getProperty(String name) {\n     Property prop = properties.get(name);\n     if (prop == null) {\n-      prop = new Property(name);\n+      prop = new Property();\n       properties.put(name, prop);\n     }\n     return prop;\n           for (Node child = n.getFirstChild();\n                child != null;\n                child = child.getNext()) {\n-            if (child.getType() == Token.STRING) {\n+            if (child.getType() != Token.NUMBER) {\n               externPropertyNames.add(child.getString());\n             }\n           }\n           for (Node child = n.getFirstChild();\n                child != null;\n                child = child.getNext()) {\n-            if (child.getType() == Token.STRING) {\n+            if (child.getType() != Token.NUMBER) {\n               addWrite(child, t, true);\n             }\n           }\n    * Tracks reads and writes for a property.\n    */\n   private static class Property {\n-    final String name;\n-\n     int readCount = 0;\n     int writeCount = 0;\n \n      */\n     List<Node> writes = null;\n \n-    Property(String name) {\n-      this.name = name;\n+    Property() {\n     }\n   }\n }\n--- a/test/com/google/javascript/jscomp/SuspiciousPropertiesCheckTest.java\n+++ b/test/com/google/javascript/jscomp/SuspiciousPropertiesCheckTest.java\n     noProb(\"\");\n   }\n \n+  public void testGet() {\n+    badRead(\"var p = {x:1}; alert(p.y);\");\n+    noProb(\"var p = {x:1, get y(){}}; alert(p.y);\");\n+  }\n+\n+  public void testSet() {\n+    badRead(\"var p = {x:1}; alert(p.y);\");\n+    noProb(\"var p = {x:1, set y(a){}}; alert(p.y);\");\n+  }\n+\n   public void testNoWarningForDuckProperty() {\n     noProb(\"var x = {}; x.prop; if (x.prop) {}\");\n   }", "timestamp": 1292371195, "metainfo": ""}