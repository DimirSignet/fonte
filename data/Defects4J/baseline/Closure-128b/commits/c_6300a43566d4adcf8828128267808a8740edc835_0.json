{"sha": "6300a43566d4adcf8828128267808a8740edc835", "log": "Don't collapse assignments into var declarations if it would cause a redeclarion of a named parameter.  Fixes issue 820.  R=nicksantos DELTA=15  (12 added, 0 deleted, 3 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=5570   ", "commit": "\n--- a/src/com/google/javascript/jscomp/CollapseVariableDeclarations.java\n+++ b/src/com/google/javascript/jscomp/CollapseVariableDeclarations.java\n       }\n \n       Var var = s.getVar(lhs.getString());\n-      return var != null &&\n-          var.getScope() == s && !blacklistedVars.contains(var);\n-    }\n+      return var != null\n+          && var.getScope() == s\n+          && !isNamedParameter(var)\n+          && !blacklistedVars.contains(var);\n+    }\n+  }\n+\n+  private boolean isNamedParameter(Var v) {\n+    return v.getParentNode().isParamList();\n   }\n \n   private void applyCollapses() {\n--- a/test/com/google/javascript/jscomp/CollapseVariableDeclarationsTest.java\n+++ b/test/com/google/javascript/jscomp/CollapseVariableDeclarationsTest.java\n          \"var a=1,b=2,c=3,d=4;\");\n   }\n \n+  public void testIssue820() throws Exception {\n+    // Don't redeclare function parameters, this is incompatible with\n+    // strict mode.\n+    testSame(\"function f(a){ var b=1; a=2; var c; }\");\n+  }\n+\n   public void testIfElseVarDeclarations() throws Exception {\n     testSame(\"if (x) var a = 1; else var b = 2;\");\n   }", "timestamp": 1348854732, "metainfo": ""}