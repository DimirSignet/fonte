{"sha": "953e4eba38b2d67b5af7d2a37c122081a20b5256", "log": "fixed error in dropping prototypeSlot  R=nicksantos,tylerg DELTA=13  (8 added, 2 deleted, 3 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=3287   ", "commit": "\n--- a/src/com/google/javascript/rhino/jstype/FunctionType.java\n+++ b/src/com/google/javascript/rhino/jstype/FunctionType.java\n    * Sets the source node.\n    */\n   public void setSource(Node source) {\n-    if (null == source) {\n-      prototypeSlot = null;\n+    if (prototypeSlot != null) {\n+      // NOTE(bashir): On one hand when source is null we want to drop any\n+      // references to old nodes retained in prototypeSlot. On the other hand\n+      // we cannot simply drop prototypeSlot, so we retain all information\n+      // except the propertyNode for which we use an approximation! These\n+      // details mostly matter in hot-swap passes.\n+      if (source == null || prototypeSlot.getNode() == null) {\n+        prototypeSlot = new Property(prototypeSlot.getName(),\n+            prototypeSlot.getType(), prototypeSlot.isTypeInferred(), source);\n+      }\n     }\n     this.source = source;\n   }", "timestamp": 1316449213, "metainfo": ""}