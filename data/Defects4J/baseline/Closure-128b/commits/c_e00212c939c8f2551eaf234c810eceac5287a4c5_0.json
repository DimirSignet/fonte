{"sha": "e00212c939c8f2551eaf234c810eceac5287a4c5", "log": "Add getReleasedVersion/getReleasedDate api to the compiler class  R=acleung DELTA=23  (16 added, 5 deleted, 2 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=4837   ", "commit": "\n--- a/src/com/google/javascript/jscomp/CommandLineRunner.java\n+++ b/src/com/google/javascript/jscomp/CommandLineRunner.java\n import java.nio.charset.Charset;\n import java.util.List;\n import java.util.Map;\n-import java.util.ResourceBundle;\n import java.util.Set;\n import java.util.logging.Level;\n import java.util.regex.Matcher;\n \n   private final Flags flags = new Flags();\n \n-  private static final String configResource =\n-      \"com.google.javascript.jscomp.parsing.ParserConfig\";\n-\n   private boolean isConfigValid = false;\n \n   /**\n     }\n \n     if (flags.version) {\n-      ResourceBundle config = ResourceBundle.getBundle(configResource);\n       err.println(\n           \"Closure Compiler (http://code.google.com/closure/compiler)\\n\" +\n-          \"Version: \" + config.getString(\"compiler.version\") + \"\\n\" +\n-          \"Built on: \" + config.getString(\"compiler.date\"));\n+          \"Version: \" + Compiler.getReleaseVersion() + \"\\n\" +\n+          \"Built on: \" + Compiler.getReleaseDate());\n       err.flush();\n     }\n \n--- a/src/com/google/javascript/jscomp/Compiler.java\n+++ b/src/com/google/javascript/jscomp/Compiler.java\n import java.util.HashMap;\n import java.util.List;\n import java.util.Map;\n+import java.util.ResourceBundle;\n import java.util.Set;\n import java.util.concurrent.Callable;\n import java.util.logging.Level;\n   static final DiagnosticType MISSING_ENTRY_ERROR = DiagnosticType.error(\n       \"JSC_MISSING_ENTRY_ERROR\",\n       \"required entry point \\\"{0}\\\" never provided\");\n+\n+  private static final String CONFIG_RESOURCE =\n+      \"com.google.javascript.jscomp.parsing.ParserConfig\";\n \n   CompilerOptions options = null;\n \n         this, originalCode,\n         String.format(\"jscomp_%s_\", resourceName));\n   }\n+\n+  /** Returns the compiler version baked into the jar. */\n+  public static String getReleaseVersion() {\n+    ResourceBundle config = ResourceBundle.getBundle(CONFIG_RESOURCE);\n+    return config.getString(\"compiler.version\");\n+  }\n+\n+  /** Returns the compiler date baked into the jar. */\n+  public static String getReleaseDate() {\n+    ResourceBundle config = ResourceBundle.getBundle(CONFIG_RESOURCE);\n+    return config.getString(\"compiler.date\");\n+  }\n }", "timestamp": 1337638421, "metainfo": ""}