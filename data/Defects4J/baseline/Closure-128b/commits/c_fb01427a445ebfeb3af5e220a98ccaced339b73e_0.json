{"sha": "fb01427a445ebfeb3af5e220a98ccaced339b73e", "log": "Don't silently ignore transform \"for each\" into \"for\" loops, report an error instead. Fixes issue 644  R=nicksantos DELTA=23  (22 added, 1 deleted, 0 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=4114   ", "commit": "\n--- a/src/com/google/javascript/jscomp/parsing/IRFactory.java\n+++ b/src/com/google/javascript/jscomp/parsing/IRFactory.java\n \n     @Override\n     Node processForInLoop(ForInLoop loopNode) {\n+      if (loopNode.isForEach()) {\n+        errorReporter.error(\n+            \"unsupported language extension: for each\",\n+            sourceName,\n+            loopNode.getLineno(), \"\", 0);\n+\n+        // Return the bare minimum to put the AST in a valid state.\n+        return newNode(Token.EXPR_RESULT, Node.newNumber(0));\n+      }\n       return newNode(\n           Token.FOR,\n           transform(loopNode.getIterator()),\n--- a/test/com/google/javascript/jscomp/parsing/ParserTest.java\n+++ b/test/com/google/javascript/jscomp/parsing/ParserTest.java\n     assertNotNull(partialTree);\n   }\n \n+  public void testForEach() {\n+    parseError(\n+        \"function f(stamp, status) {\\n\" +\n+        \"  for each ( var curTiming in this.timeLog.timings ) {\\n\" +\n+        \"    if ( curTiming.callId == stamp ) {\\n\" +\n+        \"      curTiming.flag = status;\\n\" +\n+        \"      break;\\n\" +\n+        \"    }\\n\" +\n+        \"  }\\n\" +\n+        \"};\",\n+        \"unsupported language extension: for each\");\n+  }\n+\n   /**\n    * Verify that the given code has the given parse errors.\n    * @return If in IDE mode, returns a partial tree.\n     TestErrorReporter testErrorReporter = new TestErrorReporter(errors, null);\n     Node script = null;\n     try {\n-\n       StaticSourceFile file = new SimpleSourceFile(\"input\", false);\n       script = ParserRunner.parse(\n           file, string, ParserRunner.createConfig(isIdeMode, mode, false),", "timestamp": 1327110622, "metainfo": ""}