{"sha": "968b3f467f51c6bfec18af1fbcf980a0f19a1fb3", "log": "Don't inline values over a \"delete\". Fixes issue 773  R=nicksantos DELTA=13  (13 added, 0 deleted, 0 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=5133   ", "commit": "\n--- a/src/com/google/javascript/jscomp/FlowSensitiveInlineVariables.java\n+++ b/src/com/google/javascript/jscomp/FlowSensitiveInlineVariables.java\n         }\n \n         if (n.isNew() && NodeUtil.constructorCallHasSideEffects(n)) {\n+          return true;\n+        }\n+\n+        if (n.isDelProp()) {\n           return true;\n         }\n \n--- a/test/com/google/javascript/jscomp/FlowSensitiveInlineVariablesTest.java\n+++ b/test/com/google/javascript/jscomp/FlowSensitiveInlineVariablesTest.java\n     inline(\"var x = 1; x\", \"var x; 1\");\n     inline(\"var x = 1; var a = x\", \"var x; var a = 1\");\n     inline(\"var x = 1; x = x + 1\", \"var x; x = 1 + 1\");\n+  }\n+\n+  public void testSimpleForIn() {\n+    inline(\"var a,b,x = a in b; x\",\n+           \"var a,b,x; a in b\");\n+    noInline(\"var a, b; var x = a in b; print(1); x\");\n+    noInline(\"var a,b,x = a in b; delete a[b]; x\");\n   }\n \n   public void testExported() {\n--- a/test/com/google/javascript/jscomp/NodeUtilTest.java\n+++ b/test/com/google/javascript/jscomp/NodeUtilTest.java\n     assertSideEffect(false, \"({}||[]).foo = 2;\");\n     assertSideEffect(false, \"(true ? {} : []).foo = 2;\");\n     assertSideEffect(false, \"({},[]).foo = 2;\");\n+\n+    assertSideEffect(true, \"delete a.b\");\n   }\n \n   public void testObjectMethodSideEffects() {", "timestamp": 1341869635, "metainfo": ""}