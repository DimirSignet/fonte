{"sha": "1c184cce9eed73bf9ebed9ed4671197ebcc7bedc", "log": "Handle differences between JDK1.3 and JDK1.4  ", "commit": "\n--- a/src/test/org/apache/commons/lang/NotImplementedExceptionTest.java\n+++ b/src/test/org/apache/commons/lang/NotImplementedExceptionTest.java\n package org.apache.commons.lang;\n \n import java.io.ByteArrayOutputStream;\n-import java.io.OutputStreamWriter;\n import java.io.PrintStream;\n import java.io.PrintWriter;\n import java.io.StringWriter;\n-\n-import org.apache.commons.lang.exception.NestableException;\n+import java.lang.reflect.Constructor;\n \n import junit.framework.Test;\n import junit.framework.TestCase;\n import junit.framework.TestSuite;\n import junit.textui.TestRunner;\n+\n+import org.apache.commons.lang.exception.NestableException;\n \n /**\n  * JUnit tests.\n         assertEquals(\"Code is not implemented in class java.lang.String\", ex.getMessage());\n     }\n \n-// Does not compile on Java 1.3.1:    \n-//    public void testGetMessage_Indexed() {\n-//        NotImplementedException ex = new NotImplementedException(new Exception(\"nested 1\", new Exception(\"nested 2\")));\n-//        assertEquals(\"Code is not implemented\", ex.getMessage());\n-//        assertEquals(\"Code is not implemented\", ex.getMessage(0));\n-//        assertEquals(\"nested 1\", ex.getMessage(1));\n-//        assertEquals(\"nested 2\", ex.getMessage(2));\n-//        \n-//        String[] messages = ex.getMessages();\n-//        assertEquals(3, messages.length);\n-//        assertEquals(\"Code is not implemented\", messages[0]);\n-//        assertEquals(\"nested 1\", messages[1]);\n-//        assertEquals(\"nested 2\", messages[2]);\n-//    }\n+    public void testGetMessage_Indexed() throws Exception {\n+        if (SystemUtils.isJavaVersionAtLeast(1.4f)) {\n+            Exception ex1 = new Exception(\"nested 2\");\n+            Constructor con = Exception.class.getConstructor(new Class[] {String.class, Throwable.class});\n+            Exception ex2 = (Exception) con.newInstance(new Object[] {\"nested 1\", ex1});\n+            NotImplementedException ex = new NotImplementedException(ex2);\n+            assertEquals(\"Code is not implemented\", ex.getMessage());\n+            assertEquals(\"Code is not implemented\", ex.getMessage(0));\n+            assertEquals(\"nested 1\", ex.getMessage(1));\n+            assertEquals(\"nested 2\", ex.getMessage(2));\n+            \n+            String[] messages = ex.getMessages();\n+            assertEquals(3, messages.length);\n+            assertEquals(\"Code is not implemented\", messages[0]);\n+            assertEquals(\"nested 1\", messages[1]);\n+            assertEquals(\"nested 2\", messages[2]);\n+        }\n+    }\n     \n     public void testGetThrowable() {\n         NotImplementedException ex = new NotImplementedException(new NestableException(\"nested 1\", new NestableException(\"nested 2\")));", "timestamp": 1128765360, "metainfo": ""}