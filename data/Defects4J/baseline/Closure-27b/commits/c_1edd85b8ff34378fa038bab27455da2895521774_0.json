{"sha": "1edd85b8ff34378fa038bab27455da2895521774", "log": "don't recursively pretty-print anonymous objects  R=tylerg DELTA=60  (60 added, 0 deleted, 0 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=3131   ", "commit": "\n--- a/src/com/google/javascript/rhino/jstype/PrototypeObjectType.java\n+++ b/src/com/google/javascript/rhino/jstype/PrototypeObjectType.java\n     if (hasReferenceName()) {\n       return getReferenceName();\n     } else if (prettyPrint) {\n+      // Don't pretty print recursively.\n+      prettyPrint = false;\n+\n       // Use a tree set so that the properties are sorted.\n       Set<String> propertyNames = Sets.newTreeSet();\n       for (ObjectType current = this;\n       }\n \n       sb.append(\"}\");\n+\n+      prettyPrint = true;\n       return sb.toString();\n     } else {\n       return \"{...}\";\n--- /dev/null\n+++ b/test/com/google/javascript/rhino/jstype/PrototypeObjectTypeTest.java\n+/*\n+ *\n+ * ***** BEGIN LICENSE BLOCK *****\n+ * Version: MPL 1.1/GPL 2.0\n+ *\n+ * The contents of this file are subject to the Mozilla Public License Version\n+ * 1.1 (the \"License\"); you may not use this file except in compliance with\n+ * the License. You may obtain a copy of the License at\n+ * http://www.mozilla.org/MPL/\n+ *\n+ * Software distributed under the License is distributed on an \"AS IS\" basis,\n+ * WITHOUT WARRANTY OF ANY KIND, either express or implied. See the License\n+ * for the specific language governing rights and limitations under the\n+ * License.\n+ *\n+ * The Original Code is Rhino code, released\n+ * May 6, 1999.\n+ *\n+ * The Initial Developer of the Original Code is\n+ * Netscape Communications Corporation.\n+ * Portions created by the Initial Developer are Copyright (C) 1997-1999\n+ * the Initial Developer. All Rights Reserved.\n+ *\n+ * Contributor(s):\n+ *   Nick Santos\n+ *\n+ * Alternatively, the contents of this file may be used under the terms of\n+ * the GNU General Public License Version 2 or later (the \"GPL\"), in which\n+ * case the provisions of the GPL are applicable instead of those above. If\n+ * you wish to allow use of your version of this file only under the terms of\n+ * the GPL and not to allow others to use your version of this file under the\n+ * MPL, indicate your decision by deleting the provisions above and replacing\n+ * them with the notice and other provisions required by the GPL. If you do\n+ * not delete the provisions above, a recipient may use your version of this\n+ * file under either the MPL or the GPL.\n+ *\n+ * ***** END LICENSE BLOCK ***** */\n+\n+package com.google.javascript.rhino.jstype;\n+\n+import com.google.javascript.rhino.testing.BaseJSTypeTestCase;\n+\n+public class PrototypeObjectTypeTest extends BaseJSTypeTestCase {\n+\n+  public void testToString() {\n+    ObjectType type = registry.createAnonymousObjectType();\n+    assertEquals(\"{}\", type.toString());\n+\n+    type.defineDeclaredProperty(\"foo\", NUMBER_TYPE, null);\n+    assertEquals(\"{foo: number}\", type.toString());\n+\n+    type.defineDeclaredProperty(\"bar\", type, null);\n+    assertEquals(\"{bar: {...}, foo: number}\", type.toString());\n+  }\n+}", "timestamp": 1314212391, "metainfo": ""}