{"sha": "5909c3db59b16886917456ab950ef9661a7fe6b1", "log": "numbers are hard! fixes issue 569  R=johnlenz DELTA=15  (14 added, 0 deleted, 1 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=3410   ", "commit": "\n--- a/src/com/google/javascript/jscomp/CodeGenerator.java\n+++ b/src/com/google/javascript/jscomp/CodeGenerator.java\n         return false;\n       }\n     }\n-    return len > 0;\n+    return len > 0 && s.charAt(0) != '0';\n   }\n \n   static double getSimpleNumber(String s) {\n--- a/test/com/google/javascript/jscomp/CodePrinterTest.java\n+++ b/test/com/google/javascript/jscomp/CodePrinterTest.java\n         \"var whil\\\\u0065=1;whil\\\\u0065=2;whil\\\\u0065=3\");\n   }\n \n+  public void testNumericKeys() {\n+    assertPrint(\"var x = {010: 1};\", \"var x={8:1}\");\n+    assertPrint(\"var x = {'010': 1};\", \"var x={\\\"010\\\":1}\");\n+\n+    assertPrint(\"var x = {0x10: 1};\", \"var x={16:1}\");\n+    assertPrint(\"var x = {'0x10': 1};\", \"var x={\\\"0x10\\\":1}\");\n+\n+    // I was surprised at this result too.\n+    assertPrint(\"var x = {.2: 1};\", \"var x={\\\"0.2\\\":1}\");\n+    assertPrint(\"var x = {'.2': 1};\", \"var x={\\\".2\\\":1}\");\n+\n+    assertPrint(\"var x = {0.2: 1};\", \"var x={\\\"0.2\\\":1}\");\n+    assertPrint(\"var x = {'0.2': 1};\", \"var x={\\\"0.2\\\":1}\");\n+  }\n }", "timestamp": 1317777900, "metainfo": ""}