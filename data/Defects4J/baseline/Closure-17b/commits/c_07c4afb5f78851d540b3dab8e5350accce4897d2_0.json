{"sha": "07c4afb5f78851d540b3dab8e5350accce4897d2", "log": "Wipe GlobalNamespace out during incremental compile.  R=nicksantos DELTA=22  (13 added, 0 deleted, 9 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=3297   ", "commit": "\n--- a/src/com/google/javascript/jscomp/DefaultPassConfig.java\n+++ b/src/com/google/javascript/jscomp/DefaultPassConfig.java\n \n   /** Release references to data that is only needed during checks. */\n   final PassFactory garbageCollectChecks =\n-      new PassFactory(\"garbageCollectChecks\", true) {\n-    @Override\n-    protected CompilerPass createInternal(final AbstractCompiler compiler) {\n-      return new CompilerPass() {\n+      new HotSwapPassFactory(\"garbageCollectChecks\", true) {\n+    @Override\n+    protected HotSwapCompilerPass createInternal(final AbstractCompiler compiler) {\n+      return new HotSwapCompilerPass() {\n         @Override\n         public void process(Node externs, Node jsRoot) {\n           // Kill the global namespace so that it can be garbage collected\n           // after all passes are through with it.\n           namespaceForChecks = null;\n+        }\n+\n+        @Override\n+        public void hotSwapScript(Node scriptRoot, Node originalRoot) {\n+          process(null, null);\n         }\n       };\n     }", "timestamp": 1316469865, "metainfo": ""}