{"sha": "0a670cb51fd56c12c19f98884c9513792ebc3f76", "log": "add dependency management in whitespace-only mode contributed by Chris Peisert fixes issue 703  R=acleung DELTA=16  (15 added, 1 deleted, 0 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=4496   ", "commit": "\n--- a/src/com/google/javascript/jscomp/Compiler.java\n+++ b/src/com/google/javascript/jscomp/Compiler.java\n \n       // Check if the sources need to be re-ordered.\n       if (options.dependencyOptions.needsManagement() &&\n-          !options.skipAllPasses &&\n           options.closurePass) {\n         for (CompilerInput input : inputs) {\n           // Forward-declare all the provided types, so that they\n--- a/test/com/google/javascript/jscomp/CommandLineRunnerTest.java\n+++ b/test/com/google/javascript/jscomp/CommandLineRunnerTest.java\n          });\n   }\n \n+  public void testDependencySortingWhitespaceMode() {\n+    args.add(\"--manage_closure_dependencies\");\n+    args.add(\"--compilation_level=WHITESPACE_ONLY\");\n+    test(new String[] {\n+          \"goog.require('beer');\",\n+          \"goog.provide('beer');\\ngoog.require('hops');\",\n+          \"goog.provide('hops');\",\n+         },\n+         new String[] {\n+          \"goog.provide('hops');\",\n+          \"goog.provide('beer');\\ngoog.require('hops');\",\n+          \"goog.require('beer');\"\n+         });\n+  }\n \n   public void testForwardDeclareDroppedTypes() {\n     args.add(\"--manage_closure_dependencies=true\");", "timestamp": 1334008850, "metainfo": ""}