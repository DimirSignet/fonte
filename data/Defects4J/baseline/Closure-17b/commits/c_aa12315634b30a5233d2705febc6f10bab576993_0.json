{"sha": "aa12315634b30a5233d2705febc6f10bab576993", "log": "Fix an edge case in assertion removal. I can't imagine this ever coming up in practice, but it's nice if the compiler doesn't crash.  R=johnlenz DELTA=14  (12 added, 0 deleted, 2 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=175008   ", "commit": "\n--- a/src/com/google/javascript/jscomp/ClosureCodeRemoval.java\n+++ b/src/com/google/javascript/jscomp/ClosureCodeRemoval.java\n       } else {\n         // Otherwise, replace the assertion with its first argument,\n         // which is the return value of the assertion.\n-        parent.replaceChild(\n-            call, call.getFirstChild().getNext().detachFromParent());\n+        Node firstArg = call.getFirstChild().getNext();\n+        if (firstArg == null) {\n+          parent.replaceChild(call, NodeUtil.newUndefinedNode(call));\n+        } else {\n+          parent.replaceChild(call, firstArg.detachFromParent());\n+        }\n       }\n       compiler.reportCodeChange();\n     }\n--- a/test/com/google/javascript/jscomp/ClosureCodeRemovalTest.java\n+++ b/test/com/google/javascript/jscomp/ClosureCodeRemovalTest.java\n     test(\"goog.asserts.assert(y(), 'message');\", \"\");\n   }\n \n+  public void testAssertionRemoval3() {\n+    test(\"goog.asserts.assert();\", \"\");\n+  }\n+\n+  public void testAssertionRemoval4() {\n+    test(\"var x = goog.asserts.assert();\", \"var x = void 0;\");\n+  }\n+\n   @Override\n   protected ClosureCodeRemoval getProcessor(Compiler compiler) {\n     return new ClosureCodeRemoval(compiler, true, true);", "timestamp": 1282174087, "metainfo": ""}