{"sha": "bffc316f87f72d62578940d4a98d30e83d5796a9", "log": "Fixed defect in localized Gregorian/Julian symbol cache which severely impacted formatting performance when using null (default) locale.   ", "commit": "\n--- a/JodaTime/src/java/org/joda/time/chrono/GJLocaleSymbols.java\n+++ b/JodaTime/src/java/org/joda/time/chrono/GJLocaleSymbols.java\n     private static WeakHashMap cCache = new WeakHashMap();\n \n     public static GJLocaleSymbols forLocale(Locale locale) {\n+        if (locale == null) {\n+            locale = Locale.getDefault();\n+        }\n         int index = System.identityHashCode(locale) & (FAST_CACHE_SIZE - 1);\n         GJLocaleSymbols symbols = cFastCache[index];\n         if (symbols != null && symbols.iLocale.get() == locale) {\n     private final int iMaxShortMonthLength;\n     private final int iMaxHalfdayLength;\n \n+    /**\n+     * @param locale must not be null\n+     */\n     private GJLocaleSymbols(Locale locale) {\n-        if (locale == null) {\n-            locale = Locale.getDefault();\n-        }\n-\n         iLocale = new WeakReference(locale);\n \n         DateFormatSymbols dfs = new DateFormatSymbols(locale);", "timestamp": 1189359012, "metainfo": ""}