{"sha": "fca10e3306d3349ebf452d04c770b6b0e2213c48", "log": "Fixed #184", "commit": "\n--- a/src/main/java/com/fasterxml/jackson/core/json/UTF8JsonGenerator.java\n+++ b/src/main/java/com/fasterxml/jackson/core/json/UTF8JsonGenerator.java\n import java.math.BigInteger;\n \n import com.fasterxml.jackson.core.*;\n+import com.fasterxml.jackson.core.JsonGenerator.Feature;\n import com.fasterxml.jackson.core.io.*;\n \n public class UTF8JsonGenerator\n         if (value == null) {\n             _writeNull();\n         } else if (_cfgNumbersAsStrings) {\n-            _writeQuotedRaw(value);\n+            _writeQuotedRaw(value.toString());\n         } else {\n             writeRaw(value.toString());\n         }\n         if (value == null) {\n             _writeNull();\n         } else if (_cfgNumbersAsStrings) {\n-            _writeQuotedRaw(value);\n+            String raw = isEnabled(Feature.WRITE_BIGDECIMAL_AS_PLAIN) ? value.toPlainString() : value.toString();\n+            _writeQuotedRaw(raw);\n         } else if (isEnabled(Feature.WRITE_BIGDECIMAL_AS_PLAIN)) {\n             writeRaw(value.toPlainString());\n         } else {\n         }\n     }\n \n-    private final void _writeQuotedRaw(Object value) throws IOException\n-    {\n-        if (_outputTail >= _outputEnd) {\n-            _flushBuffer();\n-        }\n-        _outputBuffer[_outputTail++] = BYTE_QUOTE;\n-        writeRaw(value.toString());\n+    private final void _writeQuotedRaw(String value) throws IOException\n+    {\n+        if (_outputTail >= _outputEnd) {\n+            _flushBuffer();\n+        }\n+        _outputBuffer[_outputTail++] = BYTE_QUOTE;\n+        writeRaw(value);\n         if (_outputTail >= _outputEnd) {\n             _flushBuffer();\n         }\n--- a/src/main/java/com/fasterxml/jackson/core/json/WriterBasedJsonGenerator.java\n+++ b/src/main/java/com/fasterxml/jackson/core/json/WriterBasedJsonGenerator.java\n         if (value == null) {\n             _writeNull();\n         } else if (_cfgNumbersAsStrings) {\n-            _writeQuotedRaw(value);\n+            _writeQuotedRaw(value.toString());\n         } else {\n             writeRaw(value.toString());\n         }\n         if (value == null) {\n             _writeNull();\n         } else if (_cfgNumbersAsStrings) {\n-            _writeQuotedRaw(value);\n+            String raw = isEnabled(Feature.WRITE_BIGDECIMAL_AS_PLAIN) ? value.toPlainString() : value.toString();\n+            _writeQuotedRaw(raw);\n         } else if (isEnabled(Feature.WRITE_BIGDECIMAL_AS_PLAIN)) {\n             writeRaw(value.toPlainString());\n         } else {\n         }\n     }\n \n-    private void _writeQuotedRaw(Object value) throws IOException\n+    private void _writeQuotedRaw(String value) throws IOException\n     {\n         if (_outputTail >= _outputEnd) {\n             _flushBuffer();\n         }\n         _outputBuffer[_outputTail++] = '\"';\n-        writeRaw(value.toString());\n+        writeRaw(value);\n         if (_outputTail >= _outputEnd) {\n             _flushBuffer();\n         }\n--- a/src/test/java/com/fasterxml/jackson/core/json/TestJsonGeneratorFeatures.java\n+++ b/src/test/java/com/fasterxml/jackson/core/json/TestJsonGeneratorFeatures.java\n         jg.close();\n         assertEquals(\"100\", sw.toString());\n     }\n+\n+    // [issue#184]\n+    public void testBigDecimalAsPlainString() throws Exception\n+    {\n+        JsonFactory jf = new JsonFactory();\n+        BigDecimal ENG = new BigDecimal(\"1E+2\");\n+        jf.enable(JsonGenerator.Feature.WRITE_BIGDECIMAL_AS_PLAIN);\n+        jf.enable(JsonGenerator.Feature.WRITE_NUMBERS_AS_STRINGS);\n+\n+        StringWriter sw = new StringWriter();\n+        JsonGenerator jg = jf.createGenerator(sw);\n+        jg.writeNumber(ENG);\n+        jg.close();\n+        assertEquals(quote(\"100\"), sw.toString());\n+\n+        // also, as bytes\n+        ByteArrayOutputStream bos = new ByteArrayOutputStream();\n+        jg = jf.createGenerator(bos);\n+        jg.writeNumber(ENG);\n+        jg.close();\n+        assertEquals(quote(\"100\"), bos.toString(\"UTF-8\"));\n+    }\n     \n     private String _writeNumbers(JsonFactory jf) throws IOException\n     {", "timestamp": 1424392744, "metainfo": ""}