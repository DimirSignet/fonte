{"sha": "2a629d63ac7aa8eed5a27e1ad3cb465b1924a0bc", "log": "Minor forward-compatibility improvement: add `TextBuffer.setCurrentAndReturn()`", "commit": "\n--- a/src/main/java/com/fasterxml/jackson/core/util/TextBuffer.java\n+++ b/src/main/java/com/fasterxml/jackson/core/util/TextBuffer.java\n     public int getCurrentSegmentSize() { return _currentSize; }\n     public void setCurrentLength(int len) { _currentSize = len; }\n \n+    /**\n+     * @since 2.6\n+     */\n+    public String setCurrentAndReturn(int len) {\n+        _currentSize = len;\n+        // We can simplify handling here compared to full `contentsAsString()`:\n+        if (_segmentSize > 0) { // longer text; call main method\n+            return contentsAsString();\n+        }\n+        // more common case: single segment\n+        int currLen = _currentSize;\n+        String str = (currLen == 0) ? \"\" : new String(_currentSegment, 0, currLen);\n+        _resultString = str;\n+        return str;\n+    }\n+    \n     public char[] finishCurrentSegment() {\n         if (_segments == null) {\n             _segments = new ArrayList<char[]>();", "timestamp": 1423518618, "metainfo": ""}