{"sha": "05f6fcc7afc2bb16bf3b68e4ea3f35a1f6c8fa02", "log": "LANG-813 StringUtils.equalsIgnoreCase doesn't check string reference equality Also check lengths.  ", "commit": "\n--- a/src/main/java/org/apache/commons/lang3/StringUtils.java\n+++ b/src/main/java/org/apache/commons/lang3/StringUtils.java\n     public static boolean equalsIgnoreCase(CharSequence str1, CharSequence str2) {\n         if (str1 == null || str2 == null) {\n             return str1 == str2;\n+        } else if (str1 == str2) {\n+            return true;\n+        } else if (str1.length() != str2.length()) {\n+            return false;\n         } else {\n-            return CharSequenceUtils.regionMatches(str1, true, 0, str2, 0, Math.max(str1.length(), str2.length()));\n+            return CharSequenceUtils.regionMatches(str1, true, 0, str2, 0, str1.length());\n         }\n     }\n \n--- a/src/test/java/org/apache/commons/lang3/StringUtilsEqualsIndexOfTest.java\n+++ b/src/test/java/org/apache/commons/lang3/StringUtilsEqualsIndexOfTest.java\n         assertEquals(false, StringUtils.equalsIgnoreCase(FOO, BAR));\n         assertEquals(false, StringUtils.equalsIgnoreCase(FOO, null));\n         assertEquals(false, StringUtils.equalsIgnoreCase(null, FOO));\n+        assertEquals(true, StringUtils.equalsIgnoreCase(\"\",\"\"));\n+        assertEquals(false, StringUtils.equalsIgnoreCase(\"abcd\",\"abcd \"));\n     }\n \n     //-----------------------------------------------------------------------", "timestamp": 1342227216, "metainfo": ""}