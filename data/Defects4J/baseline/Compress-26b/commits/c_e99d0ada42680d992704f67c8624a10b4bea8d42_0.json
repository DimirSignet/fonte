{"sha": "e99d0ada42680d992704f67c8624a10b4bea8d42", "log": "Replace init method with private ctor; allows several fields to be made final  ", "commit": "\n--- a/src/main/java/org/apache/commons/compress/archivers/tar/TarBuffer.java\n+++ b/src/main/java/org/apache/commons/compress/archivers/tar/TarBuffer.java\n     /** Default block size */\n     public static final int DEFAULT_BLKSIZE = (DEFAULT_RCDSIZE * 20);\n \n+    // TODO make these final? (would need to change close() method)\n     private InputStream     inStream;\n     private OutputStream    outStream;\n-    private byte[]          blockBuffer;\n+    private final int             blockSize;\n+    private final int             recordSize;\n+    private final int             recsPerBlock;\n+    private final byte[]          blockBuffer;\n+\n     private int             currBlkIdx;\n     private int             currRecIdx;\n-    private int             blockSize;\n-    private int             recordSize;\n-    private int             recsPerBlock;\n     \n     /**\n      * Constructor for a TarBuffer on an input stream.\n      * @param recordSize the record size to use\n      */\n     public TarBuffer(InputStream inStream, int blockSize, int recordSize) {\n-        this.inStream = inStream;\n-        this.outStream = null;\n-\n-        this.initialize(blockSize, recordSize);\n+        this(inStream, null, blockSize, recordSize);\n     }\n \n     /**\n      * @param recordSize the record size to use\n      */\n     public TarBuffer(OutputStream outStream, int blockSize, int recordSize) {\n-        this.inStream = null;\n-        this.outStream = outStream;\n-\n-        this.initialize(blockSize, recordSize);\n-    }\n-\n-    /**\n-     * Initialization common to all constructors.\n-     */\n-    private void initialize(int blockSize, int recordSize) {\n+        this(null, outStream, blockSize, recordSize);\n+    }\n+\n+    /**\n+     * Private constructor to perform common setup.\n+     */\n+    private TarBuffer(InputStream inStream, OutputStream outStream, int blockSize, int recordSize) {\n+        this.inStream = inStream;\n+        this.outStream = outStream;        \n         this.blockSize = blockSize;\n         this.recordSize = recordSize;\n         this.recsPerBlock = (this.blockSize / this.recordSize);", "timestamp": 1329964025, "metainfo": ""}