{"sha": "e10ce2c37a9dd72efa8b8d706067c6960276933c", "log": "COMPRESS-208: skip over PK00 splitting marker which really only says 'nothing to see here'  ", "commit": "\n--- a/src/main/java/org/apache/commons/compress/archivers/zip/ZipArchiveInputStream.java\n+++ b/src/main/java/org/apache/commons/compress/archivers/zip/ZipArchiveInputStream.java\n             throw new \n                 UnsupportedZipFeatureException(UnsupportedZipFeatureException\n                                                .Feature.SPLITTING);\n+        }\n+        if (sig.equals(ZipLong.SINGLE_SEGMENT_SPLIT_MARKER)) {\n+            // The archive is not really split as only one segment was\n+            // needed in the end.  Just skip over the marker.\n+            byte[] missedLfhBytes = new byte[4];\n+            readFully(missedLfhBytes);\n+            System.arraycopy(lfh, 4, lfh, 0, LFH_LEN - 4);\n+            System.arraycopy(missedLfhBytes, 0, lfh, LFH_LEN - 4, 4);\n         }\n     }\n \n--- a/src/main/java/org/apache/commons/compress/archivers/zip/ZipLong.java\n+++ b/src/main/java/org/apache/commons/compress/archivers/zip/ZipLong.java\n      * @since 1.3\n      */\n     static final ZipLong ZIP64_MAGIC = new ZipLong(ZipConstants.ZIP64_MAGIC);\n+\n+    /**\n+     * Marks ZIP archives that were supposed to be split or spanned\n+     * but only needed a single segment in then end (so are actually\n+     * neither split nor spanned).\n+     *\n+     * <p>This is the \"PK00\" prefix found in some archives.</p>\n+     * @since 1.5\n+     */\n+    public static final ZipLong SINGLE_SEGMENT_SPLIT_MARKER =\n+        new ZipLong(0X30304B50L);\n \n     /**\n      * Create instance from a number.\n--- a/src/test/java/org/apache/commons/compress/archivers/ZipTestCase.java\n+++ b/src/test/java/org/apache/commons/compress/archivers/ZipTestCase.java\n     }\n \n     /**\n+     * Test case for \n+     * <a href=\"https://issues.apache.org/jira/browse/COMPRESS-208\"\n+     * >COMPRESS-208</a>.\n+     */\n+    public void testSkipsPK00Prefix() throws Exception {\n+        final File input = getFile(\"COMPRESS-208.zip\");\n+        InputStream is = new FileInputStream(input);\n+        ArrayList al = new ArrayList();\n+        al.add(\"test1.xml\");\n+        al.add(\"test2.xml\");\n+        try {\n+            checkArchiveContent(new ZipArchiveInputStream(is), al);\n+        } finally {\n+            is.close();\n+        }\n+    }\n+\n+    /**\n      * Test case for\n      * <a href=\"https://issues.apache.org/jira/browse/COMPRESS-93\"\n      * >COMPRESS-93</a>.", "timestamp": 1357037843, "metainfo": ""}