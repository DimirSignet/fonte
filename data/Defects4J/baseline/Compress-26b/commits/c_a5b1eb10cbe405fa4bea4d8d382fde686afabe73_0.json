{"sha": "a5b1eb10cbe405fa4bea4d8d382fde686afabe73", "log": "Conditional testing for XZ BCJ bug  ", "commit": "\n--- a/src/test/java/org/apache/commons/compress/archivers/sevenz/SevenZOutputFileTest.java\n+++ b/src/test/java/org/apache/commons/compress/archivers/sevenz/SevenZOutputFileTest.java\n \n public class SevenZOutputFileTest extends AbstractTestCase {\n \n+    private static final boolean XZ_BCJ_IS_BUGGY;\n+\n+    static {\n+        final String version = org.tukaani.xz.XZ.class.getPackage().getImplementationVersion();\n+        XZ_BCJ_IS_BUGGY=version.equals(\"1.4\");\n+        if (XZ_BCJ_IS_BUGGY) {\n+            System.out.println(\"XZ version is \" + version + \" - skipping BCJ tests\");\n+        }\n+    }\n     private File output;\n \n     @Override\n         testRoundTrip(SevenZMethod.DEFLATE);\n     }\n \n-    /* must wait for XZ for Java > 1.4\n+    /* must wait for XZ for Java > 1.4 */\n     public void testBCJX86Roundtrip() throws Exception {\n+        if (XZ_BCJ_IS_BUGGY) { return; }\n         testFilterRoundTrip(new SevenZMethodConfiguration(SevenZMethod.BCJ_X86_FILTER));\n     }\n \n     public void testBCJARMRoundtrip() throws Exception {\n+        if (XZ_BCJ_IS_BUGGY) { return; }\n         testFilterRoundTrip(new SevenZMethodConfiguration(SevenZMethod.BCJ_ARM_FILTER));\n     }\n \n     public void testBCJARMThumbRoundtrip() throws Exception {\n+        if (XZ_BCJ_IS_BUGGY) { return; }\n         testFilterRoundTrip(new SevenZMethodConfiguration(SevenZMethod.BCJ_ARM_THUMB_FILTER));\n     }\n \n     public void testBCJIA64Roundtrip() throws Exception {\n+        if (XZ_BCJ_IS_BUGGY) { return; }\n         testFilterRoundTrip(new SevenZMethodConfiguration(SevenZMethod.BCJ_IA64_FILTER));\n     }\n \n     public void testBCJPPCRoundtrip() throws Exception {\n+        if (XZ_BCJ_IS_BUGGY) { return; }\n         testFilterRoundTrip(new SevenZMethodConfiguration(SevenZMethod.BCJ_PPC_FILTER));\n     }\n \n     public void testBCJSparcRoundtrip() throws Exception {\n+        if (XZ_BCJ_IS_BUGGY) { return; }\n         testFilterRoundTrip(new SevenZMethodConfiguration(SevenZMethod.BCJ_SPARC_FILTER));\n     }\n-    */\n+    /**/\n \n     public void testDeltaRoundtrip() throws Exception {\n         testFilterRoundTrip(new SevenZMethodConfiguration(SevenZMethod.DELTA_FILTER));", "timestamp": 1393892310, "metainfo": ""}