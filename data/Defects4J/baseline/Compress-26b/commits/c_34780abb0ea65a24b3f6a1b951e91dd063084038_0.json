{"sha": "34780abb0ea65a24b3f6a1b951e91dd063084038", "log": "Check can add a file to an empty archive  ", "commit": "\n--- a/src/test/java/org/apache/commons/compress/changes/ChangeSetTestCase.java\n+++ b/src/test/java/org/apache/commons/compress/changes/ChangeSetTestCase.java\n  */\n package org.apache.commons.compress.changes;\n \n-import java.io.BufferedInputStream;\n import java.io.File;\n import java.io.FileInputStream;\n import java.io.FileOutputStream;\n      */\n     public void testAddMoveDelete() throws Exception {\n     }\n+    \n+    /**\n+     * Check can add a file to an empty archive.\n+     * \n+     * @throws Exception\n+     */\n+    public void testAddToEmptyArchive() throws Exception {\n+        File input = this.createEmptyArchive(\"zip\");\n+\n+        ArchiveOutputStream out = null;\n+        ArchiveInputStream ais = null;\n+        InputStream is = null;\n+        File result = File.createTempFile(\"test\", \".zip\");\n+        result.deleteOnExit();\n+        ChangeSet changes = new ChangeSet();\n+        try {\n+\n+            is = new FileInputStream(input);\n+            ais = factory.createArchiveInputStream(\"zip\", is);\n+\n+            out = factory.createArchiveOutputStream(\"zip\",\n+                    new FileOutputStream(result));\n+\n+            final File file1 = getFile(\"test.txt\");\n+            ArchiveEntry entry = new ZipArchiveEntry(\"bla/test.txt\");\n+            changes.add(entry, new FileInputStream(file1));\n+            archiveList.add(\"bla/test.txt\");\n+            changes.perform(ais, out);\n+            is.close();\n+\n+        } finally {\n+            if (out != null) {\n+                out.close();\n+            }\n+            if (ais != null) {\n+                ais.close(); // will close is \n+            } else if (is != null){\n+                is.close();\n+            }\n+        }\n+\n+        this.checkArchiveContent(result, archiveList);\n+    }\n }", "timestamp": 1238374495, "metainfo": ""}