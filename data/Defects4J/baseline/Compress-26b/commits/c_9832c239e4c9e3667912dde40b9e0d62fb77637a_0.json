{"sha": "9832c239e4c9e3667912dde40b9e0d62fb77637a", "log": "Null checks before closing files  ", "commit": "\n--- a/src/java/org/apache/commons/compress/archivers/tar/TarArchive.java\n+++ b/src/java/org/apache/commons/compress/archivers/tar/TarArchive.java\n \t\t\t\t\t}\n \t\t\t\t\tdestination.flush();\n \t\t\t\t} finally {\n-\t\t\t\t\tdestination.close();\n+\t\t\t\t\tif (destination != null)\n+\t\t\t\t\t    destination.close();\n \t\t\t\t}\n \t\t\t}\n \t\t} catch(IOException e) {\n \t\t\tthrow new ArchiveException(\"Creation of this archive failed cause of IOExceptions.\", e);\n \t\t} finally {\n \t\t\ttry {\n-\t\t\t\tout.close();\n+\t\t\t\tif (out != null) {\n+\t\t\t\t    out.close();\n+\t\t\t\t}\n \t\t\t} catch (IOException e1) {\n \t\t\t\tthrow new ArchiveException(\"Creation of this archive failed cause of IOExceptions.\", e1);\n \t\t\t}\n--- a/src/java/org/apache/commons/compress/archivers/zip/ZipArchive.java\n+++ b/src/java/org/apache/commons/compress/archivers/zip/ZipArchive.java\n \t\t\tthrow new UnpackException(\"Exception while unpacking.\", e);\n \t\t} finally {\n \t\t\ttry {\n-\t\t\t\tzInputStream.close();\n+\t\t\t\tif (zInputStream != null){\n+\t\t\t\t    zInputStream.close();\n+\t\t\t\t}\n \t\t\t} catch (IOException e1) {\n \t\t\t\tthrow new UnpackException(\"Exception while unpacking.\", e1);\n \t\t\t}\n \t\t\tthrow new ArchiveException(\"Creation of this archive failed cause of IOExceptions.\", e);\n \t\t} finally {\n \t\t\ttry {\n-\t\t\t\tout.close();\n+\t\t\t\tif (out != null){\n+\t\t\t\t    out.close();\n+\t\t\t\t}\n \t\t\t} catch (IOException e1) {\n \t\t\t\tthrow new ArchiveException(\"Creation of this archive failed cause of IOExceptions.\", e1);\n \t\t\t}\n--- a/src/java/org/apache/commons/compress/compressors/bzip2/BZip2Compressor.java\n+++ b/src/java/org/apache/commons/compress/compressors/bzip2/BZip2Compressor.java\n \t\t\tthrow new CompressException(\"An IO Exception occured\", e);\n \t\t} finally {\n \t\t\ttry {\n-\t\t\t\toutputBZStream.close();\n+\t\t\t\tif (outputBZStream != null){\n+\t\t\t\t    outputBZStream.close();\n+\t\t\t\t}\n \t\t\t} catch (IOException e1) {\n \t\t\t\tthrow new CompressException(\"An IO Exception occured while closing the streams\", e1);\n \t\t\t}", "timestamp": 1215357511, "metainfo": ""}