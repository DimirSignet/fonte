{"sha": "3879e477a60c6e2bf5e23842d2a5d9a8734a46ce", "log": "Assume a record is using ZIP64 if and only if the ZIP64 extended information extra field is present.  http://www.pkware.com/documents/casestudies/APPNOTE.TXT says:        When extracting, if        the zip64 extended information extra field is present for        the file the compressed and uncompressed sizes will be 8       byte values.  when talking about the data descriptor, making the extra field the the thing to decide upon.  InfoZip's ZIP 3.0 agrees with this interpretation. I even found this in ZIP 3.0' zipfile.c:        /* PKZIP does not care of the version set in a CDH: if  */       /* there is a zip64 extra field assigned to a CDH PKZIP */       /* uses it, we should do so, too.                       */  so \"version made by\" is ignored in the central directory.  The comment is not present when looking at the local file header, I'm not yet decided whether to ignore the version there as well.    ", "commit": "\n--- a/src/main/java/org/apache/commons/compress/archivers/zip/ZipArchiveInputStream.java\n+++ b/src/main/java/org/apache/commons/compress/archivers/zip/ZipArchiveInputStream.java\n         if (!hasUTF8Flag && useUnicodeExtraFields) {\n             ZipUtil.setNameAndCommentFromExtraFields(current, fileName, null);\n         }\n+\n+        Zip64ExtendedInformationExtraField z64 = null;\n+        if (usesZip64) {\n+            z64 = (Zip64ExtendedInformationExtraField)\n+                current.getExtraField(Zip64ExtendedInformationExtraField\n+                                      .HEADER_ID);\n+            if (z64 == null) {\n+                // \"version made by\" >= 4.5 for some other reason than ZIP64\n+                usesZip64 = false;\n+            }\n+        }\n         if (!hasDataDescriptor) {\n             if (usesZip64 && (cSize.equals(ZipLong.ZIP64_MAGIC)\n                               || size.equals(ZipLong.ZIP64_MAGIC))\n                 ) {\n-                Zip64ExtendedInformationExtraField z64 =\n-                    (Zip64ExtendedInformationExtraField)\n-                    current.getExtraField(Zip64ExtendedInformationExtraField\n-                                          .HEADER_ID);\n-                if (z64 == null) {\n-                    throw new ZipException(\"expected ZIP64 extra field\");\n-                }\n                 current.setCompressedSize(z64.getCompressedSize()\n                                           .getLongValue());\n                 current.setSize(z64.getSize().getLongValue());", "timestamp": 1311655115, "metainfo": ""}