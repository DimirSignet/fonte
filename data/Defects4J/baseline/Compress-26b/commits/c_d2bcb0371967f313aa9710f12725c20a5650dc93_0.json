{"sha": "d2bcb0371967f313aa9710f12725c20a5650dc93", "log": "COMPRESS-233 performance and readability tweak for TarBuffer  ", "commit": "\n--- a/src/main/java/org/apache/commons/compress/archivers/tar/TarBuffer.java\n+++ b/src/main/java/org/apache/commons/compress/archivers/tar/TarBuffer.java\n     /** Default block size */\n     public static final int DEFAULT_BLKSIZE = (DEFAULT_RCDSIZE * 20);\n \n+    private static final byte[] DEFAULT_EOF_RECORD = new byte[DEFAULT_RCDSIZE];\n+\n     // TODO make these final? (would need to change close() method)\n     private InputStream     inStream;\n     private OutputStream    outStream;\n     private final int             recordSize;\n     private final int             recsPerBlock;\n     private final byte[]          blockBuffer;\n+    private final byte[]          eofRecord;\n \n     private int             currBlkIdx;\n     private int             currRecIdx;\n         this.recordSize = recordSize;\n         this.recsPerBlock = (this.blockSize / this.recordSize);\n         this.blockBuffer = new byte[this.blockSize];\n+        this.eofRecord = recordSize == DEFAULT_RCDSIZE\n+            ? DEFAULT_EOF_RECORD : new byte[recordSize];\n \n         if (this.inStream != null) {\n             this.currBlkIdx = -1;\n      * @return true if the record data is an End of Archive\n      */\n     public boolean isEOFRecord(byte[] record) {\n-        if (record != null) {\n-            for (int i = 0, sz = getRecordSize(); i < sz; ++i) {\n-                if (record[i] != 0) {\n-                    return false;\n-                }\n-            }\n-        }\n-        return true;\n+        return record == null || Arrays.equals(record, eofRecord);\n     }\n \n     /**", "timestamp": 1373296156, "metainfo": ""}