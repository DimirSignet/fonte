{"sha": "31134b47a2c5a56410e3097676fee55830dfcb85", "log": "Allows suppress duplicate in either declarations.  R=johnlenz DELTA=15  (15 added, 0 deleted, 0 changed)   Revision created by MOE tool push_codebase. MOE_MIGRATION=952   ", "commit": "\n--- a/src/com/google/javascript/jscomp/SyntacticScopeCreator.java\n+++ b/src/com/google/javascript/jscomp/SyntacticScopeCreator.java\n         allowDupe =\n             info != null && info.getSuppressions().contains(\"duplicate\");\n \n+        info = origVar.nameNode.getJSDocInfo();\n+        if (info == null) {\n+          info = origParent.getJSDocInfo();\n+        }\n+\n+        allowDupe |=\n+            info != null && info.getSuppressions().contains(\"duplicate\");\n+\n         if (!allowDupe) {\n           compiler.report(\n               JSError.make(sourceName, n,\n--- a/test/com/google/javascript/jscomp/SyntacticScopeCreatorTest.java\n+++ b/test/com/google/javascript/jscomp/SyntacticScopeCreatorTest.java\n     assertEquals(0, errors);\n   }\n \n+  public void testRedeclaration3() {\n+    String js = \" /** @suppress {duplicate} */ var a; var a; \";\n+    int errors = createGlobalScopeHelper(js);\n+    assertEquals(0, errors);\n+  }\n+\n+\n   public void testFunctionScopeArguments() {\n     // A var declaration doesn't mask arguments\n     testScopes(\"function f() {var arguments}\", 0);", "timestamp": 1300490246, "metainfo": ""}