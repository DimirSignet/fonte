{"sha": "d89939d5d56b0b2dfabdcf7af2bc83ad32884cce", "log": "[CODEC-73] In-line comments on odd test results with some charsets on different JREs.  ", "commit": "\n--- a/src/test/org/apache/commons/codec/binary/HexTest.java\n+++ b/src/test/org/apache/commons/codec/binary/HexTest.java\n  */\n public class HexTest extends TestCase {\n \n-    private final static boolean LOG = false;\n+    private final static boolean LOG = true;\n \n     public HexTest(String name) {\n         super(name);\n     private void log(String s) {\n         if (LOG) {\n             System.out.println(s);\n+            System.out.flush();\n+        }\n+    }\n+\n+    private void log(Throwable t) {\n+        if (LOG) {\n+            t.printStackTrace(System.out);\n+            System.out.flush();\n         }\n     }\n \n      */\n     private void testCustomCharset(String name, String parent) throws UnsupportedEncodingException, DecoderException {\n         if (charsetSanityCheck(name) == false) {\n-            log(\"Interesting Java charset oddity: Charset sanity check failed for \" + name);\n             return;\n         }\n         log(parent + \"=\" + name);\n         try {\n             byte[] bytes = source.getBytes(name);\n             String str = new String(bytes, name);\n-            return source.equals(str);\n+            boolean equals = source.equals(str);\n+            if (equals == false) {\n+                // Here with:\n+                //\n+                // Java Sun 1.4.2_19 x86 32-bits on Windows XP\n+                // JIS_X0212-1990\n+                // x-JIS0208\n+                //\n+                // Java Sun 1.5.0_17 x86 32-bits on Windows XP\n+                // JIS_X0212-1990\n+                // x-IBM834\n+                // x-JIS0208\n+                // x-MacDingbat\n+                // x-MacSymbol\n+                //\n+                // Java Sun 1.6.0_14 x86 32-bits\n+                // JIS_X0212-1990\n+                // x-IBM834\n+                // x-JIS0208\n+                // x-MacDingbat\n+                // x-MacSymbol\n+                // \n+                log(\"FAILED charsetSanityCheck=Interesting Java charset oddity: Roundtrip failed for \" + name);\n+            }\n+            return equals;\n         } catch (UnsupportedEncodingException e) {\n             // Should NEVER happen since we are getting the name from the Charset class.\n             if (LOG) {\n-                e.printStackTrace();\n+                log(\"FAILED charsetSanityCheck=\" + name + \", e=\" + e);\n+                log(e);\n             }\n             return false;\n         } catch (UnsupportedOperationException e) {\n-            // Happens with:\n-            // x-JIS0208 on Windows XP and Java Sun 1.6.0_14\n+            // Caught here with:\n+            // x-JISAutoDetect on Windows XP and Java Sun 1.4.2_19 x86 32-bits\n+            // x-JISAutoDetect on Windows XP and Java Sun 1.5.0_17 x86 32-bits\n+            // x-JISAutoDetect on Windows XP and Java Sun 1.6.0_14 x86 32-bits\n             if (LOG) {\n-                e.printStackTrace();\n+                log(\"FAILED charsetSanityCheck=\" + name + \", e=\" + e);\n+                log(e);\n             }\n             return false;\n         }", "timestamp": 1249503209, "metainfo": ""}